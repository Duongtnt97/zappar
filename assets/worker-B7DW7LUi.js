(function(){var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),s=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},c=(n,r,a)=>(a=n==null?{}:e(i(n)),s(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n)),l=(()=>{var e=typeof document<`u`&&document.currentScript?document.currentScript.src:void 0;return(function(t={}){var n=t,r,i;n.ready=new Promise((e,t)=>{r=e,i=t});var a=Object.assign({},n),o=`./this.program`,s=(e,t)=>{throw t},c=!1,l=!0,u=``;function d(e){return n.locateFile?n.locateFile(e,u):u+e}var f,p,m;(c||l)&&(l?u=self.location.href:typeof document<`u`&&document.currentScript&&(u=document.currentScript.src),e&&(u=e),u=u.startsWith(`blob:`)?``:u.substr(0,u.replace(/[?#].*/,``).lastIndexOf(`/`)+1),f=e=>{var t=new XMLHttpRequest;return t.open(`GET`,e,!1),t.send(null),t.responseText},l&&(m=e=>{var t=new XMLHttpRequest;return t.open(`GET`,e,!1),t.responseType=`arraybuffer`,t.send(null),new Uint8Array(t.response)}),p=(e,t,n)=>{var r=new XMLHttpRequest;r.open(`GET`,e,!0),r.responseType=`arraybuffer`,r.onload=()=>{if(r.status==200||r.status==0&&r.response){t(r.response);return}n()},r.onerror=n,r.send(null)});var h=n.print||console.log.bind(console),g=n.printErr||console.error.bind(console);Object.assign(n,a),a=null,n.arguments&&n.arguments,n.thisProgram&&(o=n.thisProgram),n.quit&&(s=n.quit);var _;n.wasmBinary&&(_=n.wasmBinary),typeof WebAssembly!=`object`&&P(`no native wasm support detected`);var v,y=!1,b;function x(e,t){e||P(t)}var S,C,w,T,E,D,O,k;function ee(){var e=v.buffer;n.HEAP8=S=new Int8Array(e),n.HEAP16=w=new Int16Array(e),n.HEAPU8=C=new Uint8Array(e),n.HEAPU16=T=new Uint16Array(e),n.HEAP32=E=new Int32Array(e),n.HEAPU32=D=new Uint32Array(e),n.HEAPF32=O=new Float32Array(e),n.HEAPF64=k=new Float64Array(e)}var A=[],te=[],j=[],ne=!1;function re(){if(n.preRun)for(typeof n.preRun==`function`&&(n.preRun=[n.preRun]);n.preRun.length;)ae(n.preRun.shift());ve(A)}function ie(){ne=!0,!n.noFSInit&&!W.init.initialized&&W.init(),W.ignorePermissions=!1,Me.init(),ve(te)}function M(){if(n.postRun)for(typeof n.postRun==`function`&&(n.postRun=[n.postRun]);n.postRun.length;)se(n.postRun.shift());ve(j)}function ae(e){A.unshift(e)}function oe(e){te.unshift(e)}function se(e){j.unshift(e)}var N=0,ce=null,le=null;function ue(e){return e}function de(e){N++,n.monitorRunDependencies?.(N)}function fe(e){if(N--,n.monitorRunDependencies?.(N),N==0&&(ce!==null&&(clearInterval(ce),ce=null),le)){var t=le;le=null,t()}}function P(e){n.onAbort?.(e),e=`Aborted(`+e+`)`,g(e),y=!0,b=1,e+=`. Build with -sASSERTIONS for more info.`,ne&&An();var t=new WebAssembly.RuntimeError(e);throw i(t),t}var F=`data:application/octet-stream;base64,`,pe=e=>e.startsWith(F),I=`zappar-cv.wasm`;pe(I)||(I=d(I));function me(e){if(e==I&&_)return new Uint8Array(_);if(m)return m(e);throw`sync fetching of the wasm failed: you can preload it to Module["wasmBinary"] manually, or emcc.py will do that for you when generating HTML (but not JS)`}function he(e,t){var n,r=me(e);return n=new WebAssembly.Module(r),[new WebAssembly.Instance(n,t),n]}function ge(){var e={a:Dn};function t(e,t){return $=e.exports,v=$.L,ee(),xt=$.Q,oe($.M),fe(`wasm-instantiate`),$}if(de(`wasm-instantiate`),n.instantiateWasm)try{return n.instantiateWasm(e,t)}catch(e){g(`Module.instantiateWasm callback failed with error: ${e}`),i(e)}return t(he(I,e)[0])}var L,R;function z(){var e=new URL(location.origin).hostname;if(e.length===0&&(e=new URL(location.href.replace(`blob:`,``)).hostname),/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e))e.indexOf(`10.`)===0&&(e=`10.*`),e.indexOf(`192.168.`)===0&&(e=`192.168.*`),e.indexOf(`172.`)===0&&(e=`172.*`),e.indexOf(`127.`)===0&&(e=`127.*`);else{var t=RegExp(`(\\.ngrok\\.io)$`,`i`);t.test(e)&&(e=`*.ngrok.io`),t=RegExp(`(\\.ngrok-free\\.app)$`,`i`),t.test(e)&&(e=`*.ngrok.io`),t=RegExp(`(\\.arweb\\.app)$`,`i`),t.test(e)&&(e=`*.arweb.app`)}var n=Oe(e)+1,r=kn(n);return q(e,r,n+1),r}function B(){self.postMessage({t:`licerr`})}function V(){self.postMessage({t:`gfx`})}function _e(e){this.name=`ExitStatus`,this.message=`Program terminated with exit(${e})`,this.status=e}var ve=e=>{for(;e.length>0;)e.shift()(n)};function ye(e,t=`i8`){switch(t.endsWith(`*`)&&(t=`*`),t){case`i1`:return S[e>>0];case`i8`:return S[e>>0];case`i16`:return w[e>>1];case`i32`:return E[e>>2];case`i64`:P(`to do getValue(i64) use WASM_BIGINT`);case`float`:return O[e>>2];case`double`:return k[e>>3];case`*`:return D[e>>2];default:P(`invalid type for getValue: ${t}`)}}var be=n.noExitRuntime||!0;function xe(e,t,n=`i8`){switch(n.endsWith(`*`)&&(n=`*`),n){case`i1`:S[e>>0]=t;break;case`i8`:S[e>>0]=t;break;case`i16`:w[e>>1]=t;break;case`i32`:E[e>>2]=t;break;case`i64`:P(`to do setValue(i64) use WASM_BIGINT`);case`float`:O[e>>2]=t;break;case`double`:k[e>>3]=t;break;case`*`:D[e>>2]=t;break;default:P(`invalid type for setValue: ${n}`)}}var H={isAbs:e=>e.charAt(0)===`/`,splitPath:e=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1),normalizeArray:(e,t)=>{for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];i===`.`?e.splice(r,1):i===`..`?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift(`..`);return e},normalize:e=>{var t=H.isAbs(e),n=e.substr(-1)===`/`;return e=H.normalizeArray(e.split(`/`).filter(e=>!!e),!t).join(`/`),!e&&!t&&(e=`.`),e&&n&&(e+=`/`),(t?`/`:``)+e},dirname:e=>{var t=H.splitPath(e),n=t[0],r=t[1];return!n&&!r?`.`:(r&&=r.substr(0,r.length-1),n+r)},basename:e=>{if(e===`/`)return`/`;e=H.normalize(e),e=e.replace(/\/$/,``);var t=e.lastIndexOf(`/`);return t===-1?e:e.substr(t+1)},join:function(){var e=Array.prototype.slice.call(arguments);return H.normalize(e.join(`/`))},join2:(e,t)=>H.normalize(e+`/`+t)},Se=()=>{if(typeof crypto==`object`&&typeof crypto.getRandomValues==`function`)return e=>crypto.getRandomValues(e);P(`initRandomDevice`)},Ce=e=>(Ce=Se())(e),we={resolve:function(){for(var e=``,t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:W.cwd();if(typeof r!=`string`)throw TypeError(`Arguments to path.resolve must be strings`);if(!r)return``;e=r+`/`+e,t=H.isAbs(r)}return e=H.normalizeArray(e.split(`/`).filter(e=>!!e),!t).join(`/`),(t?`/`:``)+e||`.`},relative:(e,t)=>{e=we.resolve(e).substr(1),t=we.resolve(t).substr(1);function n(e){for(var t=0;t<e.length&&e[t]===``;t++);for(var n=e.length-1;n>=0&&e[n]===``;n--);return t>n?[]:e.slice(t,n-t+1)}for(var r=n(e.split(`/`)),i=n(t.split(`/`)),a=Math.min(r.length,i.length),o=a,s=0;s<a;s++)if(r[s]!==i[s]){o=s;break}for(var c=[],s=o;s<r.length;s++)c.push(`..`);return c=c.concat(i.slice(o)),c.join(`/`)}},Te=typeof TextDecoder<`u`?new TextDecoder(`utf8`):void 0,Ee=(e,t,n)=>{for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.buffer&&Te)return Te.decode(e.subarray(t,i));for(var a=``;t<i;){var o=e[t++];if(!(o&128)){a+=String.fromCharCode(o);continue}var s=e[t++]&63;if((o&224)==192){a+=String.fromCharCode((o&31)<<6|s);continue}var c=e[t++]&63;if(o=(o&240)==224?(o&15)<<12|s<<6|c:(o&7)<<18|s<<12|c<<6|e[t++]&63,o<65536)a+=String.fromCharCode(o);else{var l=o-65536;a+=String.fromCharCode(55296|l>>10,56320|l&1023)}}return a},De=[],Oe=e=>{for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r<=127?t++:r<=2047?t+=2:r>=55296&&r<=57343?(t+=4,++n):t+=3}return t},ke=(e,t,n,r)=>{if(!(r>0))return 0;for(var i=n,a=n+r-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343){var c=e.charCodeAt(++o);s=65536+((s&1023)<<10)|c&1023}if(s<=127){if(n>=a)break;t[n++]=s}else if(s<=2047){if(n+1>=a)break;t[n++]=192|s>>6,t[n++]=128|s&63}else if(s<=65535){if(n+2>=a)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|s&63}else{if(n+3>=a)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|s&63}}return t[n]=0,n-i};function Ae(e,t,n){var r=n>0?n:Oe(e)+1,i=Array(r),a=ke(e,i,0,i.length);return t&&(i.length=a),i}var je=()=>{if(!De.length){var e=null;if(typeof window<`u`&&typeof window.prompt==`function`?(e=window.prompt(`Input: `),e!==null&&(e+=`
`)):typeof readline==`function`&&(e=readline(),e!==null&&(e+=`
`)),!e)return null;De=Ae(e,!0)}return De.shift()},Me={ttys:[],init(){},shutdown(){},register(e,t){Me.ttys[e]={input:[],output:[],ops:t},W.registerDevice(e,Me.stream_ops)},stream_ops:{open(e){var t=Me.ttys[e.node.rdev];if(!t)throw new W.ErrnoError(43);e.tty=t,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,t,n,r,i){if(!e.tty||!e.tty.ops.get_char)throw new W.ErrnoError(60);for(var a=0,o=0;o<r;o++){var s;try{s=e.tty.ops.get_char(e.tty)}catch{throw new W.ErrnoError(29)}if(s===void 0&&a===0)throw new W.ErrnoError(6);if(s==null)break;a++,t[n+o]=s}return a&&(e.node.timestamp=Date.now()),a},write(e,t,n,r,i){if(!e.tty||!e.tty.ops.put_char)throw new W.ErrnoError(60);try{for(var a=0;a<r;a++)e.tty.ops.put_char(e.tty,t[n+a])}catch{throw new W.ErrnoError(29)}return r&&(e.node.timestamp=Date.now()),a}},default_tty_ops:{get_char(e){return je()},put_char(e,t){t===null||t===10?(h(Ee(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(h(Ee(e.output,0)),e.output=[])},ioctl_tcgets(e){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(e,t,n){return 0},ioctl_tiocgwinsz(e){return[24,80]}},default_tty1_ops:{put_char(e,t){t===null||t===10?(g(Ee(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(g(Ee(e.output,0)),e.output=[])}}},Ne=e=>{P()},U={ops_table:null,mount(e){return U.createNode(null,`/`,16895,0)},createNode(e,t,n,r){if(W.isBlkdev(n)||W.isFIFO(n))throw new W.ErrnoError(63);U.ops_table||={dir:{node:{getattr:U.node_ops.getattr,setattr:U.node_ops.setattr,lookup:U.node_ops.lookup,mknod:U.node_ops.mknod,rename:U.node_ops.rename,unlink:U.node_ops.unlink,rmdir:U.node_ops.rmdir,readdir:U.node_ops.readdir,symlink:U.node_ops.symlink},stream:{llseek:U.stream_ops.llseek}},file:{node:{getattr:U.node_ops.getattr,setattr:U.node_ops.setattr},stream:{llseek:U.stream_ops.llseek,read:U.stream_ops.read,write:U.stream_ops.write,allocate:U.stream_ops.allocate,mmap:U.stream_ops.mmap,msync:U.stream_ops.msync}},link:{node:{getattr:U.node_ops.getattr,setattr:U.node_ops.setattr,readlink:U.node_ops.readlink},stream:{}},chrdev:{node:{getattr:U.node_ops.getattr,setattr:U.node_ops.setattr},stream:W.chrdev_stream_ops}};var i=W.createNode(e,t,n,r);return W.isDir(i.mode)?(i.node_ops=U.ops_table.dir.node,i.stream_ops=U.ops_table.dir.stream,i.contents={}):W.isFile(i.mode)?(i.node_ops=U.ops_table.file.node,i.stream_ops=U.ops_table.file.stream,i.usedBytes=0,i.contents=null):W.isLink(i.mode)?(i.node_ops=U.ops_table.link.node,i.stream_ops=U.ops_table.link.stream):W.isChrdev(i.mode)&&(i.node_ops=U.ops_table.chrdev.node,i.stream_ops=U.ops_table.chrdev.stream),i.timestamp=Date.now(),e&&(e.contents[t]=i,e.timestamp=i.timestamp),i},getFileDataAsTypedArray(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array},expandFileStorage(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){t=Math.max(t,n*(n<1024*1024?2:1.125)>>>0),n!=0&&(t=Math.max(t,256));var r=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(r.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,t){if(e.usedBytes!=t)if(t==0)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr(e){var t={};return t.dev=W.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,W.isDir(e.mode)?t.size=4096:W.isFile(e.mode)?t.size=e.usedBytes:W.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr(e,t){t.mode!==void 0&&(e.mode=t.mode),t.timestamp!==void 0&&(e.timestamp=t.timestamp),t.size!==void 0&&U.resizeFileStorage(e,t.size)},lookup(e,t){throw W.genericErrors[44]},mknod(e,t,n,r){return U.createNode(e,t,n,r)},rename(e,t,n){if(W.isDir(e.mode)){var r;try{r=W.lookupNode(t,n)}catch{}if(r)for(var i in r.contents)throw new W.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=n,t.contents[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir(e,t){for(var n in W.lookupNode(e,t).contents)throw new W.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir(e){var t=[`.`,`..`];for(var n of Object.keys(e.contents))t.push(n);return t},symlink(e,t,n){var r=U.createNode(e,t,41471,0);return r.link=n,r},readlink(e){if(!W.isLink(e.mode))throw new W.ErrnoError(28);return e.link}},stream_ops:{read(e,t,n,r,i){var a=e.node.contents;if(i>=e.node.usedBytes)return 0;var o=Math.min(e.node.usedBytes-i,r);if(o>8&&a.subarray)t.set(a.subarray(i,i+o),n);else for(var s=0;s<o;s++)t[n+s]=a[i+s];return o},write(e,t,n,r,i,a){if(t.buffer===S.buffer&&(a=!1),!r)return 0;var o=e.node;if(o.timestamp=Date.now(),t.subarray&&(!o.contents||o.contents.subarray)){if(a)return o.contents=t.subarray(n,n+r),o.usedBytes=r,r;if(o.usedBytes===0&&i===0)return o.contents=t.slice(n,n+r),o.usedBytes=r,r;if(i+r<=o.usedBytes)return o.contents.set(t.subarray(n,n+r),i),r}if(U.expandFileStorage(o,i+r),o.contents.subarray&&t.subarray)o.contents.set(t.subarray(n,n+r),i);else for(var s=0;s<r;s++)o.contents[i+s]=t[n+s];return o.usedBytes=Math.max(o.usedBytes,i+r),r},llseek(e,t,n){var r=t;if(n===1?r+=e.position:n===2&&W.isFile(e.node.mode)&&(r+=e.node.usedBytes),r<0)throw new W.ErrnoError(28);return r},allocate(e,t,n){U.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap(e,t,n,r,i){if(!W.isFile(e.node.mode))throw new W.ErrnoError(43);var a,o,s=e.node.contents;if(!(i&2)&&s.buffer===S.buffer)o=!1,a=s.byteOffset;else{if((n>0||n+t<s.length)&&(s=s.subarray?s.subarray(n,n+t):Array.prototype.slice.call(s,n,n+t)),o=!0,a=Ne(t),!a)throw new W.ErrnoError(48);S.set(s,a)}return{ptr:a,allocated:o}},msync(e,t,n,r,i){return U.stream_ops.write(e,t,0,r,n,!1),0}}},Pe=(e,t,n,r)=>{var i=r?``:ue(`al ${e}`);p(e,e=>{t(new Uint8Array(e)),i&&fe(i)},t=>{if(n)n();else throw`Loading data file "${e}" failed.`}),i&&de(i)},Fe=(e,t,n,r,i,a)=>{W.createDataFile(e,t,n,r,i,a)},Ie=n.preloadPlugins||[],Le=(e,t,n,r)=>{J!==void 0&&J.init();var i=!1;return Ie.forEach(a=>{i||a.canHandle(t)&&(a.handle(e,t,n,r),i=!0)}),i},Re=(e,t,n,r,i,a,o,s,c,l)=>{var u=t?we.resolve(H.join2(e,t)):e,d=ue(`cp ${u}`);function f(n){function f(n){l?.(),s||Fe(e,t,n,r,i,c),a?.(),fe(d)}Le(n,u,f,()=>{o?.(),fe(d)})||f(n)}de(d),typeof n==`string`?Pe(n,f,o):f(n)},ze=e=>{var t={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[e];if(t===void 0)throw Error(`Unknown file open mode: ${e}`);return t},Be=(e,t)=>{var n=0;return e&&(n|=365),t&&(n|=146),n},W={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:`/`,initialized:!1,ignorePermissions:!0,ErrnoError:class{constructor(e){this.name=`ErrnoError`,this.errno=e}},genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath(e,t={}){if(e=we.resolve(e),!e)return{path:``,node:null};if(t=Object.assign({follow_mount:!0,recurse_count:0},t),t.recurse_count>8)throw new W.ErrnoError(32);for(var n=e.split(`/`).filter(e=>!!e),r=W.root,i=`/`,a=0;a<n.length;a++){var o=a===n.length-1;if(o&&t.parent)break;if(r=W.lookupNode(r,n[a]),i=H.join2(i,n[a]),W.isMountpoint(r)&&(!o||o&&t.follow_mount)&&(r=r.mounted.root),!o||t.follow)for(var s=0;W.isLink(r.mode);){var c=W.readlink(i);if(i=we.resolve(H.dirname(i),c),r=W.lookupPath(i,{recurse_count:t.recurse_count+1}).node,s++>40)throw new W.ErrnoError(32)}}return{path:i,node:r}},getPath(e){for(var t;;){if(W.isRoot(e)){var n=e.mount.mountpoint;return t?n[n.length-1]===`/`?n+t:`${n}/${t}`:n}t=t?`${e.name}/${t}`:e.name,e=e.parent}},hashName(e,t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%W.nameTable.length},hashAddNode(e){var t=W.hashName(e.parent.id,e.name);e.name_next=W.nameTable[t],W.nameTable[t]=e},hashRemoveNode(e){var t=W.hashName(e.parent.id,e.name);if(W.nameTable[t]===e)W.nameTable[t]=e.name_next;else for(var n=W.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode(e,t){var n=W.mayLookup(e);if(n)throw new W.ErrnoError(n);for(var r=W.hashName(e.id,t),i=W.nameTable[r];i;i=i.name_next){var a=i.name;if(i.parent.id===e.id&&a===t)return i}return W.lookup(e,t)},createNode(e,t,n,r){var i=new W.FSNode(e,t,n,r);return W.hashAddNode(i),i},destroyNode(e){W.hashRemoveNode(e)},isRoot(e){return e===e.parent},isMountpoint(e){return!!e.mounted},isFile(e){return(e&61440)==32768},isDir(e){return(e&61440)==16384},isLink(e){return(e&61440)==40960},isChrdev(e){return(e&61440)==8192},isBlkdev(e){return(e&61440)==24576},isFIFO(e){return(e&61440)==4096},isSocket(e){return(e&49152)==49152},flagsToPermissionString(e){var t=[`r`,`w`,`rw`][e&3];return e&512&&(t+=`w`),t},nodePermissions(e,t){return W.ignorePermissions?0:t.includes(`r`)&&!(e.mode&292)||t.includes(`w`)&&!(e.mode&146)||t.includes(`x`)&&!(e.mode&73)?2:0},mayLookup(e){return W.isDir(e.mode)?W.nodePermissions(e,`x`)||(e.node_ops.lookup?0:2):54},mayCreate(e,t){try{return W.lookupNode(e,t),20}catch{}return W.nodePermissions(e,`wx`)},mayDelete(e,t,n){var r;try{r=W.lookupNode(e,t)}catch(e){return e.errno}var i=W.nodePermissions(e,`wx`);if(i)return i;if(n){if(!W.isDir(r.mode))return 54;if(W.isRoot(r)||W.getPath(r)===W.cwd())return 10}else if(W.isDir(r.mode))return 31;return 0},mayOpen(e,t){return e?W.isLink(e.mode)?32:W.isDir(e.mode)&&(W.flagsToPermissionString(t)!==`r`||t&512)?31:W.nodePermissions(e,W.flagsToPermissionString(t)):44},MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=W.MAX_OPEN_FDS;e++)if(!W.streams[e])return e;throw new W.ErrnoError(33)},getStreamChecked(e){var t=W.getStream(e);if(!t)throw new W.ErrnoError(8);return t},getStream:e=>W.streams[e],createStream(e,t=-1){return W.FSStream||(W.FSStream=function(){this.shared={}},W.FSStream.prototype={},Object.defineProperties(W.FSStream.prototype,{object:{get(){return this.node},set(e){this.node=e}},isRead:{get(){return(this.flags&2097155)!=1}},isWrite:{get(){return(this.flags&2097155)!=0}},isAppend:{get(){return this.flags&1024}},flags:{get(){return this.shared.flags},set(e){this.shared.flags=e}},position:{get(){return this.shared.position},set(e){this.shared.position=e}}})),e=Object.assign(new W.FSStream,e),t==-1&&(t=W.nextfd()),e.fd=t,W.streams[t]=e,e},closeStream(e){W.streams[e]=null},chrdev_stream_ops:{open(e){e.stream_ops=W.getDevice(e.node.rdev).stream_ops,e.stream_ops.open?.(e)},llseek(){throw new W.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,t)=>e<<8|t,registerDevice(e,t){W.devices[e]={stream_ops:t}},getDevice:e=>W.devices[e],getMounts(e){for(var t=[],n=[e];n.length;){var r=n.pop();t.push(r),n.push.apply(n,r.mounts)}return t},syncfs(e,t){typeof e==`function`&&(t=e,e=!1),W.syncFSRequests++,W.syncFSRequests>1&&g(`warning: ${W.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var n=W.getMounts(W.root.mount),r=0;function i(e){return W.syncFSRequests--,t(e)}function a(e){if(e)return a.errored?void 0:(a.errored=!0,i(e));++r>=n.length&&i(null)}n.forEach(t=>{if(!t.type.syncfs)return a(null);t.type.syncfs(t,e,a)})},mount(e,t,n){var r=n===`/`,i=!n,a;if(r&&W.root)throw new W.ErrnoError(10);if(!r&&!i){var o=W.lookupPath(n,{follow_mount:!1});if(n=o.path,a=o.node,W.isMountpoint(a))throw new W.ErrnoError(10);if(!W.isDir(a.mode))throw new W.ErrnoError(54)}var s={type:e,opts:t,mountpoint:n,mounts:[]},c=e.mount(s);return c.mount=s,s.root=c,r?W.root=c:a&&(a.mounted=s,a.mount&&a.mount.mounts.push(s)),c},unmount(e){var t=W.lookupPath(e,{follow_mount:!1});if(!W.isMountpoint(t.node))throw new W.ErrnoError(28);var n=t.node,r=n.mounted,i=W.getMounts(r);Object.keys(W.nameTable).forEach(e=>{for(var t=W.nameTable[e];t;){var n=t.name_next;i.includes(t.mount)&&W.destroyNode(t),t=n}}),n.mounted=null;var a=n.mount.mounts.indexOf(r);n.mount.mounts.splice(a,1)},lookup(e,t){return e.node_ops.lookup(e,t)},mknod(e,t,n){var r=W.lookupPath(e,{parent:!0}).node,i=H.basename(e);if(!i||i===`.`||i===`..`)throw new W.ErrnoError(28);var a=W.mayCreate(r,i);if(a)throw new W.ErrnoError(a);if(!r.node_ops.mknod)throw new W.ErrnoError(63);return r.node_ops.mknod(r,i,t,n)},create(e,t){return t=t===void 0?438:t,t&=4095,t|=32768,W.mknod(e,t,0)},mkdir(e,t){return t=t===void 0?511:t,t&=1023,t|=16384,W.mknod(e,t,0)},mkdirTree(e,t){for(var n=e.split(`/`),r=``,i=0;i<n.length;++i)if(n[i]){r+=`/`+n[i];try{W.mkdir(r,t)}catch(e){if(e.errno!=20)throw e}}},mkdev(e,t,n){return n===void 0&&(n=t,t=438),t|=8192,W.mknod(e,t,n)},symlink(e,t){if(!we.resolve(e))throw new W.ErrnoError(44);var n=W.lookupPath(t,{parent:!0}).node;if(!n)throw new W.ErrnoError(44);var r=H.basename(t),i=W.mayCreate(n,r);if(i)throw new W.ErrnoError(i);if(!n.node_ops.symlink)throw new W.ErrnoError(63);return n.node_ops.symlink(n,r,e)},rename(e,t){var n=H.dirname(e),r=H.dirname(t),i=H.basename(e),a=H.basename(t),o=W.lookupPath(e,{parent:!0}),s=o.node,c;if(o=W.lookupPath(t,{parent:!0}),c=o.node,!s||!c)throw new W.ErrnoError(44);if(s.mount!==c.mount)throw new W.ErrnoError(75);var l=W.lookupNode(s,i),u=we.relative(e,r);if(u.charAt(0)!==`.`)throw new W.ErrnoError(28);if(u=we.relative(t,n),u.charAt(0)!==`.`)throw new W.ErrnoError(55);var d;try{d=W.lookupNode(c,a)}catch{}if(l!==d){var f=W.isDir(l.mode),p=W.mayDelete(s,i,f);if(p||(p=d?W.mayDelete(c,a,f):W.mayCreate(c,a),p))throw new W.ErrnoError(p);if(!s.node_ops.rename)throw new W.ErrnoError(63);if(W.isMountpoint(l)||d&&W.isMountpoint(d))throw new W.ErrnoError(10);if(c!==s&&(p=W.nodePermissions(s,`w`),p))throw new W.ErrnoError(p);W.hashRemoveNode(l);try{s.node_ops.rename(l,c,a)}catch(e){throw e}finally{W.hashAddNode(l)}}},rmdir(e){var t=W.lookupPath(e,{parent:!0}).node,n=H.basename(e),r=W.lookupNode(t,n),i=W.mayDelete(t,n,!0);if(i)throw new W.ErrnoError(i);if(!t.node_ops.rmdir)throw new W.ErrnoError(63);if(W.isMountpoint(r))throw new W.ErrnoError(10);t.node_ops.rmdir(t,n),W.destroyNode(r)},readdir(e){var t=W.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new W.ErrnoError(54);return t.node_ops.readdir(t)},unlink(e){var t=W.lookupPath(e,{parent:!0}).node;if(!t)throw new W.ErrnoError(44);var n=H.basename(e),r=W.lookupNode(t,n),i=W.mayDelete(t,n,!1);if(i)throw new W.ErrnoError(i);if(!t.node_ops.unlink)throw new W.ErrnoError(63);if(W.isMountpoint(r))throw new W.ErrnoError(10);t.node_ops.unlink(t,n),W.destroyNode(r)},readlink(e){var t=W.lookupPath(e).node;if(!t)throw new W.ErrnoError(44);if(!t.node_ops.readlink)throw new W.ErrnoError(28);return we.resolve(W.getPath(t.parent),t.node_ops.readlink(t))},stat(e,t){var n=W.lookupPath(e,{follow:!t}).node;if(!n)throw new W.ErrnoError(44);if(!n.node_ops.getattr)throw new W.ErrnoError(63);return n.node_ops.getattr(n)},lstat(e){return W.stat(e,!0)},chmod(e,t,n){var r=typeof e==`string`?W.lookupPath(e,{follow:!n}).node:e;if(!r.node_ops.setattr)throw new W.ErrnoError(63);r.node_ops.setattr(r,{mode:t&4095|r.mode&-4096,timestamp:Date.now()})},lchmod(e,t){W.chmod(e,t,!0)},fchmod(e,t){var n=W.getStreamChecked(e);W.chmod(n.node,t)},chown(e,t,n,r){var i=typeof e==`string`?W.lookupPath(e,{follow:!r}).node:e;if(!i.node_ops.setattr)throw new W.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown(e,t,n){W.chown(e,t,n,!0)},fchown(e,t,n){var r=W.getStreamChecked(e);W.chown(r.node,t,n)},truncate(e,t){if(t<0)throw new W.ErrnoError(28);var n=typeof e==`string`?W.lookupPath(e,{follow:!0}).node:e;if(!n.node_ops.setattr)throw new W.ErrnoError(63);if(W.isDir(n.mode))throw new W.ErrnoError(31);if(!W.isFile(n.mode))throw new W.ErrnoError(28);var r=W.nodePermissions(n,`w`);if(r)throw new W.ErrnoError(r);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate(e,t){var n=W.getStreamChecked(e);if(!(n.flags&2097155))throw new W.ErrnoError(28);W.truncate(n.node,t)},utime(e,t,n){var r=W.lookupPath(e,{follow:!0}).node;r.node_ops.setattr(r,{timestamp:Math.max(t,n)})},open(e,t,r){if(e===``)throw new W.ErrnoError(44);t=typeof t==`string`?ze(t):t,r=r===void 0?438:r,r=t&64?r&4095|32768:0;var i;if(typeof e==`object`)i=e;else{e=H.normalize(e);try{i=W.lookupPath(e,{follow:!(t&131072)}).node}catch{}}var a=!1;if(t&64)if(i){if(t&128)throw new W.ErrnoError(20)}else i=W.mknod(e,r,0),a=!0;if(!i)throw new W.ErrnoError(44);if(W.isChrdev(i.mode)&&(t&=-513),t&65536&&!W.isDir(i.mode))throw new W.ErrnoError(54);if(!a){var o=W.mayOpen(i,t);if(o)throw new W.ErrnoError(o)}t&512&&!a&&W.truncate(i,0),t&=-131713;var s=W.createStream({node:i,path:W.getPath(i),flags:t,seekable:!0,position:0,stream_ops:i.stream_ops,ungotten:[],error:!1});return s.stream_ops.open&&s.stream_ops.open(s),n.logReadFiles&&!(t&1)&&(W.readFiles||={},e in W.readFiles||(W.readFiles[e]=1)),s},close(e){if(W.isClosed(e))throw new W.ErrnoError(8);e.getdents&&=null;try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{W.closeStream(e.fd)}e.fd=null},isClosed(e){return e.fd===null},llseek(e,t,n){if(W.isClosed(e))throw new W.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new W.ErrnoError(70);if(n!=0&&n!=1&&n!=2)throw new W.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read(e,t,n,r,i){if(r<0||i<0)throw new W.ErrnoError(28);if(W.isClosed(e)||(e.flags&2097155)==1)throw new W.ErrnoError(8);if(W.isDir(e.node.mode))throw new W.ErrnoError(31);if(!e.stream_ops.read)throw new W.ErrnoError(28);var a=i!==void 0;if(!a)i=e.position;else if(!e.seekable)throw new W.ErrnoError(70);var o=e.stream_ops.read(e,t,n,r,i);return a||(e.position+=o),o},write(e,t,n,r,i,a){if(r<0||i<0)throw new W.ErrnoError(28);if(W.isClosed(e)||!(e.flags&2097155))throw new W.ErrnoError(8);if(W.isDir(e.node.mode))throw new W.ErrnoError(31);if(!e.stream_ops.write)throw new W.ErrnoError(28);e.seekable&&e.flags&1024&&W.llseek(e,0,2);var o=i!==void 0;if(!o)i=e.position;else if(!e.seekable)throw new W.ErrnoError(70);var s=e.stream_ops.write(e,t,n,r,i,a);return o||(e.position+=s),s},allocate(e,t,n){if(W.isClosed(e))throw new W.ErrnoError(8);if(t<0||n<=0)throw new W.ErrnoError(28);if(!(e.flags&2097155))throw new W.ErrnoError(8);if(!W.isFile(e.node.mode)&&!W.isDir(e.node.mode))throw new W.ErrnoError(43);if(!e.stream_ops.allocate)throw new W.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap(e,t,n,r,i){if(r&2&&!(i&2)&&(e.flags&2097155)!=2||(e.flags&2097155)==1)throw new W.ErrnoError(2);if(!e.stream_ops.mmap)throw new W.ErrnoError(43);return e.stream_ops.mmap(e,t,n,r,i)},msync(e,t,n,r,i){return e.stream_ops.msync?e.stream_ops.msync(e,t,n,r,i):0},munmap:e=>0,ioctl(e,t,n){if(!e.stream_ops.ioctl)throw new W.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile(e,t={}){if(t.flags=t.flags||0,t.encoding=t.encoding||`binary`,t.encoding!==`utf8`&&t.encoding!==`binary`)throw Error(`Invalid encoding type "${t.encoding}"`);var n,r=W.open(e,t.flags),i=W.stat(e).size,a=new Uint8Array(i);return W.read(r,a,0,i,0),t.encoding===`utf8`?n=Ee(a,0):t.encoding===`binary`&&(n=a),W.close(r),n},writeFile(e,t,n={}){n.flags=n.flags||577;var r=W.open(e,n.flags,n.mode);if(typeof t==`string`){var i=new Uint8Array(Oe(t)+1),a=ke(t,i,0,i.length);W.write(r,i,0,a,void 0,n.canOwn)}else if(ArrayBuffer.isView(t))W.write(r,t,0,t.byteLength,void 0,n.canOwn);else throw Error(`Unsupported data type`);W.close(r)},cwd:()=>W.currentPath,chdir(e){var t=W.lookupPath(e,{follow:!0});if(t.node===null)throw new W.ErrnoError(44);if(!W.isDir(t.node.mode))throw new W.ErrnoError(54);var n=W.nodePermissions(t.node,`x`);if(n)throw new W.ErrnoError(n);W.currentPath=t.path},createDefaultDirectories(){W.mkdir(`/tmp`),W.mkdir(`/home`),W.mkdir(`/home/web_user`)},createDefaultDevices(){W.mkdir(`/dev`),W.registerDevice(W.makedev(1,3),{read:()=>0,write:(e,t,n,r,i)=>r}),W.mkdev(`/dev/null`,W.makedev(1,3)),Me.register(W.makedev(5,0),Me.default_tty_ops),Me.register(W.makedev(6,0),Me.default_tty1_ops),W.mkdev(`/dev/tty`,W.makedev(5,0)),W.mkdev(`/dev/tty1`,W.makedev(6,0));var e=new Uint8Array(1024),t=0,n=()=>(t===0&&(t=Ce(e).byteLength),e[--t]);W.createDevice(`/dev`,`random`,n),W.createDevice(`/dev`,`urandom`,n),W.mkdir(`/dev/shm`),W.mkdir(`/dev/shm/tmp`)},createSpecialDirectories(){W.mkdir(`/proc`);var e=W.mkdir(`/proc/self`);W.mkdir(`/proc/self/fd`),W.mount({mount(){var t=W.createNode(e,`fd`,16895,73);return t.node_ops={lookup(e,t){var n=+t,r=W.getStreamChecked(n),i={parent:null,mount:{mountpoint:`fake`},node_ops:{readlink:()=>r.path}};return i.parent=i,i}},t}},{},`/proc/self/fd`)},createStandardStreams(){n.stdin?W.createDevice(`/dev`,`stdin`,n.stdin):W.symlink(`/dev/tty`,`/dev/stdin`),n.stdout?W.createDevice(`/dev`,`stdout`,null,n.stdout):W.symlink(`/dev/tty`,`/dev/stdout`),n.stderr?W.createDevice(`/dev`,`stderr`,null,n.stderr):W.symlink(`/dev/tty1`,`/dev/stderr`),W.open(`/dev/stdin`,0),W.open(`/dev/stdout`,1),W.open(`/dev/stderr`,1)},staticInit(){[44].forEach(e=>{W.genericErrors[e]=new W.ErrnoError(e),W.genericErrors[e].stack=`<generic error, no stack>`}),W.nameTable=Array(4096),W.mount(U,{},`/`),W.createDefaultDirectories(),W.createDefaultDevices(),W.createSpecialDirectories(),W.filesystems={MEMFS:U}},init(e,t,r){W.init.initialized=!0,n.stdin=e||n.stdin,n.stdout=t||n.stdout,n.stderr=r||n.stderr,W.createStandardStreams()},quit(){W.init.initialized=!1;for(var e=0;e<W.streams.length;e++){var t=W.streams[e];t&&W.close(t)}},findObject(e,t){var n=W.analyzePath(e,t);return n.exists?n.object:null},analyzePath(e,t){try{var n=W.lookupPath(e,{follow:!t});e=n.path}catch{}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=W.lookupPath(e,{parent:!0});r.parentExists=!0,r.parentPath=n.path,r.parentObject=n.node,r.name=H.basename(e),n=W.lookupPath(e,{follow:!t}),r.exists=!0,r.path=n.path,r.object=n.node,r.name=n.node.name,r.isRoot=n.path===`/`}catch(e){r.error=e.errno}return r},createPath(e,t,n,r){e=typeof e==`string`?e:W.getPath(e);for(var i=t.split(`/`).reverse();i.length;){var a=i.pop();if(a){var o=H.join2(e,a);try{W.mkdir(o)}catch{}e=o}}return o},createFile(e,t,n,r,i){var a=H.join2(typeof e==`string`?e:W.getPath(e),t),o=Be(r,i);return W.create(a,o)},createDataFile(e,t,n,r,i,a){var o=t;e&&(e=typeof e==`string`?e:W.getPath(e),o=t?H.join2(e,t):e);var s=Be(r,i),c=W.create(o,s);if(n){if(typeof n==`string`){for(var l=Array(n.length),u=0,d=n.length;u<d;++u)l[u]=n.charCodeAt(u);n=l}W.chmod(c,s|146);var f=W.open(c,577);W.write(f,n,0,n.length,0,a),W.close(f),W.chmod(c,s)}},createDevice(e,t,n,r){var i=H.join2(typeof e==`string`?e:W.getPath(e),t),a=Be(!!n,!!r);W.createDevice.major||(W.createDevice.major=64);var o=W.makedev(W.createDevice.major++,0);return W.registerDevice(o,{open(e){e.seekable=!1},close(e){r?.buffer?.length&&r(10)},read(e,t,r,i,a){for(var o=0,s=0;s<i;s++){var c;try{c=n()}catch{throw new W.ErrnoError(29)}if(c===void 0&&o===0)throw new W.ErrnoError(6);if(c==null)break;o++,t[r+s]=c}return o&&(e.node.timestamp=Date.now()),o},write(e,t,n,i,a){for(var o=0;o<i;o++)try{r(t[n+o])}catch{throw new W.ErrnoError(29)}return i&&(e.node.timestamp=Date.now()),o}}),W.mkdev(i,a,o)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest<`u`)throw Error(`Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.`);if(f)try{e.contents=Ae(f(e.url),!0),e.usedBytes=e.contents.length}catch{throw new W.ErrnoError(29)}else throw Error(`Cannot load without read() or XMLHttpRequest.`)},createLazyFile(e,t,n,r,i){function a(){this.lengthKnown=!1,this.chunks=[]}if(a.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,n=e/this.chunkSize|0;return this.getter(n)[t]}},a.prototype.setDataGetter=function(e){this.getter=e},a.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open(`HEAD`,n,!1),e.send(null),!(e.status>=200&&e.status<300||e.status===304))throw Error(`Couldn't load `+n+`. Status: `+e.status);var t=Number(e.getResponseHeader(`Content-length`)),r,i=(r=e.getResponseHeader(`Accept-Ranges`))&&r===`bytes`,a=(r=e.getResponseHeader(`Content-Encoding`))&&r===`gzip`,o=1024*1024;i||(o=t);var s=(e,r)=>{if(e>r)throw Error(`invalid range (`+e+`, `+r+`) or no bytes requested!`);if(r>t-1)throw Error(`only `+t+` bytes available! programmer error!`);var i=new XMLHttpRequest;if(i.open(`GET`,n,!1),t!==o&&i.setRequestHeader(`Range`,`bytes=`+e+`-`+r),i.responseType=`arraybuffer`,i.overrideMimeType&&i.overrideMimeType(`text/plain; charset=x-user-defined`),i.send(null),!(i.status>=200&&i.status<300||i.status===304))throw Error(`Couldn't load `+n+`. Status: `+i.status);return i.response===void 0?Ae(i.responseText||``,!0):new Uint8Array(i.response||[])},c=this;c.setDataGetter(e=>{var n=e*o,r=(e+1)*o-1;if(r=Math.min(r,t-1),c.chunks[e]===void 0&&(c.chunks[e]=s(n,r)),c.chunks[e]===void 0)throw Error(`doXHR failed!`);return c.chunks[e]}),(a||!t)&&(o=t=1,t=this.getter(0).length,o=t,h(`LazyFiles on gzip forces download of the whole file when length is accessed`)),this._length=t,this._chunkSize=o,this.lengthKnown=!0},typeof XMLHttpRequest<`u`){if(!l)throw`Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc`;var o=new a;Object.defineProperties(o,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var s={isDevice:!1,contents:o}}else var s={isDevice:!1,url:n};var c=W.createFile(e,t,s,r,i);s.contents?c.contents=s.contents:s.url&&(c.contents=null,c.url=s.url),Object.defineProperties(c,{usedBytes:{get:function(){return this.contents.length}}});var u={};Object.keys(c.stream_ops).forEach(e=>{var t=c.stream_ops[e];u[e]=function(){return W.forceLoadFile(c),t.apply(null,arguments)}});function d(e,t,n,r,i){var a=e.node.contents;if(i>=a.length)return 0;var o=Math.min(a.length-i,r);if(a.slice)for(var s=0;s<o;s++)t[n+s]=a[i+s];else for(var s=0;s<o;s++)t[n+s]=a.get(i+s);return o}return u.read=(e,t,n,r,i)=>(W.forceLoadFile(c),d(e,t,n,r,i)),u.mmap=(e,t,n,r,i)=>{W.forceLoadFile(c);var a=Ne(t);if(!a)throw new W.ErrnoError(48);return d(e,S,a,t,n),{ptr:a,allocated:!0}},c.stream_ops=u,c}},G=(e,t)=>e?Ee(C,e,t):``,K={DEFAULT_POLLMASK:5,calculateAt(e,t,n){if(H.isAbs(t))return t;var r=e===-100?W.cwd():K.getStreamFromFD(e).path;if(t.length==0){if(!n)throw new W.ErrnoError(44);return r}return H.join2(r,t)},doStat(e,t,n){var r=e(t);E[n>>2]=r.dev,E[n+4>>2]=r.mode,D[n+8>>2]=r.nlink,E[n+12>>2]=r.uid,E[n+16>>2]=r.gid,E[n+20>>2]=r.rdev,R=[r.size>>>0,(L=r.size,+Math.abs(L)>=1?L>0?Math.floor(L/4294967296)>>>0:~~+Math.ceil((L-+(~~L>>>0))/4294967296)>>>0:0)],E[n+24>>2]=R[0],E[n+28>>2]=R[1],E[n+32>>2]=4096,E[n+36>>2]=r.blocks;var i=r.atime.getTime(),a=r.mtime.getTime(),o=r.ctime.getTime();return R=[Math.floor(i/1e3)>>>0,(L=Math.floor(i/1e3),+Math.abs(L)>=1?L>0?Math.floor(L/4294967296)>>>0:~~+Math.ceil((L-+(~~L>>>0))/4294967296)>>>0:0)],E[n+40>>2]=R[0],E[n+44>>2]=R[1],D[n+48>>2]=i%1e3*1e3,R=[Math.floor(a/1e3)>>>0,(L=Math.floor(a/1e3),+Math.abs(L)>=1?L>0?Math.floor(L/4294967296)>>>0:~~+Math.ceil((L-+(~~L>>>0))/4294967296)>>>0:0)],E[n+56>>2]=R[0],E[n+60>>2]=R[1],D[n+64>>2]=a%1e3*1e3,R=[Math.floor(o/1e3)>>>0,(L=Math.floor(o/1e3),+Math.abs(L)>=1?L>0?Math.floor(L/4294967296)>>>0:~~+Math.ceil((L-+(~~L>>>0))/4294967296)>>>0:0)],E[n+72>>2]=R[0],E[n+76>>2]=R[1],D[n+80>>2]=o%1e3*1e3,R=[r.ino>>>0,(L=r.ino,+Math.abs(L)>=1?L>0?Math.floor(L/4294967296)>>>0:~~+Math.ceil((L-+(~~L>>>0))/4294967296)>>>0:0)],E[n+88>>2]=R[0],E[n+92>>2]=R[1],0},doMsync(e,t,n,r,i){if(!W.isFile(t.node.mode))throw new W.ErrnoError(43);if(r&2)return 0;var a=C.slice(e,e+n);W.msync(t,a,i,n,r)},varargs:void 0,get(){var e=E[K.varargs>>2];return K.varargs+=4,e},getp(){return K.get()},getStr(e){return G(e)},getStreamFromFD(e){return W.getStreamChecked(e)}};function Ve(e,t,n){K.varargs=n;try{var r=K.getStreamFromFD(e);switch(t){case 0:var i=K.get();if(i<0)return-28;for(;W.streams[i];)i++;return W.createStream(r,i).fd;case 1:case 2:return 0;case 3:return r.flags;case 4:var i=K.get();return r.flags|=i,0;case 12:var i=K.getp(),a=0;return w[i+a>>1]=2,0;case 13:case 14:return 0}return-28}catch(e){if(W===void 0||e.name!==`ErrnoError`)throw e;return-e.errno}}var q=(e,t,n)=>ke(e,C,t,n);function He(e,t,n){try{var r=K.getStreamFromFD(e);r.getdents||=W.readdir(r.path);for(var i=280,a=0,o=W.llseek(r,0,1),s=Math.floor(o/i);s<r.getdents.length&&a+i<=n;){var c,l,u=r.getdents[s];if(u===`.`)c=r.node.id,l=4;else if(u===`..`)c=W.lookupPath(r.path,{parent:!0}).node.id,l=4;else{var d=W.lookupNode(r.node,u);c=d.id,l=W.isChrdev(d.mode)?2:W.isDir(d.mode)?4:W.isLink(d.mode)?10:8}R=[c>>>0,(L=c,+Math.abs(L)>=1?L>0?Math.floor(L/4294967296)>>>0:~~+Math.ceil((L-+(~~L>>>0))/4294967296)>>>0:0)],E[t+a>>2]=R[0],E[t+a+4>>2]=R[1],R=[(s+1)*i>>>0,(L=(s+1)*i,+Math.abs(L)>=1?L>0?Math.floor(L/4294967296)>>>0:~~+Math.ceil((L-+(~~L>>>0))/4294967296)>>>0:0)],E[t+a+8>>2]=R[0],E[t+a+12>>2]=R[1],w[t+a+16>>1]=280,S[t+a+18>>0]=l,q(u,t+a+19,256),a+=i,s+=1}return W.llseek(r,s*i,0),a}catch(e){if(W===void 0||e.name!==`ErrnoError`)throw e;return-e.errno}}function Ue(e,t,n){K.varargs=n;try{var r=K.getStreamFromFD(e);switch(t){case 21509:return r.tty?0:-59;case 21505:if(!r.tty)return-59;if(r.tty.ops.ioctl_tcgets){var i=r.tty.ops.ioctl_tcgets(r),a=K.getp();E[a>>2]=i.c_iflag||0,E[a+4>>2]=i.c_oflag||0,E[a+8>>2]=i.c_cflag||0,E[a+12>>2]=i.c_lflag||0;for(var o=0;o<32;o++)S[a+o+17>>0]=i.c_cc[o]||0;return 0}return 0;case 21510:case 21511:case 21512:return r.tty?0:-59;case 21506:case 21507:case 21508:if(!r.tty)return-59;if(r.tty.ops.ioctl_tcsets){for(var a=K.getp(),s=E[a>>2],c=E[a+4>>2],l=E[a+8>>2],u=E[a+12>>2],d=[],o=0;o<32;o++)d.push(S[a+o+17>>0]);return r.tty.ops.ioctl_tcsets(r.tty,t,{c_iflag:s,c_oflag:c,c_cflag:l,c_lflag:u,c_cc:d})}return 0;case 21519:if(!r.tty)return-59;var a=K.getp();return E[a>>2]=0,0;case 21520:return r.tty?-28:-59;case 21531:var a=K.getp();return W.ioctl(r,t,a);case 21523:if(!r.tty)return-59;if(r.tty.ops.ioctl_tiocgwinsz){var f=r.tty.ops.ioctl_tiocgwinsz(r.tty),a=K.getp();w[a>>1]=f[0],w[a+2>>1]=f[1]}return 0;case 21524:return r.tty?0:-59;case 21515:return r.tty?0:-59;default:return-28}}catch(e){if(W===void 0||e.name!==`ErrnoError`)throw e;return-e.errno}}function We(e,t,n,r){K.varargs=r;try{t=K.getStr(t),t=K.calculateAt(e,t);var i=r?K.get():0;return W.open(t,n,i).fd}catch(e){if(W===void 0||e.name!==`ErrnoError`)throw e;return-e.errno}}function Ge(e,t,n,r){try{if(t=K.getStr(t),t=K.calculateAt(e,t),r<=0)return-28;var i=W.readlink(t),a=Math.min(r,Oe(i)),o=S[n+a];return q(i,n,r+1),S[n+a]=o,a}catch(e){if(W===void 0||e.name!==`ErrnoError`)throw e;return-e.errno}}function Ke(e,t){try{return e=K.getStr(e),K.doStat(W.stat,e,t)}catch(e){if(W===void 0||e.name!==`ErrnoError`)throw e;return-e.errno}}function qe(e,t){try{return e=K.getStr(e),t=K.getStr(t),W.symlink(e,t),0}catch(e){if(W===void 0||e.name!==`ErrnoError`)throw e;return-e.errno}}function Je(e,t,n){try{return t=K.getStr(t),t=K.calculateAt(e,t),n===0?W.unlink(t):n===512?W.rmdir(t):P(`Invalid flags passed to unlinkat`),0}catch(e){if(W===void 0||e.name!==`ErrnoError`)throw e;return-e.errno}}function Ye(e){if(Z.xhrs.has(e)){var t=Z.xhrs.get(e);Z.xhrs.free(e),t.readyState>0&&t.readyState<4&&t.abort()}}var Xe=1,Ze=()=>Xe,Qe=(e,t)=>t+2097152>>>0<4194305-!!e?(e>>>0)+t*4294967296:NaN;function $e(e,t,n){var r=Qe(e,t),i=new Date(r*1e3);E[n>>2]=i.getUTCSeconds(),E[n+4>>2]=i.getUTCMinutes(),E[n+8>>2]=i.getUTCHours(),E[n+12>>2]=i.getUTCDate(),E[n+16>>2]=i.getUTCMonth(),E[n+20>>2]=i.getUTCFullYear()-1900,E[n+24>>2]=i.getUTCDay();var a=Date.UTC(i.getUTCFullYear(),0,1,0,0,0,0),o=(i.getTime()-a)/(1e3*60*60*24)|0;E[n+28>>2]=o}var et=e=>e%4==0&&(e%100!=0||e%400==0),tt=[0,31,60,91,121,152,182,213,244,274,305,335],nt=[0,31,59,90,120,151,181,212,243,273,304,334],rt=e=>(et(e.getFullYear())?tt:nt)[e.getMonth()]+e.getDate()-1;function it(e,t,n){var r=Qe(e,t),i=new Date(r*1e3);E[n>>2]=i.getSeconds(),E[n+4>>2]=i.getMinutes(),E[n+8>>2]=i.getHours(),E[n+12>>2]=i.getDate(),E[n+16>>2]=i.getMonth(),E[n+20>>2]=i.getFullYear()-1900,E[n+24>>2]=i.getDay();var a=rt(i)|0;E[n+28>>2]=a,E[n+36>>2]=-(i.getTimezoneOffset()*60);var o=new Date(i.getFullYear(),0,1),s=new Date(i.getFullYear(),6,1).getTimezoneOffset(),c=o.getTimezoneOffset(),l=(s!=c&&i.getTimezoneOffset()==Math.min(c,s))|0;E[n+32>>2]=l}var at=e=>{var t=Oe(e)+1,n=kn(t);return n&&q(e,n,t),n},ot=(e,t,n)=>{var r=new Date().getFullYear(),i=new Date(r,0,1),a=new Date(r,6,1),o=i.getTimezoneOffset(),s=a.getTimezoneOffset(),c=Math.max(o,s);D[e>>2]=c*60,E[t>>2]=Number(o!=s);function l(e){var t=e.toTimeString().match(/\(([A-Za-z ]+)\)$/);return t?t[1]:`GMT`}var u=l(i),d=l(a),f=at(u),p=at(d);s<o?(D[n>>2]=f,D[n+4>>2]=p):(D[n>>2]=p,D[n+4>>2]=f)},st=()=>{P(``)},ct=e=>{if(e instanceof _e||e==`unwind`)return b;s(1,e)},lt=0,ut=()=>be||lt>0,dt=e=>{b=e,ut()||(n.onExit?.(e),y=!0),s(e,new _e(e))},ft=(e,t)=>{b=e,dt(e)},pt=()=>{if(!ut())try{ft(b)}catch(e){ct(e)}},mt=e=>{if(!y)try{e(),pt()}catch(e){ct(e)}},ht=(e,t)=>setTimeout(()=>{mt(e)},t),gt=(e,t)=>{if(J.mainLoop.timingMode=e,J.mainLoop.timingValue=t,!J.mainLoop.func)return 1;if(J.mainLoop.running||(J.mainLoop.running=!0),e==0)J.mainLoop.scheduler=function(){var e=Math.max(0,J.mainLoop.tickStartTime+t-_t())|0;setTimeout(J.mainLoop.runner,e)},J.mainLoop.method=`timeout`;else if(e==1)J.mainLoop.scheduler=function(){J.requestAnimationFrame(J.mainLoop.runner)},J.mainLoop.method=`rAF`;else if(e==2){if(J.setImmediate===void 0)if(typeof setImmediate>`u`){var r=[],i=`setimmediate`;addEventListener(`message`,e=>{(e.data===i||e.data.target===i)&&(e.stopPropagation(),r.shift()())},!0),J.setImmediate=function(e){r.push(e),l?(n.setImmediates===void 0&&(n.setImmediates=[]),n.setImmediates.push(e),postMessage({target:i})):postMessage(i,`*`)}}else J.setImmediate=setImmediate;J.mainLoop.scheduler=function(){J.setImmediate(J.mainLoop.runner)},J.mainLoop.method=`immediate`}return 0},_t=()=>performance.now(),vt=(e,t,n,r,i)=>{x(!J.mainLoop.func,`emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters.`),J.mainLoop.func=e,J.mainLoop.arg=r;var a=J.mainLoop.currentlyRunningMainloop;function o(){return!(a<J.mainLoop.currentlyRunningMainloop)}if(J.mainLoop.running=!1,J.mainLoop.runner=function(){if(!y){if(J.mainLoop.queue.length>0){var t=J.mainLoop.queue.shift();if(t.func(t.arg),J.mainLoop.remainingBlockers){var n=J.mainLoop.remainingBlockers,r=n%1==0?n-1:Math.floor(n);t.counted?J.mainLoop.remainingBlockers=r:(r+=.5,J.mainLoop.remainingBlockers=(8*n+r)/9)}if(J.mainLoop.updateStatus(),!o())return;setTimeout(J.mainLoop.runner,0);return}if(o()){if(J.mainLoop.currentFrameNumber=J.mainLoop.currentFrameNumber+1|0,J.mainLoop.timingMode==1&&J.mainLoop.timingValue>1&&J.mainLoop.currentFrameNumber%J.mainLoop.timingValue!=0){J.mainLoop.scheduler();return}else J.mainLoop.timingMode==0&&(J.mainLoop.tickStartTime=_t());J.mainLoop.runIter(e),o()&&(typeof SDL==`object`&&SDL.audio?.queueNewAudioData?.(),J.mainLoop.scheduler())}}},i||(t&&t>0?gt(0,1e3/t):gt(1,1),J.mainLoop.scheduler()),n)throw`unwind`},yt=e=>{yt.shown||={},yt.shown[e]||(yt.shown[e]=1,g(e))},J={mainLoop:{running:!1,scheduler:null,method:``,currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause(){J.mainLoop.scheduler=null,J.mainLoop.currentlyRunningMainloop++},resume(){J.mainLoop.currentlyRunningMainloop++;var e=J.mainLoop.timingMode,t=J.mainLoop.timingValue,n=J.mainLoop.func;J.mainLoop.func=null,vt(n,0,!1,J.mainLoop.arg,!0),gt(e,t),J.mainLoop.scheduler()},updateStatus(){if(n.setStatus){var e=n.statusMessage||`Please wait...`,t=J.mainLoop.remainingBlockers,r=J.mainLoop.expectedBlockers;t?t<r?n.setStatus(e+` (`+(r-t)+`/`+r+`)`):n.setStatus(e):n.setStatus(``)}},runIter(e){y||n.preMainLoop&&n.preMainLoop()===!1||(mt(e),n.postMainLoop?.())}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init(){if(J.initted)return;J.initted=!0;var e={};e.canHandle=function(e){return!n.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(e)},e.handle=function(e,t,n,r){var i=new Blob([e],{type:J.getMimetype(t)});i.size!==e.length&&(i=new Blob([new Uint8Array(e).buffer],{type:J.getMimetype(t)}));var a=URL.createObjectURL(i),o=new Image;o.onload=()=>{x(o.complete,`Image ${t} could not be decoded`);var r=document.createElement(`canvas`);r.width=o.width,r.height=o.height,r.getContext(`2d`).drawImage(o,0,0),wn[t]=r,URL.revokeObjectURL(a),n?.(e)},o.onerror=e=>{g(`Image ${a} could not be decoded`),r?.()},o.src=a},Ie.push(e);var t={};t.canHandle=function(e){return!n.noAudioDecoding&&e.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},t.handle=function(e,t,n,r){var i=!1;function a(r){i||(i=!0,Tn[t]=r,n?.(e))}var o=new Blob([e],{type:J.getMimetype(t)}),s=URL.createObjectURL(o),c=new Audio;c.addEventListener(`canplaythrough`,()=>a(c),!1),c.onerror=function(n){if(i)return;g(`warning: browser could not fully decode audio ${t}, trying slower base64 approach`);function r(e){for(var t=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`,n=`=`,r=``,i=0,a=0,o=0;o<e.length;o++)for(i=i<<8|e[o],a+=8;a>=6;){var s=i>>a-6&63;a-=6,r+=t[s]}return a==2?(r+=t[(i&3)<<4],r+=n+n):a==4&&(r+=t[(i&15)<<2],r+=n),r}c.src=`data:audio/x-`+t.substr(-3)+`;base64,`+r(e),a(c)},c.src=s,ht(()=>{a(c)},1e4)},Ie.push(t);function r(){J.pointerLock=document.pointerLockElement===n.canvas||document.mozPointerLockElement===n.canvas||document.webkitPointerLockElement===n.canvas||document.msPointerLockElement===n.canvas}var i=n.canvas;i&&(i.requestPointerLock=i.requestPointerLock||i.mozRequestPointerLock||i.webkitRequestPointerLock||i.msRequestPointerLock||(()=>{}),i.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||(()=>{}),i.exitPointerLock=i.exitPointerLock.bind(document),document.addEventListener(`pointerlockchange`,r,!1),document.addEventListener(`mozpointerlockchange`,r,!1),document.addEventListener(`webkitpointerlockchange`,r,!1),document.addEventListener(`mspointerlockchange`,r,!1),n.elementPointerLock&&i.addEventListener(`click`,e=>{!J.pointerLock&&n.canvas.requestPointerLock&&(n.canvas.requestPointerLock(),e.preventDefault())},!1))},createContext(e,t,r,i){if(t&&n.ctx&&e==n.canvas)return n.ctx;var a,o;if(t){var s={antialias:!1,alpha:!1,majorVersion:1};if(i)for(var c in i)s[c]=i[c];Q!==void 0&&(o=Q.createContext(e,s),o&&(a=Q.getContext(o).GLctx))}else a=e.getContext(`2d`);return a?(r&&(t||x(En===void 0,`cannot set in module if GLctx is used, but we are a non-GL context that would replace it`),n.ctx=a,t&&Q.makeContextCurrent(o),n.useWebGL=t,J.moduleContextCreatedCallbacks.forEach(e=>e()),J.init()),a):null},destroyContext(e,t,n){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen(e,t){J.lockPointer=e,J.resizeCanvas=t,J.lockPointer===void 0&&(J.lockPointer=!0),J.resizeCanvas===void 0&&(J.resizeCanvas=!1);var r=n.canvas;function i(){J.isFullscreen=!1;var e=r.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===e?(r.exitFullscreen=J.exitFullscreen,J.lockPointer&&r.requestPointerLock(),J.isFullscreen=!0,J.resizeCanvas?J.setFullscreenCanvasSize():J.updateCanvasDimensions(r)):(e.parentNode.insertBefore(r,e),e.parentNode.removeChild(e),J.resizeCanvas?J.setWindowedCanvasSize():J.updateCanvasDimensions(r)),n.onFullScreen?.(J.isFullscreen),n.onFullscreen?.(J.isFullscreen)}J.fullscreenHandlersInstalled||(J.fullscreenHandlersInstalled=!0,document.addEventListener(`fullscreenchange`,i,!1),document.addEventListener(`mozfullscreenchange`,i,!1),document.addEventListener(`webkitfullscreenchange`,i,!1),document.addEventListener(`MSFullscreenChange`,i,!1));var a=document.createElement(`div`);r.parentNode.insertBefore(a,r),a.appendChild(r),a.requestFullscreen=a.requestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen||(a.webkitRequestFullscreen?()=>a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):null)||(a.webkitRequestFullScreen?()=>a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):null),a.requestFullscreen()},exitFullscreen(){return J.isFullscreen?((document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||(()=>{})).apply(document,[]),!0):!1},nextRAF:0,fakeRequestAnimationFrame(e){var t=Date.now();if(J.nextRAF===0)J.nextRAF=t+1e3/60;else for(;t+2>=J.nextRAF;)J.nextRAF+=1e3/60;var n=Math.max(J.nextRAF-t,0);setTimeout(e,n)},requestAnimationFrame(e){if(typeof requestAnimationFrame==`function`){requestAnimationFrame(e);return}var t=J.fakeRequestAnimationFrame;t(e)},safeSetTimeout(e,t){return ht(e,t)},safeRequestAnimationFrame(e){return J.requestAnimationFrame(()=>{mt(e)})},getMimetype(e){return{jpg:`image/jpeg`,jpeg:`image/jpeg`,png:`image/png`,bmp:`image/bmp`,ogg:`audio/ogg`,wav:`audio/wav`,mp3:`audio/mpeg`}[e.substr(e.lastIndexOf(`.`)+1)]},getUserMedia(e){window.getUserMedia||=navigator.getUserMedia||navigator.mozGetUserMedia,window.getUserMedia(e)},getMovementX(e){return e.movementX||e.mozMovementX||e.webkitMovementX||0},getMovementY(e){return e.movementY||e.mozMovementY||e.webkitMovementY||0},getMouseWheelDelta(e){var t=0;switch(e.type){case`DOMMouseScroll`:t=e.detail/3;break;case`mousewheel`:t=e.wheelDelta/120;break;case`wheel`:switch(t=e.deltaY,e.deltaMode){case 0:t/=100;break;case 1:t/=3;break;case 2:t*=80;break;default:throw`unrecognized mouse wheel delta mode: `+e.deltaMode}break;default:throw`unrecognized mouse wheel event: `+e.type}return t},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseCoords(e,t){var r=n.canvas.getBoundingClientRect(),i=n.canvas.width,a=n.canvas.height,o=window.scrollX===void 0?window.pageXOffset:window.scrollX,s=window.scrollY===void 0?window.pageYOffset:window.scrollY,c=e-(o+r.left),l=t-(s+r.top);return c*=i/r.width,l*=a/r.height,{x:c,y:l}},setMouseCoords(e,t){let{x:n,y:r}=J.calculateMouseCoords(e,t);J.mouseMovementX=n-J.mouseX,J.mouseMovementY=r-J.mouseY,J.mouseX=n,J.mouseY=r},calculateMouseEvent(e){if(J.pointerLock)e.type!=`mousemove`&&`mozMovementX`in e?J.mouseMovementX=J.mouseMovementY=0:(J.mouseMovementX=J.getMovementX(e),J.mouseMovementY=J.getMovementY(e)),typeof SDL<`u`?(J.mouseX=SDL.mouseX+J.mouseMovementX,J.mouseY=SDL.mouseY+J.mouseMovementY):(J.mouseX+=J.mouseMovementX,J.mouseY+=J.mouseMovementY);else{if(e.type===`touchstart`||e.type===`touchend`||e.type===`touchmove`){var t=e.touch;if(t===void 0)return;var n=J.calculateMouseCoords(t.pageX,t.pageY);if(e.type===`touchstart`)J.lastTouches[t.identifier]=n,J.touches[t.identifier]=n;else if(e.type===`touchend`||e.type===`touchmove`){var r=J.touches[t.identifier];r||=n,J.lastTouches[t.identifier]=r,J.touches[t.identifier]=n}return}J.setMouseCoords(e.pageX,e.pageY)}},resizeListeners:[],updateResizeListeners(){var e=n.canvas;J.resizeListeners.forEach(t=>t(e.width,e.height))},setCanvasSize(e,t,r){var i=n.canvas;J.updateCanvasDimensions(i,e,t),r||J.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize(){if(typeof SDL<`u`){var e=D[SDL.screen>>2];e|=8388608,E[SDL.screen>>2]=e}J.updateCanvasDimensions(n.canvas),J.updateResizeListeners()},setWindowedCanvasSize(){if(typeof SDL<`u`){var e=D[SDL.screen>>2];e&=-8388609,E[SDL.screen>>2]=e}J.updateCanvasDimensions(n.canvas),J.updateResizeListeners()},updateCanvasDimensions(e,t,r){t&&r?(e.widthNative=t,e.heightNative=r):(t=e.widthNative,r=e.heightNative);var i=t,a=r;if(n.forcedAspectRatio&&n.forcedAspectRatio>0&&(i/a<n.forcedAspectRatio?i=Math.round(a*n.forcedAspectRatio):a=Math.round(i/n.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===e.parentNode&&typeof screen<`u`){var o=Math.min(screen.width/i,screen.height/a);i=Math.round(i*o),a=Math.round(a*o)}J.resizeCanvas?(e.width!=i&&(e.width=i),e.height!=a&&(e.height=a),e.style!==void 0&&(e.style.removeProperty(`width`),e.style.removeProperty(`height`))):(e.width!=t&&(e.width=t),e.height!=r&&(e.height=r),e.style!==void 0&&(i!=t||a!=r?(e.style.setProperty(`width`,i+`px`,`important`),e.style.setProperty(`height`,a+`px`,`important`)):(e.style.removeProperty(`width`),e.style.removeProperty(`height`))))}},bt=[],xt,St=e=>{var t=bt[e];return t||(e>=bt.length&&(bt.length=e+1),bt[e]=t=xt.get(e)),t},Ct=(e,t,n)=>{function r(){St(e)(t)}n>=0?ht(r,n):J.safeRequestAnimationFrame(r)},wt=()=>Date.now(),Tt=()=>2147483648,Et=()=>Tt(),Dt=()=>!l,Ot=(e,t,n)=>C.copyWithin(e,t,t+n),Y=e=>{var t=(e-v.buffer.byteLength+65535)/65536;try{return v.grow(t),ee(),1}catch{}},X=e=>{var t=C.length;e>>>=0;var n=Tt();if(e>n)return!1;for(var r=(e,t)=>e+(t-e%t)%t,i=1;i<=4;i*=2){var a=t*(1+.2/i);if(a=Math.min(a,e+100663296),Y(Math.min(n,r(Math.max(e,a),65536))))return!0}return!1};class kt{constructor(){this.allocated=[void 0],this.freelist=[]}get(e){return this.allocated[e]}has(e){return this.allocated[e]!==void 0}allocate(e){var t=this.freelist.pop()||this.allocated.length;return this.allocated[t]=e,t}free(e){this.allocated[e]=void 0,this.freelist.push(e)}}var Z={openDatabase(e,t,n,r){try{var i=indexedDB.open(e,t)}catch(e){return r(e)}i.onupgradeneeded=e=>{var t=e.target.result;t.objectStoreNames.contains(`FILES`)&&t.deleteObjectStore(`FILES`),t.createObjectStore(`FILES`)},i.onsuccess=e=>n(e.target.result),i.onerror=r},init(){Z.xhrs=new kt,de(`library_fetch_init`),Z.openDatabase(`emscripten_filesystem`,1,e=>{Z.dbInstance=e,fe(`library_fetch_init`)},()=>{Z.dbInstance=!1,fe(`library_fetch_init`)})}};function At(e,t,n,r,i){var a=D[e+8>>2];if(!a){n(e,0,`no url specified!`);return}var o=G(a),s=e+112,c=G(s+0);c||=`GET`;var l=D[s+56>>2],u=D[s+68>>2],d=D[s+72>>2],f=D[s+76>>2],p=D[s+80>>2],m=D[s+84>>2],h=D[s+88>>2],g=D[s+52>>2],_=!!(g&1),v=!!(g&2),y=!!(g&64),b=u?G(u):void 0,x=d?G(d):void 0,S=new XMLHttpRequest;if(S.withCredentials=!!C[s+60>>0],S.open(c,o,!y,b,x),y||(S.timeout=l),S.url_=o,S.responseType=`arraybuffer`,p){var w=G(p);S.overrideMimeType(w)}if(f)for(;;){var E=D[f>>2];if(!E)break;var O=D[f+4>>2];if(!O)break;f+=8;var k=G(E),ee=G(O);S.setRequestHeader(k,ee)}var A=Z.xhrs.allocate(S);D[e>>2]=A;var te=m&&h?C.slice(m,m+h):null;function j(){var t=0,n=0;S.response&&_&&D[e+12>>2]===0&&(n=S.response.byteLength),n>0&&(t=kn(n),C.set(new Uint8Array(S.response),t)),D[e+12>>2]=t,jt(e+16,n),jt(e+24,0);var r=S.response?S.response.byteLength:0;r&&jt(e+32,r),T[e+40>>1]=S.readyState,T[e+42>>1]=S.status,S.statusText&&q(S.statusText,e+44,64)}S.onload=r=>{Z.xhrs.has(A)&&(j(),S.status>=200&&S.status<300?t?.(e,S,r):n?.(e,S,r))},S.onerror=t=>{Z.xhrs.has(A)&&(j(),n?.(e,S,t))},S.ontimeout=t=>{Z.xhrs.has(A)&&n?.(e,S,t)},S.onprogress=t=>{if(Z.xhrs.has(A)){var n=_&&v&&S.response?S.response.byteLength:0,i=0;n>0&&_&&v&&(i=kn(n),C.set(new Uint8Array(S.response),i)),D[e+12>>2]=i,jt(e+16,n),jt(e+24,t.loaded-n),jt(e+32,t.total),T[e+40>>1]=S.readyState,S.readyState>=3&&S.status===0&&t.loaded>0&&(S.status=200),T[e+42>>1]=S.status,S.statusText&&q(S.statusText,e+44,64),r?.(e,S,t),i&&On(i)}},S.onreadystatechange=t=>{Z.xhrs.has(A)&&(T[e+40>>1]=S.readyState,S.readyState>=2&&(T[e+42>>1]=S.status),i?.(e,S,t))};try{S.send(te)}catch(t){n?.(e,S,t)}}var jt=(e,t)=>{D[e>>2]=t;var n=D[e>>2];D[e+4>>2]=(t-n)/4294967296};function Mt(e,t,n,r,i){if(!e){i(t,0,`IndexedDB not available!`);return}var a=t+112,o=D[a+64>>2];o||=D[t+8>>2];var s=G(o);try{var c=e.transaction([`FILES`],`readwrite`).objectStore(`FILES`).put(n,s);c.onsuccess=e=>{T[t+40>>1]=4,T[t+42>>1]=200,q(`OK`,t+44,64),r(t,0,s)},c.onerror=e=>{T[t+40>>1]=4,T[t+42>>1]=413,q(`Payload Too Large`,t+44,64),i(t,0,e)}}catch(e){i(t,0,e)}}function Nt(e,t,n,r){if(!e){r(t,0,`IndexedDB not available!`);return}var i=t+112,a=D[i+64>>2];a||=D[t+8>>2];var o=G(a);try{var s=e.transaction([`FILES`],`readonly`).objectStore(`FILES`).get(o);s.onsuccess=e=>{if(e.target.result){var i=e.target.result,a=i.byteLength||i.length,o=kn(a);C.set(new Uint8Array(i),o),D[t+12>>2]=o,jt(t+16,a),jt(t+24,0),jt(t+32,a),T[t+40>>1]=4,T[t+42>>1]=200,q(`OK`,t+44,64),n(t,0,i)}else T[t+40>>1]=4,T[t+42>>1]=404,q(`Not Found`,t+44,64),r(t,0,`no data`)},s.onerror=e=>{T[t+40>>1]=4,T[t+42>>1]=404,q(`Not Found`,t+44,64),r(t,0,e)}}catch(e){r(t,0,e)}}function Pt(e,t,n,r){if(!e){r(t,0,`IndexedDB not available!`);return}var i=t+112,a=D[i+64>>2];a||=D[t+8>>2];var o=G(a);try{var s=e.transaction([`FILES`],`readwrite`).objectStore(`FILES`).delete(o);s.onsuccess=e=>{var r=e.target.result;D[t+12>>2]=0,jt(t+16,0),jt(t+24,0),jt(t+32,0),T[t+40>>1]=4,T[t+42>>1]=200,q(`OK`,t+44,64),n(t,0,r)},s.onerror=e=>{T[t+40>>1]=4,T[t+42>>1]=404,q(`Not Found`,t+44,64),r(t,0,e)}}catch(e){r(t,0,e)}}function Ft(e,t,n,r,i){var a=e+112,o=D[a+36>>2],s=D[a+40>>2],c=D[a+44>>2],l=D[a+48>>2],u=D[a+52>>2],d=!!(u&64);function f(e){d?e():mt(e)}var p=(e,n,r)=>{f(()=>{o?St(o)(e):t?.(e)})},m=(e,t,n)=>{f(()=>{c?St(c)(e):r?.(e)})},h=(e,t,r)=>{f(()=>{s?St(s)(e):n?.(e)})},g=(e,t,n)=>{f(()=>{l?St(l)(e):i?.(e)})},_=(e,t,n)=>{At(e,p,h,m,g)},v=(e,n,r)=>{Mt(Z.dbInstance,e,n.response,(e,n,r)=>{f(()=>{o?St(o)(e):t?.(e)})},(e,n,r)=>{f(()=>{o?St(o)(e):t?.(e)})})},y=(e,t,n)=>{At(e,v,h,m,g)},b=G(a+0),x=!!(u&16),S=!!(u&4),w=!!(u&32);if(b===`EM_IDB_STORE`){var T=D[a+84>>2],E=D[a+88>>2];Mt(Z.dbInstance,e,C.slice(T,T+E),p,h)}else if(b===`EM_IDB_DELETE`)Pt(Z.dbInstance,e,p,h);else if(!x)Nt(Z.dbInstance,e,p,w?h:S?y:_);else if(!w)At(e,S?v:p,h,m,g);else return 0;return e}var It={},Lt=()=>o||`./this.program`,Rt=()=>{if(!Rt.strings){var e={USER:`web_user`,LOGNAME:`web_user`,PATH:`/`,PWD:`/`,HOME:`/home/web_user`,LANG:(typeof navigator==`object`&&navigator.languages&&navigator.languages[0]||`C`).replace(`-`,`_`)+`.UTF-8`,_:Lt()};for(var t in It)It[t]===void 0?delete e[t]:e[t]=It[t];var n=[];for(var t in e)n.push(`${t}=${e[t]}`);Rt.strings=n}return Rt.strings},zt=(e,t)=>{for(var n=0;n<e.length;++n)S[t++>>0]=e.charCodeAt(n);S[t>>0]=0},Bt=(e,t)=>{var n=0;return Rt().forEach((r,i)=>{var a=t+n;D[e+i*4>>2]=a,zt(r,a),n+=r.length+1}),0},Vt=(e,t)=>{var n=Rt();D[e>>2]=n.length;var r=0;return n.forEach(e=>r+=e.length+1),D[t>>2]=r,0};function Ht(e){try{var t=K.getStreamFromFD(e);return W.close(t),0}catch(e){if(W===void 0||e.name!==`ErrnoError`)throw e;return e.errno}}var Ut=(e,t,n,r)=>{for(var i=0,a=0;a<n;a++){var o=D[t>>2],s=D[t+4>>2];t+=8;var c=W.read(e,S,o,s,r);if(c<0)return-1;if(i+=c,c<s)break;r!==void 0&&(r+=c)}return i};function Wt(e,t,n,r){try{var i=Ut(K.getStreamFromFD(e),t,n);return D[r>>2]=i,0}catch(e){if(W===void 0||e.name!==`ErrnoError`)throw e;return e.errno}}function Gt(e,t,n,r,i){var a=Qe(t,n);try{if(isNaN(a))return 61;var o=K.getStreamFromFD(e);return W.llseek(o,a,r),R=[o.position>>>0,(L=o.position,+Math.abs(L)>=1?L>0?Math.floor(L/4294967296)>>>0:~~+Math.ceil((L-+(~~L>>>0))/4294967296)>>>0:0)],E[i>>2]=R[0],E[i+4>>2]=R[1],o.getdents&&a===0&&r===0&&(o.getdents=null),0}catch(e){if(W===void 0||e.name!==`ErrnoError`)throw e;return e.errno}}var Kt=(e,t,n,r)=>{for(var i=0,a=0;a<n;a++){var o=D[t>>2],s=D[t+4>>2];t+=8;var c=W.write(e,S,o,s,r);if(c<0)return-1;i+=c,r!==void 0&&(r+=c)}return i};function qt(e,t,n,r){try{var i=Kt(K.getStreamFromFD(e),t,n);return D[r>>2]=i,0}catch(e){if(W===void 0||e.name!==`ErrnoError`)throw e;return e.errno}}var Jt=e=>{var t=e.getExtension(`ANGLE_instanced_arrays`);if(t)return e.vertexAttribDivisor=(e,n)=>t.vertexAttribDivisorANGLE(e,n),e.drawArraysInstanced=(e,n,r,i)=>t.drawArraysInstancedANGLE(e,n,r,i),e.drawElementsInstanced=(e,n,r,i,a)=>t.drawElementsInstancedANGLE(e,n,r,i,a),1},Yt=e=>{var t=e.getExtension(`OES_vertex_array_object`);if(t)return e.createVertexArray=()=>t.createVertexArrayOES(),e.deleteVertexArray=e=>t.deleteVertexArrayOES(e),e.bindVertexArray=e=>t.bindVertexArrayOES(e),e.isVertexArray=e=>t.isVertexArrayOES(e),1},Xt=e=>{var t=e.getExtension(`WEBGL_draw_buffers`);if(t)return e.drawBuffers=(e,n)=>t.drawBuffersWEBGL(e,n),1},Zt=e=>!!(e.multiDrawWebgl=e.getExtension(`WEBGL_multi_draw`)),Qt=function(e){var t=`ANGLE_instanced_arrays.EXT_blend_minmax.EXT_disjoint_timer_query.EXT_frag_depth.EXT_shader_texture_lod.EXT_sRGB.OES_element_index_uint.OES_fbo_render_mipmap.OES_standard_derivatives.OES_texture_float.OES_texture_half_float.OES_texture_half_float_linear.OES_vertex_array_object.WEBGL_color_buffer_float.WEBGL_depth_texture.WEBGL_draw_buffers.EXT_color_buffer_half_float.EXT_float_blend.EXT_texture_compression_bptc.EXT_texture_compression_rgtc.EXT_texture_filter_anisotropic.KHR_parallel_shader_compile.OES_texture_float_linear.WEBGL_compressed_texture_s3tc.WEBGL_compressed_texture_s3tc_srgb.WEBGL_debug_renderer_info.WEBGL_debug_shaders.WEBGL_lose_context.WEBGL_multi_draw`.split(`.`);return(e.getSupportedExtensions()||[]).filter(e=>t.includes(e))},Q={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},queries:[],stringCache:{},unpackAlignment:4,recordError:function(e){Q.lastError||=e},getNewId:e=>{for(var t=Q.counter++,n=e.length;n<t;n++)e[n]=null;return t},getSource:(e,t,n,r)=>{for(var i=``,a=0;a<t;++a){var o=r?D[r+a*4>>2]:void 0;i+=G(D[n+a*4>>2],o)}return i},createContext:(e,t)=>{if(!e.getContextSafariWebGL2Fixed){e.getContextSafariWebGL2Fixed=e.getContext;function t(t,n){var r=e.getContextSafariWebGL2Fixed(t,n);return t==`webgl`==r instanceof WebGLRenderingContext?r:null}e.getContext=t}var n=e.getContext(`webgl`,t);return n?Q.registerContext(n,t):0},registerContext:(e,t)=>{var n=Q.getNewId(Q.contexts),r={handle:n,attributes:t,version:t.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=r),Q.contexts[n]=r,(t.enableExtensionsByDefault===void 0||t.enableExtensionsByDefault)&&Q.initExtensions(r),n},makeContextCurrent:e=>(Q.currentContext=Q.contexts[e],n.ctx=En=Q.currentContext?.GLctx,!(e&&!En)),getContext:e=>Q.contexts[e],deleteContext:e=>{Q.currentContext===Q.contexts[e]&&(Q.currentContext=null),typeof JSEvents==`object`&&JSEvents.removeAllHandlersOnTarget(Q.contexts[e].GLctx.canvas),Q.contexts[e]&&Q.contexts[e].GLctx.canvas&&(Q.contexts[e].GLctx.canvas.GLctxObject=void 0),Q.contexts[e]=null},initExtensions:e=>{if(e||=Q.currentContext,!e.initExtensionsDone){e.initExtensionsDone=!0;var t=e.GLctx;Jt(t),Yt(t),Xt(t),t.disjointTimerQueryExt=t.getExtension(`EXT_disjoint_timer_query`),Zt(t),Qt(t).forEach(e=>{!e.includes(`lose_context`)&&!e.includes(`debug`)&&t.getExtension(e)})}}},$t=(e,t)=>{En.bindTexture(e,Q.textures[t])},en=(e,t,n,r)=>{for(var i=0;i<e;i++){var a=En[n](),o=a&&Q.getNewId(r);a?(a.name=o,r[o]=a):Q.recordError(1282),E[t+i*4>>2]=o}},tn=(e,t)=>{en(e,t,`createTexture`,Q.textures)},nn=(e,t,n,r)=>{function i(e,t){return e+t-1&-t}return t*i(e*n,r)},rn=e=>({5:3,6:4,8:2,29502:3,29504:4})[e-6402]||1,an=e=>(e-=5120,e==1?C:e==4?E:e==6?O:e==5||e==28922?D:T),on=e=>31-Math.clz32(e.BYTES_PER_ELEMENT),sn=(e,t,n,r,i,a)=>{var o=an(e),s=on(o),c=1<<s,l=nn(n,r,rn(t)*c,Q.unpackAlignment);return o.subarray(i>>s,i+l>>s)},cn=(e,t,n,r,i,a,o,s,c)=>{En.texImage2D(e,t,n,r,i,a,o,s,c?sn(s,o,r,i,c,n):null)};function ln(e,t,n){En.texParameteri(e,t,n)}var un=(e,t)=>{for(var n=0,r=0;r<=t;n+=e[r++]);return n},dn=[31,29,31,30,31,30,31,31,30,31,30,31],fn=[31,28,31,30,31,30,31,31,30,31,30,31],pn=(e,t)=>{for(var n=new Date(e.getTime());t>0;){var r=et(n.getFullYear()),i=n.getMonth(),a=(r?dn:fn)[i];if(t>a-n.getDate())t-=a-n.getDate()+1,n.setDate(1),i<11?n.setMonth(i+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1));else return n.setDate(n.getDate()+t),n}return n},mn=(e,t)=>{S.set(e,t)},hn=(e,t,n,r)=>{var i=D[r+40>>2],a={tm_sec:E[r>>2],tm_min:E[r+4>>2],tm_hour:E[r+8>>2],tm_mday:E[r+12>>2],tm_mon:E[r+16>>2],tm_year:E[r+20>>2],tm_wday:E[r+24>>2],tm_yday:E[r+28>>2],tm_isdst:E[r+32>>2],tm_gmtoff:E[r+36>>2],tm_zone:i?G(i):``},o=G(n),s={"%c":`%a %b %d %H:%M:%S %Y`,"%D":`%m/%d/%y`,"%F":`%Y-%m-%d`,"%h":`%b`,"%r":`%I:%M:%S %p`,"%R":`%H:%M`,"%T":`%H:%M:%S`,"%x":`%m/%d/%y`,"%X":`%H:%M:%S`,"%Ec":`%c`,"%EC":`%C`,"%Ex":`%m/%d/%y`,"%EX":`%H:%M:%S`,"%Ey":`%y`,"%EY":`%Y`,"%Od":`%d`,"%Oe":`%e`,"%OH":`%H`,"%OI":`%I`,"%Om":`%m`,"%OM":`%M`,"%OS":`%S`,"%Ou":`%u`,"%OU":`%U`,"%OV":`%V`,"%Ow":`%w`,"%OW":`%W`,"%Oy":`%y`};for(var c in s)o=o.replace(new RegExp(c,`g`),s[c]);var l=[`Sunday`,`Monday`,`Tuesday`,`Wednesday`,`Thursday`,`Friday`,`Saturday`],u=[`January`,`February`,`March`,`April`,`May`,`June`,`July`,`August`,`September`,`October`,`November`,`December`];function d(e,t,n){for(var r=typeof e==`number`?e.toString():e||``;r.length<t;)r=n[0]+r;return r}function f(e,t){return d(e,t,`0`)}function p(e,t){function n(e){return e<0?-1:e>0?1:0}var r;return(r=n(e.getFullYear()-t.getFullYear()))===0&&(r=n(e.getMonth()-t.getMonth()))===0&&(r=n(e.getDate()-t.getDate())),r}function m(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function h(e){var t=pn(new Date(e.tm_year+1900,0,1),e.tm_yday),n=new Date(t.getFullYear(),0,4),r=new Date(t.getFullYear()+1,0,4),i=m(n),a=m(r);return p(i,t)<=0?p(a,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var g={"%a":e=>l[e.tm_wday].substring(0,3),"%A":e=>l[e.tm_wday],"%b":e=>u[e.tm_mon].substring(0,3),"%B":e=>u[e.tm_mon],"%C":e=>f((e.tm_year+1900)/100|0,2),"%d":e=>f(e.tm_mday,2),"%e":e=>d(e.tm_mday,2,` `),"%g":e=>h(e).toString().substring(2),"%G":h,"%H":e=>f(e.tm_hour,2),"%I":e=>{var t=e.tm_hour;return t==0?t=12:t>12&&(t-=12),f(t,2)},"%j":e=>f(e.tm_mday+un(et(e.tm_year+1900)?dn:fn,e.tm_mon-1),3),"%m":e=>f(e.tm_mon+1,2),"%M":e=>f(e.tm_min,2),"%n":()=>`
`,"%p":e=>e.tm_hour>=0&&e.tm_hour<12?`AM`:`PM`,"%S":e=>f(e.tm_sec,2),"%t":()=>`	`,"%u":e=>e.tm_wday||7,"%U":e=>{var t=e.tm_yday+7-e.tm_wday;return f(Math.floor(t/7),2)},"%V":e=>{var t=Math.floor((e.tm_yday+7-(e.tm_wday+6)%7)/7);if((e.tm_wday+371-e.tm_yday-2)%7<=2&&t++,t){if(t==53){var n=(e.tm_wday+371-e.tm_yday)%7;n!=4&&(n!=3||!et(e.tm_year))&&(t=1)}}else{t=52;var r=(e.tm_wday+7-e.tm_yday-1)%7;(r==4||r==5&&et(e.tm_year%400-1))&&t++}return f(t,2)},"%w":e=>e.tm_wday,"%W":e=>{var t=e.tm_yday+7-(e.tm_wday+6)%7;return f(Math.floor(t/7),2)},"%y":e=>(e.tm_year+1900).toString().substring(2),"%Y":e=>e.tm_year+1900,"%z":e=>{var t=e.tm_gmtoff,n=t>=0;return t=Math.abs(t)/60,t=t/60*100+t%60,(n?`+`:`-`)+String(`0000`+t).slice(-4)},"%Z":e=>e.tm_zone,"%%":()=>`%`};for(var c in o=o.replace(/%%/g,`\0\0`),g)o.includes(c)&&(o=o.replace(new RegExp(c,`g`),g[c](a)));o=o.replace(/\0\0/g,`%`);var _=Ae(o,!1);return _.length>t?0:(mn(_,e),_.length-1)},gn=(e,t,n,r,i)=>hn(e,t,n,r),_n=e=>n[`_`+e],vn=e=>{var t=Oe(e)+1,n=Nn(t);return q(e,n,t),n},yn=(e,t,n,r,i)=>{var a={string:e=>{var t=0;return e!=null&&e!==0&&(t=vn(e)),t},array:e=>{var t=Nn(e.length);return mn(e,t),t}};function o(e){return t===`string`?G(e):t===`boolean`?!!e:e}var s=_n(e),c=[],l=0;if(r)for(var u=0;u<r.length;u++){var d=a[n[u]];d?(l===0&&(l=jn()),c[u]=d(r[u])):c[u]=r[u]}var f=s.apply(null,c);function p(e){return l!==0&&Mn(l),o(e)}return f=p(f),f},bn=(e,t,n,r)=>{var i=!n||n.every(e=>e===`number`||e===`boolean`);return t!==`string`&&i&&!r?_n(e):function(){return yn(e,t,n,arguments,r)}},xn=function(e,t,n,r){e||=this,this.parent=e,this.mount=e.mount,this.mounted=null,this.id=W.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=r},Sn=365,Cn=146;Object.defineProperties(xn.prototype,{read:{get:function(){return(this.mode&Sn)===Sn},set:function(e){e?this.mode|=Sn:this.mode&=~Sn}},write:{get:function(){return(this.mode&Cn)===Cn},set:function(e){e?this.mode|=Cn:this.mode&=~Cn}},isFolder:{get:function(){return W.isDir(this.mode)}},isDevice:{get:function(){return W.isChrdev(this.mode)}}}),W.FSNode=xn,W.createPreloadedFile=Re,W.staticInit(),n.requestFullscreen=J.requestFullscreen,n.requestAnimationFrame=J.requestAnimationFrame,n.setCanvasSize=J.setCanvasSize,n.pauseMainLoop=J.mainLoop.pause,n.resumeMainLoop=J.mainLoop.resume,n.getUserMedia=J.getUserMedia,n.createContext=J.createContext;var wn={},Tn={};Z.init();var En,Dn={a:Ve,A:He,H:Ue,i:We,y:Ge,D:Ke,z:qe,w:Je,I:Ye,F:Ze,q:$e,r:it,x:ot,b:st,n:V,p:z,o:B,h:Ct,f:wt,t:Et,E:_t,K:Dt,G:Ot,v:X,J:Ft,B:Bt,C:Vt,m:ft,c:Ht,j:Wt,s:Gt,g:qt,k:$t,l:tn,d:cn,e:ln,u:gn},$=ge();$.M,n._zappar_has_initialized=$.N,n._zappar_invert=$.O,n._zappar_loaded=$.P,n._zappar_pipeline_create=$.R,n._zappar_pipeline_destroy=$.S,n._zappar_pipeline_camera_frame_submit=$.T,n._zappar_pipeline_camera_frame_submit_raw_pointer=$.U,n._zappar_pipeline_frame_update=$.V,n._zappar_pipeline_camera_frame_user_data=$.W,n._zappar_pipeline_camera_model=$.X,n._zappar_pipeline_camera_data_width=$.Y,n._zappar_pipeline_camera_data_height=$.Z,n._zappar_pipeline_camera_frame_sharpness=$._,n._zappar_pipeline_camera_frame_sharpness_enabled_set=$.$,n._zappar_pipeline_frame_number=$.aa,n._zappar_pipeline_camera_frame_data_raw_size=$.ba,n._zappar_pipeline_camera_frame_data_raw=$.ca,n._zappar_pipeline_motion_accelerometer_submit=$.da,n._zappar_pipeline_motion_accelerometer_with_gravity_submit_int=$.ea,n._zappar_pipeline_motion_accelerometer_without_gravity_submit_int=$.fa,n._zappar_pipeline_motion_rotation_rate_submit_int=$.ga,n._zappar_pipeline_motion_attitude_submit_int=$.ha,n._zappar_pipeline_motion_relative_orientation_submit_int=$.ia,n._zappar_pipeline_motion_rotation_rate_submit=$.ja,n._zappar_pipeline_motion_attitude_submit=$.ka,n._zappar_pipeline_motion_attitude_matrix_submit=$.la,n._zappar_pipeline_camera_frame_user_facing=$.ma,n._zappar_pipeline_camera_frame_texture_matrix=$.na,n._zappar_pipeline_camera_pose_with_attitude=$.oa,n._zappar_pipeline_camera_pose_with_origin=$.pa,n._zappar_pipeline_camera_frame_camera_attitude=$.qa,n._zappar_pipeline_camera_frame_device_attitude=$.ra,n._zappar_pipeline_camera_frame_texture_gl=$.sa,n._zappar_pipeline_camera_frame_upload_gl=$.ta,n._zappar_pipeline_sequence_record_start=$.ua,n._zappar_pipeline_sequence_record_stop=$.va,n._zappar_pipeline_sequence_record_clear=$.wa,n._zappar_pipeline_sequence_record_device_attitude_matrices_set=$.xa,n._zappar_pipeline_sequence_record_data_size=$.ya,n._zappar_pipeline_sequence_record_data=$.za,n._zappar_pipeline_process_gl=$.Aa,n._zappar_pipeline_camera_pose_default=$.Ba,n._zappar_instant_world_tracker_create=$.Ca,n._zappar_instant_world_tracker_destroy=$.Da,n._zappar_instant_world_tracker_anchor_pose_set_from_camera_offset_raw=$.Ea,n._zappar_instant_world_tracker_anchor_pose_raw=$.Fa,n._zappar_instant_world_tracker_enabled_set=$.Ga,n._zappar_instant_world_tracker_enabled=$.Ha,n._zappar_custom_anchor_create=$.Ia,n._zappar_custom_anchor_destroy=$.Ja,n._zappar_custom_anchor_pose_set_from_camera_offset_raw=$.Ka,n._zappar_custom_anchor_pose_set_from_anchor_offset=$.La,n._zappar_custom_anchor_pose_set_with_parent=$.Ma,n._zappar_custom_anchor_pose_set=$.Na,n._zappar_custom_anchor_pose_version=$.Oa,n._zappar_custom_anchor_pose_raw=$.Pa,n._zappar_custom_anchor_id=$.Qa,n._zappar_custom_anchor_status=$.Ra,n._zappar_image_tracker_create=$.Sa,n._zappar_image_tracker_destroy=$.Ta,n._zappar_image_tracker_target_load_from_memory=$.Ua,n.__Z42zappar_image_tracker_target_load_from_fileP23zappar_image_tracker_tiPKc=$.Va;var On=n._free=$.Wa;n._zappar_image_tracker_anchor_count=$.Xa,n._zappar_image_tracker_anchor_id=$.Ya,n._zappar_image_tracker_anchor_pose_raw=$.Za,n._zappar_image_tracker_enabled_set=$._a,n._zappar_image_tracker_enabled=$.$a,n._zappar_image_tracker_target_loaded_version=$.ab,n.__Z33zappar_image_tracker_target_countP23zappar_image_tracker_ti=$.bb,n.__Z46zappar_image_tracker_target_preview_compressedP23zappar_image_tracker_tii=$.cb,n.__Z51zappar_image_tracker_target_preview_compressed_sizeP23zappar_image_tracker_tii=$.db,n.__Z55zappar_image_tracker_target_preview_compressed_mimetypeP23zappar_image_tracker_tii=$.eb,n.__Z40zappar_image_tracker_target_preview_rgbaP23zappar_image_tracker_tii=$.fb,n.__Z45zappar_image_tracker_target_preview_rgba_sizeP23zappar_image_tracker_tii=$.gb,n.__Z46zappar_image_tracker_target_preview_rgba_widthP23zappar_image_tracker_tii=$.hb,n.__Z47zappar_image_tracker_target_preview_rgba_heightP23zappar_image_tracker_tii=$.ib,n.__Z38zappar_image_tracker_target_radius_topP23zappar_image_tracker_tii=$.jb,n.__Z41zappar_image_tracker_target_radius_bottomP23zappar_image_tracker_tii=$.kb,n.__Z39zappar_image_tracker_target_side_lengthP23zappar_image_tracker_tii=$.lb,n.__Z49zappar_image_tracker_target_physical_scale_factorP23zappar_image_tracker_tii=$.mb,n.__Z49zappar_image_tracker_target_preview_mesh_verticesP23zappar_image_tracker_tii=$.nb,n.__Z48zappar_image_tracker_target_preview_mesh_normalsP23zappar_image_tracker_tii=$.ob,n.__Z44zappar_image_tracker_target_preview_mesh_uvsP23zappar_image_tracker_tii=$.pb,n.__Z48zappar_image_tracker_target_preview_mesh_indicesP23zappar_image_tracker_tii=$.qb,n.__Z54zappar_image_tracker_target_preview_mesh_vertices_sizeP23zappar_image_tracker_tii=$.rb,n.__Z53zappar_image_tracker_target_preview_mesh_normals_sizeP23zappar_image_tracker_tii=$.sb,n.__Z49zappar_image_tracker_target_preview_mesh_uvs_sizeP23zappar_image_tracker_tii=$.tb,n.__Z53zappar_image_tracker_target_preview_mesh_indices_sizeP23zappar_image_tracker_tii=$.ub,n.__Z32zappar_image_tracker_target_typeP23zappar_image_tracker_tii=$.vb,n._zappar_face_tracker_create=$.wb,n._zappar_face_tracker_destroy=$.xb,n._zappar_face_tracker_model_load_from_memory=$.yb,n._zappar_face_tracker_anchor_count=$.zb,n._zappar_face_tracker_anchor_id=$.Ab,n._zappar_face_tracker_anchor_pose_raw=$.Bb,n._zappar_face_tracker_anchor_identity_coefficients=$.Cb,n._zappar_face_tracker_anchor_expression_coefficients=$.Db,n._zappar_face_tracker_enabled_set=$.Eb,n._zappar_face_tracker_enabled=$.Fb,n._zappar_face_tracker_max_faces_set=$.Gb,n._zappar_face_tracker_max_faces=$.Hb,n._zappar_face_tracker_model_loaded_version=$.Ib,n._zappar_face_landmark_create=$.Jb,n._zappar_face_landmark_destroy=$.Kb,n.__Z27zappar_face_landmark_updateP23zappar_face_landmark_tiPKfS2_i=$.Lb,n._zappar_face_landmark_anchor_pose=$.Mb,n._zappar_barcode_finder_create=$.Nb,n._zappar_barcode_finder_destroy=$.Ob,n._zappar_barcode_finder_found_number=$.Pb,n._zappar_barcode_finder_found_text=$.Qb,n._zappar_barcode_finder_enabled_set=$.Rb,n._zappar_barcode_finder_enabled=$.Sb,n._zappar_barcode_finder_found_format=$.Tb,n._zappar_barcode_finder_formats=$.Ub,n._zappar_barcode_finder_formats_set=$.Vb,n._zappar_zapcode_tracker_create=$.Wb,n._zappar_zapcode_tracker_destroy=$.Xb,n._zappar_zapcode_tracker_target_load_from_memory=$.Yb,n.__Z44zappar_zapcode_tracker_target_load_from_fileP25zappar_zapcode_tracker_tiPKc=$.Zb,n._zappar_zapcode_tracker_anchor_count=$._b,n._zappar_zapcode_tracker_anchor_id=$.$b,n._zappar_zapcode_tracker_anchor_pose_raw=$.ac,n._zappar_zapcode_tracker_enabled_set=$.bc,n._zappar_zapcode_tracker_enabled=$.cc,n._zappar_zapcode_tracker_target_loaded_version=$.dc;var kn=n._malloc=$.ec;n._zappar_face_mesh_create=$.fc,n._zappar_face_mesh_destroy=$.gc,n.__Z33zappar_face_mesh_load_from_memoryP19zappar_face_mesh_tiPKciiiii=$.hc,n.__Z29zappar_face_mesh_indices_sizeP19zappar_face_mesh_ti=$.ic,n.__Z25zappar_face_mesh_uvs_sizeP19zappar_face_mesh_ti=$.jc,n.__Z30zappar_face_mesh_vertices_sizeP19zappar_face_mesh_ti=$.kc,n.__Z31zappar_face_mesh_loaded_versionP19zappar_face_mesh_ti=$.lc,n.__Z25zappar_face_mesh_verticesP19zappar_face_mesh_ti=$.mc,n.__Z20zappar_face_mesh_uvsP19zappar_face_mesh_ti=$.nc,n.__Z24zappar_face_mesh_indicesP19zappar_face_mesh_ti=$.oc,n.__Z23zappar_face_mesh_updateP19zappar_face_mesh_tiPKfS2_i=$.pc,n.__Z29zappar_face_mesh_normals_sizeP19zappar_face_mesh_ti=$.qc,n.__Z24zappar_face_mesh_normalsP19zappar_face_mesh_ti=$.rc,n._zappar_camera_source_create=$.sc,n._zappar_camera_source_destroy=$.tc,n._zappar_camera_source_start=$.uc,n._zappar_camera_source_pause=$.vc,n._zappar_camera_default_device_id=$.wc,n._zappar_sequence_source_create=$.xc,n.__Z28zappar_sequence_source_startP25zappar_sequence_source_ti=$.yc,n.__Z39zappar_sequence_source_load_from_memoryP25zappar_sequence_source_tiPKci=$.zc,n.__Z28zappar_sequence_source_pauseP25zappar_sequence_source_ti=$.Ac,n._zappar_sequence_source_destroy=$.Bc,n._zappar_sequence_source_max_playback_fps_set=$.Cc,n._zappar_log_level_set=$.Dc,n._zappar_log_level=$.Ec,n.__Z23zappar_log_redirect_setPFv18zappar_log_level_tPKcE=$.Fc,n._zappar_world_tracker_create=$.Gc,n._zappar_world_tracker_destroy=$.Hc,n._zappar_world_tracker_world_anchor_status=$.Ic,n._zappar_world_tracker_world_anchor_id=$.Jc,n._zappar_world_tracker_plane_anchor_count=$.Kc,n._zappar_world_tracker_plane_anchor_id=$.Lc,n._zappar_world_tracker_plane_anchor_pose_raw=$.Mc,n._zappar_world_tracker_world_anchor_pose_raw=$.Nc,n._zappar_world_tracker_ground_anchor_status=$.Oc,n._zappar_world_tracker_ground_anchor_id=$.Pc,n._zappar_world_tracker_ground_anchor_pose_raw=$.Qc,n._zappar_world_tracker_reset=$.Rc,n._zappar_world_tracker_enabled_set=$.Sc,n._zappar_world_tracker_enabled=$.Tc,n._zappar_world_tracker_scale_mode_set=$.Uc,n._zappar_world_tracker_scale_mode=$.Vc,n._zappar_world_tracker_session_number=$.Wc,n._zappar_world_tracker_quality=$.Xc,n._zappar_world_tracker_tracks_data_enabled=$.Yc,n._zappar_world_tracker_projections_data_enabled=$.Zc,n._zappar_world_tracker_tracks_data_enabled_set=$._c,n._zappar_world_tracker_projections_data_enabled_set=$.$c,n._zappar_world_tracker_tracks_data=$.ad,n._zappar_world_tracker_tracks_data_size=$.bd,n._zappar_world_tracker_tracks_type_data=$.cd,n._zappar_world_tracker_tracks_type_data_size=$.dd,n._zappar_world_tracker_projections_data=$.ed,n._zappar_world_tracker_projections_data_size=$.fd,n._zappar_world_tracker_horizontal_plane_detection_enabled=$.gd,n._zappar_world_tracker_horizontal_plane_detection_enabled_set=$.hd,n._zappar_world_tracker_vertical_plane_detection_enabled=$.id,n._zappar_world_tracker_vertical_plane_detection_enabled_set=$.jd,n._zappar_world_tracker_vertical_plane_detection_supported=$.kd,n._zappar_world_tracker_plane_anchor_orientation=$.ld,n._zappar_world_tracker_plane_anchor_polygon_data=$.md,n._zappar_world_tracker_plane_anchor_polygon_data_size=$.nd,n._zappar_world_tracker_plane_anchor_polygon_version=$.od,n._zappar_world_tracker_plane_anchor_status=$.pd,n._worker_message_send_count=$.qd,n._worker_message_send_clear=$.rd,n._worker_message_send_data_size=$.sd,n._worker_message_send_reference=$.td,n._worker_message_send_instance=$.ud,n._worker_message_send_data=$.vd,n._worker_message_receive=$.wd,n._ceres_worker=$.xd,n._data_download_clear=$.yd,n._data_download_size=$.zd,n._data_download=$.Ad,n._data_should_record_set=$.Bd,n._zappar_analytics_project_id_set=$.Cd,$.htons,$.ntohs;var An=$.Dd,jn=$.Ed,Mn=$.Fd,Nn=$.Gd;n.___start_em_js=673236,n.___stop_em_js=674401,n.cwrap=bn,n.setValue=xe,n.getValue=ye,n.UTF8ToString=G;var Pn;le=function e(){Pn||Fn(),Pn||(le=e)};function Fn(){if(N>0||(re(),N>0))return;function e(){Pn||(Pn=!0,n.calledRun=!0,!y&&(ie(),r(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),M()))}n.setStatus?(n.setStatus(`Running...`),setTimeout(function(){setTimeout(function(){n.setStatus(``)},1),e()},1)):e()}if(n.preInit)for(typeof n.preInit==`function`&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return Fn(),t})})();function u(e){let t=e.cwrap(`zappar_log_level`,`number`,[]),n=e.cwrap(`zappar_log_level_set`,null,[`number`]),r=e.cwrap(`zappar_analytics_project_id_set`,null,[`string`,`string`]),i=e.cwrap(`zappar_pipeline_create`,`number`,[]),a=e.cwrap(`zappar_pipeline_destroy`,null,[`number`]),o=e.cwrap(`zappar_pipeline_camera_frame_data_raw`,`number`,[`number`]),s=e.cwrap(`zappar_pipeline_camera_frame_data_raw_size`,`number`,[`number`]),c=e.cwrap(`zappar_pipeline_frame_update`,null,[`number`]),l=e.cwrap(`zappar_pipeline_frame_number`,`number`,[`number`]),u=e.cwrap(`zappar_pipeline_camera_model`,`number`,[`number`]),d=e.cwrap(`zappar_pipeline_camera_data_width`,`number`,[`number`]),f=e.cwrap(`zappar_pipeline_camera_data_height`,`number`,[`number`]),p=e.cwrap(`zappar_pipeline_camera_frame_sharpness_enabled`,`number`,[`number`]),m=e.cwrap(`zappar_pipeline_camera_frame_sharpness_enabled_set`,null,[`number`,`number`]),h=e.cwrap(`zappar_pipeline_camera_frame_sharpness`,`number`,[`number`]),g=e.cwrap(`zappar_pipeline_camera_frame_user_data`,`number`,[`number`]),_=e.cwrap(`zappar_pipeline_camera_frame_submit`,null,[`number`,`number`,`number`,`number`,`number`,`number`,`number`,`number`,`number`,`number`]),v=e.cwrap(`zappar_pipeline_camera_frame_submit_raw_pointer`,null,[`number`,`number`,`number`,`number`,`number`,`number`,`number`,`number`,`number`,`number`,`number`,`number`,`number`]),y=e.cwrap(`zappar_pipeline_camera_frame_camera_attitude`,`number`,[`number`]),b=e.cwrap(`zappar_pipeline_camera_frame_device_attitude`,`number`,[`number`]),x=e.cwrap(`zappar_pipeline_motion_accelerometer_submit`,null,[`number`,`number`,`number`,`number`,`number`]),S=e.cwrap(`zappar_pipeline_motion_accelerometer_with_gravity_submit_int`,null,[`number`,`number`,`number`,`number`,`number`,`number`]),C=e.cwrap(`zappar_pipeline_motion_accelerometer_without_gravity_submit_int`,null,[`number`,`number`,`number`,`number`,`number`,`number`]),w=e.cwrap(`zappar_pipeline_motion_rotation_rate_submit`,null,[`number`,`number`,`number`,`number`,`number`]),T=e.cwrap(`zappar_pipeline_motion_rotation_rate_submit_int`,null,[`number`,`number`,`number`,`number`,`number`,`number`]),E=e.cwrap(`zappar_pipeline_motion_attitude_submit`,null,[`number`,`number`,`number`,`number`,`number`]),D=e.cwrap(`zappar_pipeline_motion_attitude_submit_int`,null,[`number`,`number`,`number`,`number`,`number`,`number`]),O=e.cwrap(`zappar_pipeline_motion_relative_orientation_submit_int`,null,[`number`,`number`,`number`,`number`,`number`,`number`,`number`]),k=e.cwrap(`zappar_pipeline_motion_attitude_matrix_submit`,null,[`number`,`number`]),ee=e.cwrap(`zappar_camera_source_create`,`number`,[`number`,`string`]),A=e.cwrap(`zappar_camera_source_destroy`,null,[`number`]),te=e.cwrap(`zappar_sequence_source_create`,`number`,[`number`]),j=e.cwrap(`zappar_sequence_source_destroy`,null,[`number`]),ne=e.cwrap(`zappar_image_tracker_create`,`number`,[`number`]),re=e.cwrap(`zappar_image_tracker_destroy`,null,[`number`]),ie=e.cwrap(`zappar_image_tracker_target_load_from_memory`,null,[`number`,`number`,`number`]),M=e.cwrap(`zappar_image_tracker_target_loaded_version`,`number`,[`number`]),ae=e.cwrap(`zappar_image_tracker_enabled`,`number`,[`number`]),oe=e.cwrap(`zappar_image_tracker_enabled_set`,null,[`number`,`number`]),se=e.cwrap(`zappar_image_tracker_anchor_count`,`number`,[`number`]),N=e.cwrap(`zappar_image_tracker_anchor_id`,`string`,[`number`,`number`]),ce=e.cwrap(`zappar_image_tracker_anchor_pose_raw`,`number`,[`number`,`number`]),le=e.cwrap(`zappar_face_tracker_create`,`number`,[`number`]),ue=e.cwrap(`zappar_face_tracker_destroy`,null,[`number`]),de=e.cwrap(`zappar_face_tracker_model_load_from_memory`,null,[`number`,`number`,`number`]),fe=e.cwrap(`zappar_face_tracker_model_loaded_version`,`number`,[`number`]),P=e.cwrap(`zappar_face_tracker_enabled_set`,null,[`number`,`number`]),F=e.cwrap(`zappar_face_tracker_enabled`,`number`,[`number`]),pe=e.cwrap(`zappar_face_tracker_max_faces_set`,null,[`number`,`number`]),I=e.cwrap(`zappar_face_tracker_max_faces`,`number`,[`number`]),me=e.cwrap(`zappar_face_tracker_anchor_count`,`number`,[`number`]),he=e.cwrap(`zappar_face_tracker_anchor_id`,`string`,[`number`,`number`]),ge=e.cwrap(`zappar_face_tracker_anchor_pose_raw`,`number`,[`number`,`number`]),L=e.cwrap(`zappar_face_tracker_anchor_identity_coefficients`,`number`,[`number`,`number`]),R=e.cwrap(`zappar_face_tracker_anchor_expression_coefficients`,`number`,[`number`,`number`]),z=e.cwrap(`zappar_face_mesh_create`,`number`,[]),B=e.cwrap(`zappar_face_mesh_destroy`,null,[`number`]),V=e.cwrap(`zappar_face_landmark_create`,`number`,[`number`]),_e=e.cwrap(`zappar_face_landmark_destroy`,null,[`number`]),ve=e.cwrap(`zappar_barcode_finder_create`,`number`,[`number`]),ye=e.cwrap(`zappar_barcode_finder_destroy`,null,[`number`]),be=e.cwrap(`zappar_barcode_finder_enabled_set`,null,[`number`,`number`]),xe=e.cwrap(`zappar_barcode_finder_enabled`,`number`,[`number`]),H=e.cwrap(`zappar_barcode_finder_found_number`,`number`,[`number`]),Se=e.cwrap(`zappar_barcode_finder_found_text`,`string`,[`number`,`number`]),Ce=e.cwrap(`zappar_barcode_finder_found_format`,`number`,[`number`,`number`]),we=e.cwrap(`zappar_barcode_finder_formats`,`number`,[`number`]),Te=e.cwrap(`zappar_barcode_finder_formats_set`,null,[`number`,`number`]),Ee=e.cwrap(`zappar_instant_world_tracker_create`,`number`,[`number`]),De=e.cwrap(`zappar_instant_world_tracker_destroy`,null,[`number`]),Oe=e.cwrap(`zappar_instant_world_tracker_enabled_set`,null,[`number`,`number`]),ke=e.cwrap(`zappar_instant_world_tracker_enabled`,`number`,[`number`]),Ae=e.cwrap(`zappar_instant_world_tracker_anchor_pose_raw`,`number`,[`number`]),je=e.cwrap(`zappar_instant_world_tracker_anchor_pose_set_from_camera_offset_raw`,null,[`number`,`number`,`number`,`number`,`number`]),Me=e.cwrap(`zappar_zapcode_tracker_create`,`number`,[`number`]),Ne=e.cwrap(`zappar_zapcode_tracker_destroy`,null,[`number`]),U=e.cwrap(`zappar_zapcode_tracker_target_load_from_memory`,null,[`number`,`number`,`number`]),Pe=e.cwrap(`zappar_zapcode_tracker_target_loaded_version`,`number`,[`number`]),Fe=e.cwrap(`zappar_zapcode_tracker_enabled`,`number`,[`number`]),Ie=e.cwrap(`zappar_zapcode_tracker_enabled_set`,null,[`number`,`number`]),Le=e.cwrap(`zappar_zapcode_tracker_anchor_count`,`number`,[`number`]),Re=e.cwrap(`zappar_zapcode_tracker_anchor_id`,`string`,[`number`,`number`]),ze=e.cwrap(`zappar_zapcode_tracker_anchor_pose_raw`,`number`,[`number`,`number`]),Be=e.cwrap(`zappar_world_tracker_create`,`number`,[`number`]),W=e.cwrap(`zappar_world_tracker_destroy`,null,[`number`]),G=e.cwrap(`zappar_world_tracker_enabled`,`number`,[`number`]),K=e.cwrap(`zappar_world_tracker_enabled_set`,null,[`number`,`number`]),Ve=e.cwrap(`zappar_world_tracker_scale_mode`,`number`,[`number`]),q=e.cwrap(`zappar_world_tracker_scale_mode_set`,null,[`number`,`number`]),He=e.cwrap(`zappar_world_tracker_session_number`,`number`,[`number`]),Ue=e.cwrap(`zappar_world_tracker_quality`,`number`,[`number`]),We=e.cwrap(`zappar_world_tracker_horizontal_plane_detection_enabled`,`number`,[`number`]),Ge=e.cwrap(`zappar_world_tracker_horizontal_plane_detection_enabled_set`,null,[`number`,`number`]),Ke=e.cwrap(`zappar_world_tracker_vertical_plane_detection_enabled`,`number`,[`number`]),qe=e.cwrap(`zappar_world_tracker_vertical_plane_detection_enabled_set`,null,[`number`,`number`]),Je=e.cwrap(`zappar_world_tracker_plane_anchor_count`,`number`,[`number`]),Ye=e.cwrap(`zappar_world_tracker_plane_anchor_id`,`string`,[`number`,`number`]),Xe=e.cwrap(`zappar_world_tracker_plane_anchor_pose_raw`,`number`,[`number`,`number`]),Ze=e.cwrap(`zappar_world_tracker_plane_anchor_status`,`number`,[`number`,`number`]),Qe=e.cwrap(`zappar_world_tracker_plane_anchor_polygon_data_size`,`number`,[`number`,`number`]),$e=e.cwrap(`zappar_world_tracker_plane_anchor_polygon_data`,`number`,[`number`,`number`]),et=e.cwrap(`zappar_world_tracker_plane_anchor_polygon_version`,`number`,[`number`,`number`]),tt=e.cwrap(`zappar_world_tracker_plane_anchor_orientation`,`number`,[`number`,`number`]),nt=e.cwrap(`zappar_world_tracker_world_anchor_status`,`number`,[`number`]),rt=e.cwrap(`zappar_world_tracker_world_anchor_id`,`string`,[`number`]),it=e.cwrap(`zappar_world_tracker_world_anchor_pose_raw`,`number`,[`number`]),at=e.cwrap(`zappar_world_tracker_ground_anchor_id`,`string`,[`number`]),ot=e.cwrap(`zappar_world_tracker_ground_anchor_status`,`number`,[`number`]),st=e.cwrap(`zappar_world_tracker_ground_anchor_pose_raw`,`number`,[`number`]),ct=e.cwrap(`zappar_world_tracker_reset`,null,[`number`]),lt=e.cwrap(`zappar_world_tracker_tracks_data_enabled`,`number`,[`number`]),ut=e.cwrap(`zappar_world_tracker_tracks_data_enabled_set`,null,[`number`,`number`]),dt=e.cwrap(`zappar_world_tracker_tracks_data_size`,`number`,[`number`]),ft=e.cwrap(`zappar_world_tracker_tracks_data`,`number`,[`number`]),pt=e.cwrap(`zappar_world_tracker_tracks_type_data_size`,`number`,[`number`]),mt=e.cwrap(`zappar_world_tracker_tracks_type_data`,`number`,[`number`]),ht=e.cwrap(`zappar_world_tracker_projections_data_enabled`,`number`,[`number`]),gt=e.cwrap(`zappar_world_tracker_projections_data_enabled_set`,null,[`number`,`number`]),_t=e.cwrap(`zappar_world_tracker_projections_data_size`,`number`,[`number`]),vt=e.cwrap(`zappar_world_tracker_projections_data`,`number`,[`number`]),yt=e.cwrap(`zappar_custom_anchor_create`,`number`,[`number`,`number`,`string`]),J=e.cwrap(`zappar_custom_anchor_destroy`,null,[`number`]),bt=e.cwrap(`zappar_custom_anchor_status`,`number`,[`number`]),xt=e.cwrap(`zappar_custom_anchor_pose_version`,`number`,[`number`]),St=e.cwrap(`zappar_custom_anchor_pose_raw`,`number`,[`number`]),Ct=e.cwrap(`zappar_custom_anchor_pose_set_from_camera_offset_raw`,null,[`number`,`number`,`number`,`number`,`number`]),wt=e.cwrap(`zappar_custom_anchor_pose_set_from_anchor_offset`,null,[`number`,`string`,`number`,`number`,`number`,`number`]),Tt=e.cwrap(`zappar_custom_anchor_pose_set`,null,[`number`,`number`]),Et=e.cwrap(`zappar_custom_anchor_pose_set_with_parent`,null,[`number`,`number`,`string`]),Dt=e.cwrap(`zappar_d3_tracker_create`,`number`,[`number`]),Ot=e.cwrap(`zappar_d3_tracker_destroy`,null,[`number`]),Y=32,X=e._malloc(Y);e._malloc(64);let kt=new Map,Z=(t,n)=>{let r=kt.get(t);return(!r||r[0]<n)&&(r&&e._free(r[1]),r=[n,e._malloc(n)],kt.set(t,r)),r[1]};return{log_level:()=>t(),log_level_set:e=>n(e),analytics_project_id_set:(e,t)=>r(e,t),pipeline_create:()=>i(),pipeline_destroy:()=>{a()},pipeline_camera_frame_data_raw:e=>o(e),pipeline_camera_frame_data_raw_size:e=>s(e),pipeline_frame_update:e=>c(e),pipeline_frame_number:e=>l(e),pipeline_camera_model:t=>{let n=u(t),r=new Float32Array(6);return r.set(e.HEAPF32.subarray(n/4,6+n/4)),n=r,n},pipeline_camera_data_width:e=>d(e),pipeline_camera_data_height:e=>f(e),pipeline_camera_frame_sharpness_enabled:e=>{let t=p(e);return t=t===1,t},pipeline_camera_frame_sharpness_enabled_set:(e,t)=>m(e,t?1:0),pipeline_camera_frame_sharpness:e=>h(e),pipeline_camera_frame_user_data:e=>g(e),pipeline_camera_frame_submit:(t,n,r,i,a,o,s,c,l)=>{Y<n.byteLength&&(e._free(X),Y=n.byteLength,X=e._malloc(Y));let u=X,d=n.byteLength;e.HEAPU8.set(new Uint8Array(n),X);let f=r,p=i,m=a,h=Z(4,o.byteLength);e.HEAPF32.set(o,h/4);let g=Z(5,s.byteLength);return e.HEAPF32.set(s,g/4),_(t,u,d,f,p,m,h,g,c?1:0,l)},pipeline_camera_frame_submit_raw_pointer:(t,n,r,i,a,o,s,c,l,u,d,f,p)=>{let m=n,h=r,g=i,_=a,y=o,b=s,x=Z(6,c.byteLength);e.HEAPF32.set(c,x/4);let S=l,C=Z(8,u.byteLength);return e.HEAPF32.set(u,C/4),v(t,m,h,g,_,y,b,x,S,C,d?1:0,f,p?1:0)},pipeline_camera_frame_camera_attitude:t=>{let n=y(t),r=new Float32Array(16);return r.set(e.HEAPF32.subarray(n/4,16+n/4)),n=r,n},pipeline_camera_frame_device_attitude:t=>{let n=b(t),r=new Float32Array(16);return r.set(e.HEAPF32.subarray(n/4,16+n/4)),n=r,n},pipeline_motion_accelerometer_submit:(e,t,n,r,i)=>x(e,t,n,r,i),pipeline_motion_accelerometer_with_gravity_submit_int:(e,t,n,r,i,a)=>S(e,t,n,r,i,a),pipeline_motion_accelerometer_without_gravity_submit_int:(e,t,n,r,i,a)=>C(e,t,n,r,i,a),pipeline_motion_rotation_rate_submit:(e,t,n,r,i)=>w(e,t,n,r,i),pipeline_motion_rotation_rate_submit_int:(e,t,n,r,i,a)=>T(e,t,n,r,i,a),pipeline_motion_attitude_submit:(e,t,n,r,i)=>E(e,t,n,r,i),pipeline_motion_attitude_submit_int:(e,t,n,r,i,a)=>D(e,t,n,r,i,a),pipeline_motion_relative_orientation_submit_int:(e,t,n,r,i,a,o)=>O(e,t,n,r,i,a,o),pipeline_motion_attitude_matrix_submit:(t,n)=>{let r=Z(0,n.byteLength);return e.HEAPF32.set(n,r/4),k(t,r)},camera_source_create:(e,t)=>ee(e,t),camera_source_destroy:()=>{A()},sequence_source_create:e=>te(e),sequence_source_destroy:()=>{j()},image_tracker_create:e=>ne(e),image_tracker_destroy:()=>{re()},image_tracker_target_load_from_memory:(t,n)=>{Y<n.byteLength&&(e._free(X),Y=n.byteLength,X=e._malloc(Y));let r=X,i=n.byteLength;return e.HEAPU8.set(new Uint8Array(n),X),ie(t,r,i)},image_tracker_target_loaded_version:e=>M(e),image_tracker_enabled:e=>{let t=ae(e);return t=t===1,t},image_tracker_enabled_set:(e,t)=>oe(e,t?1:0),image_tracker_anchor_count:e=>se(e),image_tracker_anchor_id:(e,t)=>N(e,t),image_tracker_anchor_pose_raw:(t,n)=>{let r=ce(t,n),i=new Float32Array(16);return i.set(e.HEAPF32.subarray(r/4,16+r/4)),r=i,r},face_tracker_create:e=>le(e),face_tracker_destroy:()=>{ue()},face_tracker_model_load_from_memory:(t,n)=>{Y<n.byteLength&&(e._free(X),Y=n.byteLength,X=e._malloc(Y));let r=X,i=n.byteLength;return e.HEAPU8.set(new Uint8Array(n),X),de(t,r,i)},face_tracker_model_loaded_version:e=>fe(e),face_tracker_enabled_set:(e,t)=>P(e,t?1:0),face_tracker_enabled:e=>{let t=F(e);return t=t===1,t},face_tracker_max_faces_set:(e,t)=>pe(e,t),face_tracker_max_faces:e=>I(e),face_tracker_anchor_count:e=>me(e),face_tracker_anchor_id:(e,t)=>he(e,t),face_tracker_anchor_pose_raw:(t,n)=>{let r=ge(t,n),i=new Float32Array(16);return i.set(e.HEAPF32.subarray(r/4,16+r/4)),r=i,r},face_tracker_anchor_identity_coefficients:(t,n)=>{let r=L(t,n),i=new Float32Array(50);return i.set(e.HEAPF32.subarray(r/4,50+r/4)),r=i,r},face_tracker_anchor_expression_coefficients:(t,n)=>{let r=R(t,n),i=new Float32Array(29);return i.set(e.HEAPF32.subarray(r/4,29+r/4)),r=i,r},face_mesh_create:()=>z(),face_mesh_destroy:()=>{B()},face_landmark_create:e=>V(e),face_landmark_destroy:()=>{_e()},barcode_finder_create:e=>ve(e),barcode_finder_destroy:()=>{ye()},barcode_finder_enabled_set:(e,t)=>be(e,t?1:0),barcode_finder_enabled:e=>{let t=xe(e);return t=t===1,t},barcode_finder_found_number:e=>H(e),barcode_finder_found_text:(e,t)=>Se(e,t),barcode_finder_found_format:(e,t)=>Ce(e,t),barcode_finder_formats:e=>we(e),barcode_finder_formats_set:(e,t)=>Te(e,t),instant_world_tracker_create:e=>Ee(e),instant_world_tracker_destroy:()=>{De()},instant_world_tracker_enabled_set:(e,t)=>Oe(e,t?1:0),instant_world_tracker_enabled:e=>{let t=ke(e);return t=t===1,t},instant_world_tracker_anchor_pose_raw:t=>{let n=Ae(t),r=new Float32Array(16);return r.set(e.HEAPF32.subarray(n/4,16+n/4)),n=r,n},instant_world_tracker_anchor_pose_set_from_camera_offset_raw:(e,t,n,r,i)=>je(e,t,n,r,i),zapcode_tracker_create:e=>Me(e),zapcode_tracker_destroy:()=>{Ne()},zapcode_tracker_target_load_from_memory:(t,n)=>{Y<n.byteLength&&(e._free(X),Y=n.byteLength,X=e._malloc(Y));let r=X,i=n.byteLength;return e.HEAPU8.set(new Uint8Array(n),X),U(t,r,i)},zapcode_tracker_target_loaded_version:e=>Pe(e),zapcode_tracker_enabled:e=>{let t=Fe(e);return t=t===1,t},zapcode_tracker_enabled_set:(e,t)=>Ie(e,t?1:0),zapcode_tracker_anchor_count:e=>Le(e),zapcode_tracker_anchor_id:(e,t)=>Re(e,t),zapcode_tracker_anchor_pose_raw:(t,n)=>{let r=ze(t,n),i=new Float32Array(16);return i.set(e.HEAPF32.subarray(r/4,16+r/4)),r=i,r},world_tracker_create:e=>Be(e),world_tracker_destroy:()=>{W()},world_tracker_enabled:e=>{let t=G(e);return t=t===1,t},world_tracker_enabled_set:(e,t)=>K(e,t?1:0),world_tracker_scale_mode:e=>Ve(e),world_tracker_scale_mode_set:(e,t)=>q(e,t),world_tracker_session_number:e=>He(e),world_tracker_quality:e=>Ue(e),world_tracker_horizontal_plane_detection_enabled:e=>{let t=We(e);return t=t===1,t},world_tracker_horizontal_plane_detection_enabled_set:(e,t)=>Ge(e,t?1:0),world_tracker_vertical_plane_detection_enabled:e=>{let t=Ke(e);return t=t===1,t},world_tracker_vertical_plane_detection_enabled_set:(e,t)=>qe(e,t?1:0),world_tracker_plane_anchor_count:e=>Je(e),world_tracker_plane_anchor_id:(e,t)=>Ye(e,t),world_tracker_plane_anchor_pose_raw:(t,n)=>{let r=Xe(t,n),i=new Float32Array(16);return i.set(e.HEAPF32.subarray(r/4,16+r/4)),r=i,r},world_tracker_plane_anchor_status:(e,t)=>Ze(e,t),world_tracker_plane_anchor_polygon_data_size:(e,t)=>Qe(e,t),world_tracker_plane_anchor_polygon_data:(t,n)=>{let r=$e(t,n),i=Qe(t,n),a=new Float32Array(i);return a.set(e.HEAPF32.subarray(r/4,i+r/4)),r=a,r},world_tracker_plane_anchor_polygon_version:(e,t)=>et(e,t),world_tracker_plane_anchor_orientation:(e,t)=>tt(e,t),world_tracker_world_anchor_status:e=>nt(e),world_tracker_world_anchor_id:e=>rt(e),world_tracker_world_anchor_pose_raw:t=>{let n=it(t),r=new Float32Array(16);return r.set(e.HEAPF32.subarray(n/4,16+n/4)),n=r,n},world_tracker_ground_anchor_id:e=>at(e),world_tracker_ground_anchor_status:e=>ot(e),world_tracker_ground_anchor_pose_raw:t=>{let n=st(t),r=new Float32Array(16);return r.set(e.HEAPF32.subarray(n/4,16+n/4)),n=r,n},world_tracker_reset:e=>ct(e),world_tracker_tracks_data_enabled:e=>{let t=lt(e);return t=t===1,t},world_tracker_tracks_data_enabled_set:(e,t)=>ut(e,t?1:0),world_tracker_tracks_data_size:e=>dt(e),world_tracker_tracks_data:t=>{let n=ft(t),r=dt(t),i=new Float32Array(r);return i.set(e.HEAPF32.subarray(n/4,r+n/4)),n=i,n},world_tracker_tracks_type_data_size:e=>pt(e),world_tracker_tracks_type_data:t=>{let n=mt(t),r=pt(t),i=new Uint8Array(r);return i.set(e.HEAPU8.subarray(n,r+n)),n=i,n},world_tracker_projections_data_enabled:e=>{let t=ht(e);return t=t===1,t},world_tracker_projections_data_enabled_set:(e,t)=>gt(e,t?1:0),world_tracker_projections_data_size:e=>_t(e),world_tracker_projections_data:t=>{let n=vt(t),r=_t(t),i=new Float32Array(r);return i.set(e.HEAPF32.subarray(n/4,r+n/4)),n=i,n},custom_anchor_create:(e,t,n)=>yt(e,t,n),custom_anchor_destroy:()=>{J()},custom_anchor_status:e=>bt(e),custom_anchor_pose_version:e=>xt(e),custom_anchor_pose_raw:t=>{let n=St(t),r=new Float32Array(16);return r.set(e.HEAPF32.subarray(n/4,16+n/4)),n=r,n},custom_anchor_pose_set_from_camera_offset_raw:(e,t,n,r,i)=>Ct(e,t,n,r,i),custom_anchor_pose_set_from_anchor_offset:(e,t,n,r,i,a)=>wt(e,t,n,r,i,a),custom_anchor_pose_set:(t,n)=>{let r=Z(0,n.byteLength);return e.HEAPF32.set(n,r/4),Tt(t,r)},custom_anchor_pose_set_with_parent:(t,n,r)=>{let i=Z(0,n.byteLength);return e.HEAPF32.set(n,i/4),Et(t,i,r)},d3_tracker_create:e=>Dt(e),d3_tracker_destroy:()=>{Ot()}}}var d=class{constructor(e){this._messageSender=e,this._freeBufferPool=[],this._buffer=new ArrayBuffer(16),this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer),this._f64View=new Float64Array(this._buffer),this._u8View=new Uint8Array(this._buffer),this._u8cView=new Uint8ClampedArray(this._buffer),this._u16View=new Uint16Array(this._buffer),this._u32View=new Uint32Array(this._buffer),this._offset=1,this._startOffset=-1,this._timeoutSet=!1,this._appender={int:e=>this.int(e),bool:e=>this.int(e?1:0),float:e=>this.float(e),string:e=>this.string(e),dataWithLength:e=>this.arrayBuffer(e),type:e=>this.int(e),matrix4x4:e=>this.float32ArrayBuffer(e),matrix3x3:e=>this.float32ArrayBuffer(e),floatArray:e=>this.float32ArrayBuffer(e),ucharArray:e=>this.uint8ArrayBuffer(e),identityCoefficients:e=>this.float32ArrayBuffer(e),expressionCoefficients:e=>this.float32ArrayBuffer(e),cameraModel:e=>this.float32ArrayBuffer(e),timestamp:e=>this.double(e),barcodeFormat:e=>this.int(e),faceLandmarkName:e=>this.int(e),instantTrackerTransformOrientation:e=>this.int(e),transformOrientation:e=>this.int(e),planeOrientation:e=>this.int(e),anchorStatus:e=>this.int(e),logLevel:e=>this.int(e),worldScaleMode:e=>this.int(e)},this._freeBufferPool.push(new ArrayBuffer(16)),this._freeBufferPool.push(new ArrayBuffer(16))}bufferReturn(e){this._freeBufferPool.push(e)}_ensureArrayBuffer(e){let t=(this._offset+e+8)*4;if(this._buffer&&this._buffer.byteLength>=t)return;let n;if(!n){let e=t;e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,n=new ArrayBuffer(e)}let r=this._buffer?this._i32View:void 0;this._buffer=n,this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer),this._f64View=new Float64Array(this._buffer),this._u8View=new Uint8Array(this._buffer),this._u8cView=new Uint8ClampedArray(this._buffer),this._u16View=new Uint16Array(this._buffer),this._u32View=new Uint32Array(this._buffer),r&&this._i32View.set(r.subarray(0,this._offset))}sendMessage(e,t){this._ensureArrayBuffer(4),this._startOffset=this._offset,this._i32View[this._offset+1]=e,this._offset+=2,t(this._appender),this._i32View[this._startOffset]=this._offset-this._startOffset,this._startOffset=-1,this._sendOneTime()}_sendOneTime(){this._timeoutSet===!1&&(this._timeoutSet=!0,setTimeout(()=>{this._timeoutSet=!1,this._send()},0))}_send(){if(this._freeBufferPool.length===0){this._sendOneTime();return}this._i32View[0]=this._offset,this._messageSender(this._buffer),this._buffer=void 0,this._buffer=this._freeBufferPool.pop(),this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer),this._f64View=new Float64Array(this._buffer),this._u8View=new Uint8Array(this._buffer),this._u8cView=new Uint8ClampedArray(this._buffer),this._u16View=new Uint16Array(this._buffer),this._u32View=new Uint32Array(this._buffer),this._offset=1,this._startOffset=-1}int(e){this._ensureArrayBuffer(1),this._i32View[this._offset]=e,this._offset++}double(e){this._ensureArrayBuffer(2),this._offset%2==1&&this._offset++,this._f64View[this._offset/2]=e,this._offset+=2}float(e){this._ensureArrayBuffer(1),this._f32View[this._offset]=e,this._offset++}int32Array(e){this._ensureArrayBuffer(e.length);for(let t=0;t<e.length;++t)this._i32View[this._offset+t]=e[t];this._offset+=e.length}float32Array(e){this._ensureArrayBuffer(e.length);for(let t=0;t<e.length;++t)this._f32View[this._offset+t]=e[t];this._offset+=e.length}booleanArray(e){this._ensureArrayBuffer(e.length);for(let t=0;t<e.length;++t)this._i32View[this._offset+t]=e[t]?1:0;this._offset+=e.length}uint8ArrayBuffer(e){this._ensureArrayBuffer(e.byteLength/4),this._i32View[this._offset]=e.byteLength,this._offset++,this._u8View.set(e,this._offset*4),this._offset+=e.byteLength>>2,e.byteLength&3&&this._offset++}arrayBuffer(e){let t=new Uint8Array(e);this.uint8ArrayBuffer(t)}uint8ClampedArrayBuffer(e){this._ensureArrayBuffer(e.byteLength/4),this._i32View[this._offset]=e.byteLength,this._offset++,this._u8cView.set(e,this._offset*4),this._offset+=e.byteLength>>2,e.byteLength&3&&this._offset++}float32ArrayBuffer(e){this._ensureArrayBuffer(e.byteLength/4),this._i32View[this._offset]=e.length,this._offset++,this._f32View.set(e,this._offset),this._offset+=e.length}uint16ArrayBuffer(e){this._ensureArrayBuffer(e.byteLength/4),this._i32View[this._offset]=e.length,this._offset++;let t=this._offset*2;this._u16View.set(e,t),this._offset+=e.length>>1,e.length&1&&this._offset++}int32ArrayBuffer(e){this._ensureArrayBuffer(e.byteLength/4),this._i32View[this._offset]=e.length,this._offset++,this._i32View.set(e,this._offset),this._offset+=e.length}uint32ArrayBuffer(e){this._ensureArrayBuffer(e.byteLength/4),this._i32View[this._offset]=e.length,this._offset++,this._u32View.set(e,this._offset),this._offset+=e.length}string(e){let t=new TextEncoder().encode(e);this._ensureArrayBuffer(t.byteLength/4),this._i32View[this._offset]=t.byteLength,this._offset++,this._u8View.set(t,this._offset*4),this._offset+=t.byteLength>>2,t.byteLength&3&&this._offset++}},f=class{constructor(){this._buffer=new ArrayBuffer(0),this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer),this._f64View=new Float64Array(this._buffer),this._u8View=new Uint8Array(this._buffer),this._u16View=new Uint16Array(this._buffer),this._u32View=new Uint32Array(this._buffer),this._offset=0,this._length=0,this._startOffset=-1,this._processor={int:()=>this._i32View[this._startOffset++],bool:()=>this._i32View[this._startOffset++]===1,type:()=>this._i32View[this._startOffset++],float:()=>this._f32View[this._startOffset++],timestamp:()=>{this._startOffset%2==1&&this._startOffset++;let e=this._f64View[this._startOffset/2];return this._startOffset+=2,e},string:()=>{let e=this._i32View[this._startOffset++],t=new TextDecoder().decode(new Uint8Array(this._buffer,this._startOffset*4,e));return this._startOffset+=e>>2,e&3&&this._startOffset++,t},dataWithLength:()=>{let e=this._i32View[this._startOffset++],t=new Uint8Array(e);return t.set(this._u8View.subarray(this._startOffset*4,this._startOffset*4+e)),this._startOffset+=t.byteLength>>2,t.byteLength&3&&this._startOffset++,t.buffer},ucharArray:()=>{let e=this._i32View[this._startOffset++],t=new Uint8Array(e);return t.set(this._u8View.subarray(this._startOffset*4,this._startOffset*4+e)),this._startOffset+=t.byteLength>>2,t.byteLength&3&&this._startOffset++,t},floatArray:()=>{let e=this._i32View[this._startOffset++],t=new Float32Array(e);return t.set(this._f32View.subarray(this._startOffset,this._startOffset+e)),this._startOffset+=e,t},matrix4x4:()=>{let e=this._i32View[this._startOffset++],t=new Float32Array(e);return t.set(this._f32View.subarray(this._startOffset,this._startOffset+16)),this._startOffset+=e,t},matrix3x3:()=>{let e=this._i32View[this._startOffset++],t=new Float32Array(e);return t.set(this._f32View.subarray(this._startOffset,this._startOffset+9)),this._startOffset+=e,t},identityCoefficients:()=>{let e=this._i32View[this._startOffset++],t=new Float32Array(e);return t.set(this._f32View.subarray(this._startOffset,this._startOffset+50)),this._startOffset+=e,t},expressionCoefficients:()=>{let e=this._i32View[this._startOffset++],t=new Float32Array(e);return t.set(this._f32View.subarray(this._startOffset,this._startOffset+29)),this._startOffset+=e,t},cameraModel:()=>{let e=this._i32View[this._startOffset++],t=new Float32Array(e);return t.set(this._f32View.subarray(this._startOffset,this._startOffset+6)),this._startOffset+=e,t},barcodeFormat:()=>this._i32View[this._startOffset++],worldScaleMode:()=>this._i32View[this._startOffset++],faceLandmarkName:()=>this._i32View[this._startOffset++],instantTrackerTransformOrientation:()=>this._i32View[this._startOffset++],transformOrientation:()=>this._i32View[this._startOffset++],planeOrientation:()=>this._i32View[this._startOffset++],anchorStatus:()=>this._i32View[this._startOffset++],logLevel:()=>this._i32View[this._startOffset++]}}setData(e){this._buffer=e,this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer),this._f64View=new Float64Array(this._buffer),this._u8View=new Uint8Array(this._buffer),this._u16View=new Uint16Array(this._buffer),this._u32View=new Uint32Array(this._buffer),this._offset=0,this._length=0,e.byteLength>=4&&(this._offset=1,this._length=this._i32View[0]),this._startOffset=-1}hasMessage(){return this._offset+1<this._length}forMessages(e){for(;this.hasMessage();){let t=this._i32View[this._offset],n=this._i32View[this._offset+1];this._startOffset=this._offset+2,this._offset+=t,e(n,this._processor)}}},p=class{constructor(e,t){this._impl=e,this._sender=t,this._deserializer=new f,this.serializersByPipelineId=new Map,this._pipeline_id_by_pipeline_id=new Map,this._pipeline_by_instance=new Map,this._pipeline_id_by_camera_source_id=new Map,this._camera_source_by_instance=new Map,this._pipeline_id_by_sequence_source_id=new Map,this._sequence_source_by_instance=new Map,this._pipeline_id_by_image_tracker_id=new Map,this._image_tracker_by_instance=new Map,this._pipeline_id_by_face_tracker_id=new Map,this._face_tracker_by_instance=new Map,this._pipeline_id_by_face_mesh_id=new Map,this._face_mesh_by_instance=new Map,this._pipeline_id_by_face_landmark_id=new Map,this._face_landmark_by_instance=new Map,this._pipeline_id_by_barcode_finder_id=new Map,this._barcode_finder_by_instance=new Map,this._pipeline_id_by_instant_world_tracker_id=new Map,this._instant_world_tracker_by_instance=new Map,this._pipeline_id_by_zapcode_tracker_id=new Map,this._zapcode_tracker_by_instance=new Map,this._pipeline_id_by_world_tracker_id=new Map,this._world_tracker_by_instance=new Map,this._pipeline_id_by_custom_anchor_id=new Map,this._custom_anchor_by_instance=new Map,this._pipeline_id_by_d3_tracker_id=new Map,this._d3_tracker_by_instance=new Map}processBuffer(e){this._deserializer.setData(e),this._deserializer.forMessages((e,t)=>{switch(e){case 39:this._impl.log_level_set(t.logLevel());break;case 36:this._impl.analytics_project_id_set(t.string(),t.string());break;case 32:{let e=t.type(),n=this._impl.pipeline_create();this._pipeline_by_instance.set(e,n),this._pipeline_id_by_pipeline_id.set(e,e),this.serializersByPipelineId.set(e,new d(t=>{this._sender(e,t)}));break}case 33:{let e=t.type(),n=this._pipeline_by_instance.get(e);if(n===void 0)return;this._impl.pipeline_destroy(n),this._pipeline_by_instance.delete(e);break}case 9:{let e=t.type(),n=this._pipeline_by_instance.get(e);if(n===void 0)return;this._impl.pipeline_frame_update(n);break}case 63:{let e=t.type(),n=this._pipeline_by_instance.get(e);if(n===void 0)return;this._impl.pipeline_camera_frame_sharpness_enabled_set(n,t.bool());break}case 8:{let e=t.type(),n=this._pipeline_by_instance.get(e);if(n===void 0)return;this._impl.pipeline_camera_frame_submit(n,t.dataWithLength(),t.int(),t.int(),t.int(),t.matrix4x4(),t.cameraModel(),t.bool(),t.int());break}case 10:{let e=t.type(),n=this._pipeline_by_instance.get(e);if(n===void 0)return;this._impl.pipeline_motion_accelerometer_submit(n,t.timestamp(),t.float(),t.float(),t.float());break}case 12:{let e=t.type(),n=this._pipeline_by_instance.get(e);if(n===void 0)return;this._impl.pipeline_motion_accelerometer_with_gravity_submit_int(n,t.timestamp(),t.timestamp(),t.float(),t.float(),t.float());break}case 11:{let e=t.type(),n=this._pipeline_by_instance.get(e);if(n===void 0)return;this._impl.pipeline_motion_accelerometer_without_gravity_submit_int(n,t.timestamp(),t.timestamp(),t.float(),t.float(),t.float());break}case 15:{let e=t.type(),n=this._pipeline_by_instance.get(e);if(n===void 0)return;this._impl.pipeline_motion_rotation_rate_submit(n,t.timestamp(),t.float(),t.float(),t.float());break}case 13:{let e=t.type(),n=this._pipeline_by_instance.get(e);if(n===void 0)return;this._impl.pipeline_motion_rotation_rate_submit_int(n,t.timestamp(),t.timestamp(),t.float(),t.float(),t.float());break}case 16:{let e=t.type(),n=this._pipeline_by_instance.get(e);if(n===void 0)return;this._impl.pipeline_motion_attitude_submit(n,t.timestamp(),t.float(),t.float(),t.float());break}case 14:{let e=t.type(),n=this._pipeline_by_instance.get(e);if(n===void 0)return;this._impl.pipeline_motion_attitude_submit_int(n,t.timestamp(),t.timestamp(),t.float(),t.float(),t.float());break}case 17:{let e=t.type(),n=this._pipeline_by_instance.get(e);if(n===void 0)return;this._impl.pipeline_motion_relative_orientation_submit_int(n,t.timestamp(),t.timestamp(),t.float(),t.float(),t.float(),t.float());break}case 18:{let e=t.type(),n=this._pipeline_by_instance.get(e);if(n===void 0)return;this._impl.pipeline_motion_attitude_matrix_submit(n,t.matrix4x4());break}case 34:{let e=t.type(),n=t.type(),r=this._pipeline_by_instance.get(n),i=t.string(),a=this._impl.camera_source_create(r,i);this._camera_source_by_instance.set(e,a),this._pipeline_id_by_camera_source_id.set(e,n);break}case 35:{let e=t.type(),n=this._camera_source_by_instance.get(e);if(n===void 0)return;this._impl.camera_source_destroy(n),this._camera_source_by_instance.delete(e);break}case 40:{let e=t.type(),n=t.type(),r=this._pipeline_by_instance.get(n),i=this._impl.sequence_source_create(r);this._sequence_source_by_instance.set(e,i),this._pipeline_id_by_sequence_source_id.set(e,n);break}case 41:{let e=t.type(),n=this._sequence_source_by_instance.get(e);if(n===void 0)return;this._impl.sequence_source_destroy(n),this._sequence_source_by_instance.delete(e);break}case 2:{let e=t.type(),n=t.type(),r=this._pipeline_by_instance.get(n),i=this._impl.image_tracker_create(r);this._image_tracker_by_instance.set(e,i),this._pipeline_id_by_image_tracker_id.set(e,n);break}case 19:{let e=t.type(),n=this._image_tracker_by_instance.get(e);if(n===void 0)return;this._impl.image_tracker_destroy(n),this._image_tracker_by_instance.delete(e);break}case 4:{let e=t.type(),n=this._image_tracker_by_instance.get(e);if(n===void 0)return;this._impl.image_tracker_target_load_from_memory(n,t.dataWithLength());break}case 3:{let e=t.type(),n=this._image_tracker_by_instance.get(e);if(n===void 0)return;this._impl.image_tracker_enabled_set(n,t.bool());break}case 25:{let e=t.type(),n=t.type(),r=this._pipeline_by_instance.get(n),i=this._impl.face_tracker_create(r);this._face_tracker_by_instance.set(e,i),this._pipeline_id_by_face_tracker_id.set(e,n);break}case 26:{let e=t.type(),n=this._face_tracker_by_instance.get(e);if(n===void 0)return;this._impl.face_tracker_destroy(n),this._face_tracker_by_instance.delete(e);break}case 27:{let e=t.type(),n=this._face_tracker_by_instance.get(e);if(n===void 0)return;this._impl.face_tracker_model_load_from_memory(n,t.dataWithLength());break}case 28:{let e=t.type(),n=this._face_tracker_by_instance.get(e);if(n===void 0)return;this._impl.face_tracker_enabled_set(n,t.bool());break}case 29:{let e=t.type(),n=this._face_tracker_by_instance.get(e);if(n===void 0)return;this._impl.face_tracker_max_faces_set(n,t.int());break}case 30:{let e=t.type(),n=this._impl.face_mesh_create();this._face_mesh_by_instance.set(e,n);break}case 31:{let e=t.type(),n=this._face_mesh_by_instance.get(e);if(n===void 0)return;this._impl.face_mesh_destroy(n),this._face_mesh_by_instance.delete(e);break}case 37:{let e=t.type(),n=t.faceLandmarkName(),r=this._impl.face_landmark_create(n);this._face_landmark_by_instance.set(e,r);break}case 38:{let e=t.type(),n=this._face_landmark_by_instance.get(e);if(n===void 0)return;this._impl.face_landmark_destroy(n),this._face_landmark_by_instance.delete(e);break}case 21:{let e=t.type(),n=t.type(),r=this._pipeline_by_instance.get(n),i=this._impl.barcode_finder_create(r);this._barcode_finder_by_instance.set(e,i),this._pipeline_id_by_barcode_finder_id.set(e,n);break}case 22:{let e=t.type(),n=this._barcode_finder_by_instance.get(e);if(n===void 0)return;this._impl.barcode_finder_destroy(n),this._barcode_finder_by_instance.delete(e);break}case 23:{let e=t.type(),n=this._barcode_finder_by_instance.get(e);if(n===void 0)return;this._impl.barcode_finder_enabled_set(n,t.bool());break}case 24:{let e=t.type(),n=this._barcode_finder_by_instance.get(e);if(n===void 0)return;this._impl.barcode_finder_formats_set(n,t.barcodeFormat());break}case 5:{let e=t.type(),n=t.type(),r=this._pipeline_by_instance.get(n),i=this._impl.instant_world_tracker_create(r);this._instant_world_tracker_by_instance.set(e,i),this._pipeline_id_by_instant_world_tracker_id.set(e,n);break}case 20:{let e=t.type(),n=this._instant_world_tracker_by_instance.get(e);if(n===void 0)return;this._impl.instant_world_tracker_destroy(n),this._instant_world_tracker_by_instance.delete(e);break}case 6:{let e=t.type(),n=this._instant_world_tracker_by_instance.get(e);if(n===void 0)return;this._impl.instant_world_tracker_enabled_set(n,t.bool());break}case 7:{let e=t.type(),n=this._instant_world_tracker_by_instance.get(e);if(n===void 0)return;this._impl.instant_world_tracker_anchor_pose_set_from_camera_offset_raw(n,t.float(),t.float(),t.float(),t.instantTrackerTransformOrientation());break}case 42:{let e=t.type(),n=t.type(),r=this._pipeline_by_instance.get(n),i=this._impl.zapcode_tracker_create(r);this._zapcode_tracker_by_instance.set(e,i),this._pipeline_id_by_zapcode_tracker_id.set(e,n);break}case 45:{let e=t.type(),n=this._zapcode_tracker_by_instance.get(e);if(n===void 0)return;this._impl.zapcode_tracker_destroy(n),this._zapcode_tracker_by_instance.delete(e);break}case 44:{let e=t.type(),n=this._zapcode_tracker_by_instance.get(e);if(n===void 0)return;this._impl.zapcode_tracker_target_load_from_memory(n,t.dataWithLength());break}case 43:{let e=t.type(),n=this._zapcode_tracker_by_instance.get(e);if(n===void 0)return;this._impl.zapcode_tracker_enabled_set(n,t.bool());break}case 46:{let e=t.type(),n=t.type(),r=this._pipeline_by_instance.get(n),i=this._impl.world_tracker_create(r);this._world_tracker_by_instance.set(e,i),this._pipeline_id_by_world_tracker_id.set(e,n);break}case 47:{let e=t.type(),n=this._world_tracker_by_instance.get(e);if(n===void 0)return;this._impl.world_tracker_destroy(n),this._world_tracker_by_instance.delete(e);break}case 48:{let e=t.type(),n=this._world_tracker_by_instance.get(e);if(n===void 0)return;this._impl.world_tracker_enabled_set(n,t.bool());break}case 62:{let e=t.type(),n=this._world_tracker_by_instance.get(e);if(n===void 0)return;this._impl.world_tracker_scale_mode_set(n,t.worldScaleMode());break}case 49:{let e=t.type(),n=this._world_tracker_by_instance.get(e);if(n===void 0)return;this._impl.world_tracker_horizontal_plane_detection_enabled_set(n,t.bool());break}case 50:{let e=t.type(),n=this._world_tracker_by_instance.get(e);if(n===void 0)return;this._impl.world_tracker_vertical_plane_detection_enabled_set(n,t.bool());break}case 51:{let e=t.type(),n=this._world_tracker_by_instance.get(e);if(n===void 0)return;this._impl.world_tracker_reset(n);break}case 52:{let e=t.type(),n=this._world_tracker_by_instance.get(e);if(n===void 0)return;this._impl.world_tracker_tracks_data_enabled_set(n,t.bool());break}case 53:{let e=t.type(),n=this._world_tracker_by_instance.get(e);if(n===void 0)return;this._impl.world_tracker_projections_data_enabled_set(n,t.bool());break}case 54:{let e=t.type(),n=t.type(),r=this._pipeline_by_instance.get(n),i=t.type(),a=this._world_tracker_by_instance.get(i),o=t.string(),s=this._impl.custom_anchor_create(r,a,o);this._custom_anchor_by_instance.set(e,s),this._pipeline_id_by_custom_anchor_id.set(e,n);break}case 55:{let e=t.type(),n=this._custom_anchor_by_instance.get(e);if(n===void 0)return;this._impl.custom_anchor_destroy(n),this._custom_anchor_by_instance.delete(e);break}case 56:{let e=t.type(),n=this._custom_anchor_by_instance.get(e);if(n===void 0)return;this._impl.custom_anchor_pose_set_from_camera_offset_raw(n,t.float(),t.float(),t.float(),t.transformOrientation());break}case 57:{let e=t.type(),n=this._custom_anchor_by_instance.get(e);if(n===void 0)return;this._impl.custom_anchor_pose_set_from_anchor_offset(n,t.string(),t.float(),t.float(),t.float(),t.transformOrientation());break}case 58:{let e=t.type(),n=this._custom_anchor_by_instance.get(e);if(n===void 0)return;this._impl.custom_anchor_pose_set(n,t.matrix4x4());break}case 59:{let e=t.type(),n=this._custom_anchor_by_instance.get(e);if(n===void 0)return;this._impl.custom_anchor_pose_set_with_parent(n,t.matrix4x4(),t.string());break}case 60:{let e=t.type(),n=t.type(),r=this._pipeline_by_instance.get(n),i=this._impl.d3_tracker_create(r);this._d3_tracker_by_instance.set(e,i),this._pipeline_id_by_d3_tracker_id.set(e,n);break}case 61:{let e=t.type(),n=this._d3_tracker_by_instance.get(e);if(n===void 0)return;this._impl.d3_tracker_destroy(n),this._d3_tracker_by_instance.delete(e);break}}})}exploreState(){for(let[e,t]of this._pipeline_by_instance){let n=this._pipeline_id_by_pipeline_id.get(e);if(!n)continue;let r=this.serializersByPipelineId.get(n);r&&(r.sendMessage(10,n=>{n.type(e),n.int(this._impl.pipeline_frame_number(t))}),r.sendMessage(6,n=>{n.type(e),n.cameraModel(this._impl.pipeline_camera_model(t))}),r.sendMessage(7,n=>{n.type(e),n.int(this._impl.pipeline_camera_data_width(t))}),r.sendMessage(8,n=>{n.type(e),n.int(this._impl.pipeline_camera_data_height(t))}),r.sendMessage(9,n=>{n.type(e),n.float(this._impl.pipeline_camera_frame_sharpness(t))}),r.sendMessage(5,n=>{n.type(e),n.int(this._impl.pipeline_camera_frame_user_data(t))}),r.sendMessage(14,n=>{n.type(e),n.matrix4x4(this._impl.pipeline_camera_frame_camera_attitude(t))}),r.sendMessage(15,n=>{n.type(e),n.matrix4x4(this._impl.pipeline_camera_frame_device_attitude(t))}))}for(let[e,t]of this._camera_source_by_instance){let t=this._pipeline_id_by_camera_source_id.get(e);t&&this.serializersByPipelineId.get(t)}for(let[e,t]of this._sequence_source_by_instance){let t=this._pipeline_id_by_sequence_source_id.get(e);t&&this.serializersByPipelineId.get(t)}for(let[e,t]of this._image_tracker_by_instance){let n=this._pipeline_id_by_image_tracker_id.get(e);if(!n)continue;let r=this.serializersByPipelineId.get(n);if(r){r.sendMessage(22,n=>{n.type(e),n.int(this._impl.image_tracker_target_loaded_version(t))}),r.sendMessage(1,n=>{n.type(e),n.int(this._impl.image_tracker_anchor_count(t))});for(let n=0;n<this._impl.image_tracker_anchor_count(t);n++)r.sendMessage(2,r=>{r.type(e),r.int(n),r.string(this._impl.image_tracker_anchor_id(t,n))});for(let n=0;n<this._impl.image_tracker_anchor_count(t);n++)r.sendMessage(3,r=>{r.type(e),r.int(n),r.matrix4x4(this._impl.image_tracker_anchor_pose_raw(t,n))})}}for(let[e,t]of this._face_tracker_by_instance){let n=this._pipeline_id_by_face_tracker_id.get(e);if(!n)continue;let r=this.serializersByPipelineId.get(n);if(r){r.sendMessage(21,n=>{n.type(e),n.int(this._impl.face_tracker_model_loaded_version(t))}),r.sendMessage(16,n=>{n.type(e),n.int(this._impl.face_tracker_anchor_count(t))});for(let n=0;n<this._impl.face_tracker_anchor_count(t);n++)r.sendMessage(17,r=>{r.type(e),r.int(n),r.string(this._impl.face_tracker_anchor_id(t,n))});for(let n=0;n<this._impl.face_tracker_anchor_count(t);n++)r.sendMessage(18,r=>{r.type(e),r.int(n),r.matrix4x4(this._impl.face_tracker_anchor_pose_raw(t,n))});for(let n=0;n<this._impl.face_tracker_anchor_count(t);n++)r.sendMessage(19,r=>{r.type(e),r.int(n),r.identityCoefficients(this._impl.face_tracker_anchor_identity_coefficients(t,n))});for(let n=0;n<this._impl.face_tracker_anchor_count(t);n++)r.sendMessage(20,r=>{r.type(e),r.int(n),r.expressionCoefficients(this._impl.face_tracker_anchor_expression_coefficients(t,n))})}}for(let[e,t]of this._face_mesh_by_instance){let t=this._pipeline_id_by_face_mesh_id.get(e);t&&this.serializersByPipelineId.get(t)}for(let[e,t]of this._face_landmark_by_instance){let t=this._pipeline_id_by_face_landmark_id.get(e);t&&this.serializersByPipelineId.get(t)}for(let[e,t]of this._barcode_finder_by_instance){let n=this._pipeline_id_by_barcode_finder_id.get(e);if(!n)continue;let r=this.serializersByPipelineId.get(n);if(r){r.sendMessage(11,n=>{n.type(e),n.int(this._impl.barcode_finder_found_number(t))});for(let n=0;n<this._impl.barcode_finder_found_number(t);n++)r.sendMessage(12,r=>{r.type(e),r.int(n),r.string(this._impl.barcode_finder_found_text(t,n))});for(let n=0;n<this._impl.barcode_finder_found_number(t);n++)r.sendMessage(13,r=>{r.type(e),r.int(n),r.barcodeFormat(this._impl.barcode_finder_found_format(t,n))})}}for(let[e,t]of this._instant_world_tracker_by_instance){let n=this._pipeline_id_by_instant_world_tracker_id.get(e);if(!n)continue;let r=this.serializersByPipelineId.get(n);r&&r.sendMessage(4,n=>{n.type(e),n.matrix4x4(this._impl.instant_world_tracker_anchor_pose_raw(t))})}for(let[e,t]of this._zapcode_tracker_by_instance){let n=this._pipeline_id_by_zapcode_tracker_id.get(e);if(!n)continue;let r=this.serializersByPipelineId.get(n);if(r){r.sendMessage(27,n=>{n.type(e),n.int(this._impl.zapcode_tracker_target_loaded_version(t))}),r.sendMessage(24,n=>{n.type(e),n.int(this._impl.zapcode_tracker_anchor_count(t))});for(let n=0;n<this._impl.zapcode_tracker_anchor_count(t);n++)r.sendMessage(25,r=>{r.type(e),r.int(n),r.string(this._impl.zapcode_tracker_anchor_id(t,n))});for(let n=0;n<this._impl.zapcode_tracker_anchor_count(t);n++)r.sendMessage(26,r=>{r.type(e),r.int(n),r.matrix4x4(this._impl.zapcode_tracker_anchor_pose_raw(t,n))})}}for(let[e,t]of this._world_tracker_by_instance){let n=this._pipeline_id_by_world_tracker_id.get(e);if(!n)continue;let r=this.serializersByPipelineId.get(n);if(r){r.sendMessage(28,n=>{n.type(e),n.int(this._impl.world_tracker_session_number(t))}),r.sendMessage(44,n=>{n.type(e),n.int(this._impl.world_tracker_quality(t))}),r.sendMessage(29,n=>{n.type(e),n.int(this._impl.world_tracker_plane_anchor_count(t))});for(let n=0;n<this._impl.world_tracker_plane_anchor_count(t);n++)r.sendMessage(37,r=>{r.type(e),r.int(n),r.string(this._impl.world_tracker_plane_anchor_id(t,n))});for(let n=0;n<this._impl.world_tracker_plane_anchor_count(t);n++)r.sendMessage(30,r=>{r.type(e),r.int(n),r.matrix4x4(this._impl.world_tracker_plane_anchor_pose_raw(t,n))});for(let n=0;n<this._impl.world_tracker_plane_anchor_count(t);n++)r.sendMessage(32,r=>{r.type(e),r.int(n),r.anchorStatus(this._impl.world_tracker_plane_anchor_status(t,n))});for(let n=0;n<this._impl.world_tracker_plane_anchor_count(t);n++)r.sendMessage(33,r=>{r.type(e),r.int(n),r.int(this._impl.world_tracker_plane_anchor_polygon_data_size(t,n))});for(let n=0;n<this._impl.world_tracker_plane_anchor_count(t);n++)r.sendMessage(34,r=>{r.type(e),r.int(n),r.floatArray(this._impl.world_tracker_plane_anchor_polygon_data(t,n))});for(let n=0;n<this._impl.world_tracker_plane_anchor_count(t);n++)r.sendMessage(35,r=>{r.type(e),r.int(n),r.int(this._impl.world_tracker_plane_anchor_polygon_version(t,n))});for(let n=0;n<this._impl.world_tracker_plane_anchor_count(t);n++)r.sendMessage(36,r=>{r.type(e),r.int(n),r.planeOrientation(this._impl.world_tracker_plane_anchor_orientation(t,n))});r.sendMessage(40,n=>{n.type(e),n.anchorStatus(this._impl.world_tracker_world_anchor_status(t))}),r.sendMessage(39,n=>{n.type(e),n.string(this._impl.world_tracker_world_anchor_id(t))}),r.sendMessage(38,n=>{n.type(e),n.matrix4x4(this._impl.world_tracker_world_anchor_pose_raw(t))}),r.sendMessage(42,n=>{n.type(e),n.string(this._impl.world_tracker_ground_anchor_id(t))}),r.sendMessage(43,n=>{n.type(e),n.anchorStatus(this._impl.world_tracker_ground_anchor_status(t))}),r.sendMessage(41,n=>{n.type(e),n.matrix4x4(this._impl.world_tracker_ground_anchor_pose_raw(t))}),r.sendMessage(47,n=>{n.type(e),n.int(this._impl.world_tracker_tracks_data_size(t))}),r.sendMessage(46,n=>{n.type(e),n.floatArray(this._impl.world_tracker_tracks_data(t))}),r.sendMessage(49,n=>{n.type(e),n.int(this._impl.world_tracker_tracks_type_data_size(t))}),r.sendMessage(48,n=>{n.type(e),n.ucharArray(this._impl.world_tracker_tracks_type_data(t))}),r.sendMessage(52,n=>{n.type(e),n.int(this._impl.world_tracker_projections_data_size(t))}),r.sendMessage(51,n=>{n.type(e),n.floatArray(this._impl.world_tracker_projections_data(t))})}}for(let[e,t]of this._custom_anchor_by_instance){let n=this._pipeline_id_by_custom_anchor_id.get(e);if(!n)continue;let r=this.serializersByPipelineId.get(n);r&&(r.sendMessage(54,n=>{n.type(e),n.anchorStatus(this._impl.custom_anchor_status(t))}),r.sendMessage(55,n=>{n.type(e),n.int(this._impl.custom_anchor_pose_version(t))}),r.sendMessage(53,n=>{n.type(e),n.matrix4x4(this._impl.custom_anchor_pose_raw(t))}))}for(let[e,t]of this._d3_tracker_by_instance){let t=this._pipeline_id_by_d3_tracker_id.get(e);t&&this.serializersByPipelineId.get(t)}}},m=class{constructor(){this._funcs=[]}bind(e){this._funcs.push(e)}unbind(e){let t=this._funcs.indexOf(e);t>-1&&this._funcs.splice(t,1)}emit(){for(var e=0,t=this._funcs.length;e<t;e++)this._funcs[e]()}},h=class{constructor(){this._funcs=[]}bind(e){this._funcs.push(e)}unbind(e){let t=this._funcs.indexOf(e);t>-1&&this._funcs.splice(t,1)}emit(e){for(var t=0,n=this._funcs.length;t<n;t++)this._funcs[t](e)}},g=class{constructor(){this.onOutgoingMessage=new m,this.onIncomingMessage=new h,this._outgoingMessages=[]}postIncomingMessage(e){this.onIncomingMessage.emit(e)}postOutgoingMessage(e,t){this._outgoingMessages.push({msg:e,transferables:t}),this.onOutgoingMessage.emit()}getOutgoingMessages(){let e=this._outgoingMessages;return this._outgoingMessages=[],e}},_=typeof Float32Array<`u`?Float32Array:Array;Math.PI/180,Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function v(){var e=new _(16);return _!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function y(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function b(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var x;(function(e){e[e.UNKNOWN=131072]=`UNKNOWN`,e[e.AZTEC=1]=`AZTEC`,e[e.CODABAR=2]=`CODABAR`,e[e.CODE_39=4]=`CODE_39`,e[e.CODE_93=8]=`CODE_93`,e[e.CODE_128=16]=`CODE_128`,e[e.DATA_MATRIX=32]=`DATA_MATRIX`,e[e.EAN_8=64]=`EAN_8`,e[e.EAN_13=128]=`EAN_13`,e[e.ITF=256]=`ITF`,e[e.MAXICODE=512]=`MAXICODE`,e[e.PDF_417=1024]=`PDF_417`,e[e.QR_CODE=2048]=`QR_CODE`,e[e.RSS_14=4096]=`RSS_14`,e[e.RSS_EXPANDED=8192]=`RSS_EXPANDED`,e[e.UPC_A=16384]=`UPC_A`,e[e.UPC_E=32768]=`UPC_E`,e[e.UPC_EAN_EXTENSION=65536]=`UPC_EAN_EXTENSION`,e[e.ALL=131071]=`ALL`})(x||={});var S;(function(e){e[e.EYE_LEFT=0]=`EYE_LEFT`,e[e.EYE_RIGHT=1]=`EYE_RIGHT`,e[e.EAR_LEFT=2]=`EAR_LEFT`,e[e.EAR_RIGHT=3]=`EAR_RIGHT`,e[e.NOSE_BRIDGE=4]=`NOSE_BRIDGE`,e[e.NOSE_TIP=5]=`NOSE_TIP`,e[e.NOSE_BASE=6]=`NOSE_BASE`,e[e.LIP_TOP=7]=`LIP_TOP`,e[e.LIP_BOTTOM=8]=`LIP_BOTTOM`,e[e.MOUTH_CENTER=9]=`MOUTH_CENTER`,e[e.CHIN=10]=`CHIN`,e[e.EYEBROW_LEFT=11]=`EYEBROW_LEFT`,e[e.EYEBROW_RIGHT=12]=`EYEBROW_RIGHT`})(S||={});var C;(function(e){e[e.WORLD=3]=`WORLD`,e[e.MINUS_Z_AWAY_FROM_USER=4]=`MINUS_Z_AWAY_FROM_USER`,e[e.MINUS_Z_HEADING=5]=`MINUS_Z_HEADING`,e[e.UNCHANGED=6]=`UNCHANGED`})(C||={});var w;(function(e){e[e.UNCHANGED=0]=`UNCHANGED`,e[e.WORLD=1]=`WORLD`,e[e.PARENT=2]=`PARENT`,e[e.Z_TOWARDS_CAMERA=3]=`Z_TOWARDS_CAMERA`})(w||={});var T;(function(e){e[e.LOG_LEVEL_NONE=0]=`LOG_LEVEL_NONE`,e[e.LOG_LEVEL_ERROR=1]=`LOG_LEVEL_ERROR`,e[e.LOG_LEVEL_WARNING=2]=`LOG_LEVEL_WARNING`,e[e.LOG_LEVEL_VERBOSE=3]=`LOG_LEVEL_VERBOSE`})(T||={});var E;(function(e){e[e.FRAME_PIXEL_FORMAT_I420=0]=`FRAME_PIXEL_FORMAT_I420`,e[e.FRAME_PIXEL_FORMAT_I420A=1]=`FRAME_PIXEL_FORMAT_I420A`,e[e.FRAME_PIXEL_FORMAT_I422=2]=`FRAME_PIXEL_FORMAT_I422`,e[e.FRAME_PIXEL_FORMAT_I444=3]=`FRAME_PIXEL_FORMAT_I444`,e[e.FRAME_PIXEL_FORMAT_NV12=4]=`FRAME_PIXEL_FORMAT_NV12`,e[e.FRAME_PIXEL_FORMAT_RGBA=5]=`FRAME_PIXEL_FORMAT_RGBA`,e[e.FRAME_PIXEL_FORMAT_BGRA=6]=`FRAME_PIXEL_FORMAT_BGRA`,e[e.FRAME_PIXEL_FORMAT_Y=7]=`FRAME_PIXEL_FORMAT_Y`})(E||={});var D;(function(e){e[e.IMAGE_TRACKER_TYPE_PLANAR=0]=`IMAGE_TRACKER_TYPE_PLANAR`,e[e.IMAGE_TRACKER_TYPE_CYLINDRICAL=1]=`IMAGE_TRACKER_TYPE_CYLINDRICAL`,e[e.IMAGE_TRACKER_TYPE_CONICAL=2]=`IMAGE_TRACKER_TYPE_CONICAL`})(D||={});var O;(function(e){e[e.WORLD_TRACKER_QUALITY_INITIALIZING=0]=`WORLD_TRACKER_QUALITY_INITIALIZING`,e[e.WORLD_TRACKER_QUALITY_GOOD=1]=`WORLD_TRACKER_QUALITY_GOOD`,e[e.WORLD_TRACKER_QUALITY_LIMITED=2]=`WORLD_TRACKER_QUALITY_LIMITED`,e[e.WORLD_TRACKER_QUALITY_INACTIVE=3]=`WORLD_TRACKER_QUALITY_INACTIVE`})(O||={});var k;(function(e){e[e.ANCHOR_STATUS_INITIALIZING=0]=`ANCHOR_STATUS_INITIALIZING`,e[e.ANCHOR_STATUS_TRACKING=1]=`ANCHOR_STATUS_TRACKING`,e[e.ANCHOR_STATUS_PAUSED=2]=`ANCHOR_STATUS_PAUSED`,e[e.ANCHOR_STATUS_STOPPED=3]=`ANCHOR_STATUS_STOPPED`})(k||={});var ee;(function(e){e[e.PLANE_ORIENTATION_HORIZONTAL=0]=`PLANE_ORIENTATION_HORIZONTAL`,e[e.PLANE_ORIENTATION_VERTICAL=1]=`PLANE_ORIENTATION_VERTICAL`})(ee||={});var A;(function(e){e[e.DEFAULT=0]=`DEFAULT`,e[e.HIGH=1]=`HIGH`})(A||={});var te;(function(e){e[e.DEFAULT=0]=`DEFAULT`,e[e.ABSOLUTE=1]=`ABSOLUTE`,e[e.MEDIAN=2]=`MEDIAN`})(te||={});let j=new Map;var ne=class e{constructor(e){this._gl=e,this._viewports=[],this._underlyingViewport=this._gl.viewport,this._viewports.push(this._gl.getParameter(this._gl.VIEWPORT)),this._gl.viewport=(e,t,n,r)=>{this._viewports[this._viewports.length-1]=[e,t,n,r],this._underlyingViewport.call(this._gl,e,t,n,r)}}static get(t){let n=j.get(t);return n||(n=new e(t),j.set(t,n)),n}push(){this._viewports.push(this._viewports[this._viewports.length-1])}pop(){let e=this._viewports.pop(),t=this._viewports[this._viewports.length-1];(!e||e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3])&&this._underlyingViewport.call(this._gl,t[0],t[1],t[2],t[3])}},re=c(o(((e,t)=>{(function(n,r){var i=`1.0.33`,a=``,o=`?`,s=`function`,c=`undefined`,l=`object`,u=`string`,d=`major`,f=`model`,p=`name`,m=`type`,h=`vendor`,g=`version`,_=`architecture`,v=`console`,y=`mobile`,b=`tablet`,x=`smarttv`,S=`wearable`,C=`embedded`,w=350,T=`Amazon`,E=`Apple`,D=`ASUS`,O=`BlackBerry`,k=`Browser`,ee=`Chrome`,A=`Edge`,te=`Firefox`,j=`Google`,ne=`Huawei`,re=`LG`,ie=`Microsoft`,M=`Motorola`,ae=`Opera`,oe=`Samsung`,se=`Sharp`,N=`Sony`,ce=`Xiaomi`,le=`Zebra`,ue=`Facebook`,de=function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},fe=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},P=function(e,t){return typeof e===u?F(t).indexOf(F(e))!==-1:!1},F=function(e){return e.toLowerCase()},pe=function(e){return typeof e===u?e.replace(/[^\d\.]/g,a).split(`.`)[0]:r},I=function(e,t){if(typeof e===u)return e=e.replace(/^\s\s*/,a),typeof t===c?e:e.substring(0,w)},me=function(e,t){for(var n=0,i,a,o,c,u,d;n<t.length&&!u;){var f=t[n],p=t[n+1];for(i=a=0;i<f.length&&!u;)if(u=f[i++].exec(e),u)for(o=0;o<p.length;o++)d=u[++a],c=p[o],typeof c===l&&c.length>0?c.length===2?typeof c[1]==s?this[c[0]]=c[1].call(this,d):this[c[0]]=c[1]:c.length===3?typeof c[1]===s&&!(c[1].exec&&c[1].test)?this[c[0]]=d?c[1].call(this,d,c[2]):r:this[c[0]]=d?d.replace(c[1],c[2]):r:c.length===4&&(this[c[0]]=d?c[3].call(this,d.replace(c[1],c[2])):r):this[c]=d||r;n+=2}},he=function(e,t){for(var n in t)if(typeof t[n]===l&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(P(t[n][i],e))return n===o?r:n}else if(P(t[n],e))return n===o?r:n;return e},ge={"1.0":`/8`,"1.2":`/1`,"1.3":`/3`,"2.0":`/412`,"2.0.2":`/416`,"2.0.3":`/417`,"2.0.4":`/419`,"?":`/`},L={ME:`4.90`,"NT 3.11":`NT3.51`,"NT 4.0":`NT4.0`,2e3:`NT 5.0`,XP:[`NT 5.1`,`NT 5.2`],Vista:`NT 6.0`,7:`NT 6.1`,8:`NT 6.2`,"8.1":`NT 6.3`,10:[`NT 6.4`,`NT 10.0`],RT:`ARM`},R={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[g,[p,`Chrome`]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[g,[p,`Edge`]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,g],[/opios[\/ ]+([\w\.]+)/i],[g,[p,ae+` Mini`]],[/\bopr\/([\w\.]+)/i],[g,[p,ae]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[p,g],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[g,[p,`UC`+k]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[g,[p,`WeChat(Win) Desktop`]],[/micromessenger\/([\w\.]+)/i],[g,[p,`WeChat`]],[/konqueror\/([\w\.]+)/i],[g,[p,`Konqueror`]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[g,[p,`IE`]],[/yabrowser\/([\w\.]+)/i],[g,[p,`Yandex`]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,`$1 Secure `+k],g],[/\bfocus\/([\w\.]+)/i],[g,[p,te+` Focus`]],[/\bopt\/([\w\.]+)/i],[g,[p,ae+` Touch`]],[/coc_coc\w+\/([\w\.]+)/i],[g,[p,`Coc Coc`]],[/dolfin\/([\w\.]+)/i],[g,[p,`Dolphin`]],[/coast\/([\w\.]+)/i],[g,[p,ae+` Coast`]],[/miuibrowser\/([\w\.]+)/i],[g,[p,`MIUI `+k]],[/fxios\/([-\w\.]+)/i],[g,[p,te]],[/\bqihu|(qi?ho?o?|360)browser/i],[[p,`360 `+k]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[p,/(.+)/,`$1 `+k],g],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g,` `],g],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[p,g],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,ue],g],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[p,g],[/\bgsa\/([\w\.]+) .*safari\//i],[g,[p,`GSA`]],[/headlesschrome(?:\/([\w\.]+)| )/i],[g,[p,ee+` Headless`]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,ee+` WebView`],g],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[g,[p,`Android `+k]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,g],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[g,[p,`Mobile Safari`]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[g,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[g,he,ge]],[/(webkit|khtml)\/([\w\.]+)/i],[p,g],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,`Netscape`],g],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[g,[p,te+` Reality`]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[p,g],[/(cobalt)\/([\w\.]+)/i],[p,[g,/master.|lts./,``]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[_,`amd64`]],[/(ia32(?=;))/i],[[_,F]],[/((?:i[346]|x)86)[;\)]/i],[[_,`ia32`]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[_,`arm64`]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[_,`armhf`]],[/windows (ce|mobile); ppc;/i],[[_,`arm`]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[_,/ower/,a,F]],[/(sun4\w)[;\)]/i],[[_,`sparc`]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[_,F]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[h,oe],[m,b]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[f,[h,oe],[m,y]],[/\((ip(?:hone|od)[\w ]*);/i],[f,[h,E],[m,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[h,E],[m,b]],[/(macintosh);/i],[f,[h,E]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[h,ne],[m,b]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[f,[h,ne],[m,y]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[f,/_/g,` `],[h,ce],[m,y]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g,` `],[h,ce],[m,b]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[f,[h,`OPPO`],[m,y]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[h,`Vivo`],[m,y]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[f,[h,`Realme`],[m,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[h,M],[m,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[h,M],[m,b]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[h,re],[m,b]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[h,re],[m,y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[h,`Lenovo`],[m,b]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g,` `],[h,`Nokia`],[m,y]],[/(pixel c)\b/i],[f,[h,j],[m,b]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[h,j],[m,y]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[h,N],[m,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,`Xperia Tablet`],[h,N],[m,b]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[h,`OnePlus`],[m,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[h,T],[m,b]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,`Fire Phone $1`],[h,T],[m,y]],[/(playbook);[-\w\),; ]+(rim)/i],[f,h,[m,b]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[h,O],[m,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[h,D],[m,b]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[h,D],[m,y]],[/(nexus 9)/i],[f,[h,`HTC`],[m,b]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[h,[f,/_/g,` `],[m,y]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[h,`Acer`],[m,b]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[h,`Meizu`],[m,y]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[h,se],[m,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[h,f,[m,y]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[h,f,[m,b]],[/(surface duo)/i],[f,[h,ie],[m,b]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[h,`Fairphone`],[m,y]],[/(u304aa)/i],[f,[h,`AT&T`],[m,y]],[/\bsie-(\w*)/i],[f,[h,`Siemens`],[m,y]],[/\b(rct\w+) b/i],[f,[h,`RCA`],[m,b]],[/\b(venue[\d ]{2,7}) b/i],[f,[h,`Dell`],[m,b]],[/\b(q(?:mv|ta)\w+) b/i],[f,[h,`Verizon`],[m,b]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[h,`Barnes & Noble`],[m,b]],[/\b(tm\d{3}\w+) b/i],[f,[h,`NuVision`],[m,b]],[/\b(k88) b/i],[f,[h,`ZTE`],[m,b]],[/\b(nx\d{3}j) b/i],[f,[h,`ZTE`],[m,y]],[/\b(gen\d{3}) b.+49h/i],[f,[h,`Swiss`],[m,y]],[/\b(zur\d{3}) b/i],[f,[h,`Swiss`],[m,b]],[/\b((zeki)?tb.*\b) b/i],[f,[h,`Zeki`],[m,b]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[h,`Dragon Touch`],f,[m,b]],[/\b(ns-?\w{0,9}) b/i],[f,[h,`Insignia`],[m,b]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[h,`NextBook`],[m,b]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[h,`Voice`],f,[m,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[h,`LvTel`],f,[m,y]],[/\b(ph-1) /i],[f,[h,`Essential`],[m,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[h,`Envizen`],[m,b]],[/\b(trio[-\w\. ]+) b/i],[f,[h,`MachSpeed`],[m,b]],[/\btu_(1491) b/i],[f,[h,`Rotor`],[m,b]],[/(shield[\w ]+) b/i],[f,[h,`Nvidia`],[m,b]],[/(sprint) (\w+)/i],[h,f,[m,y]],[/(kin\.[onetw]{3})/i],[[f,/\./g,` `],[h,ie],[m,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[h,le],[m,b]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[h,le],[m,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[h,f,[m,v]],[/droid.+; (shield) bui/i],[f,[h,`Nvidia`],[m,v]],[/(playstation [345portablevi]+)/i],[f,[h,N],[m,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[h,ie],[m,v]],[/smart-tv.+(samsung)/i],[h,[m,x]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,`SmartTV`],[h,oe],[m,x]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,re],[m,x]],[/(apple) ?tv/i],[h,[f,E+` TV`],[m,x]],[/crkey/i],[[f,ee+`cast`],[h,j],[m,x]],[/droid.+aft(\w)( bui|\))/i],[f,[h,T],[m,x]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[f,[h,se],[m,x]],[/(bravia[\w ]+)( bui|\))/i],[f,[h,N],[m,x]],[/(mitv-\w{5}) bui/i],[f,[h,ce],[m,x]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[h,I],[f,I],[m,x]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[m,x]],[/((pebble))app/i],[h,f,[m,S]],[/droid.+; (glass) \d/i],[f,[h,j],[m,S]],[/droid.+; (wt63?0{2,3})\)/i],[f,[h,le],[m,S]],[/(quest( 2)?)/i],[f,[h,ue],[m,S]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[m,C]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[f,[m,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[m,b]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[m,b]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[m,y]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[h,`Generic`]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[g,[p,A+`HTML`]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[g,[p,`Blink`]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[p,g],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[g,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,g],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[p,[g,he,L]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,`Windows`],[g,he,L]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[g,/_/g,`.`],[p,`iOS`]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[p,`Mac OS`],[g,/_/g,`.`]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[g,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[p,g],[/\(bb(10);/i],[g,[p,O]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[g,[p,`Symbian`]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[g,[p,te+` OS`]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[g,[p,`webOS`]],[/crkey\/([\d\.]+)/i],[g,[p,ee+`cast`]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[p,`Chromium OS`],g],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[p,g],[/(sunos) ?([\w\.\d]*)/i],[[p,`Solaris`],g],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[p,g]]},z=function(e,t){if(typeof e===l&&(t=e,e=r),!(this instanceof z))return new z(e,t).getResult();var i=e||(typeof n!==c&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:a),o=t?de(R,t):R;return this.getBrowser=function(){var e={};return e[p]=r,e[g]=r,me.call(e,i,o.browser),e.major=pe(e.version),e},this.getCPU=function(){var e={};return e[_]=r,me.call(e,i,o.cpu),e},this.getDevice=function(){var e={};return e[h]=r,e[f]=r,e[m]=r,me.call(e,i,o.device),e},this.getEngine=function(){var e={};return e[p]=r,e[g]=r,me.call(e,i,o.engine),e},this.getOS=function(){var e={};return e[p]=r,e[g]=r,me.call(e,i,o.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=typeof e===u&&e.length>w?I(e,w):e,this},this.setUA(i),this};z.VERSION=i,z.BROWSER=fe([p,g,d]),z.CPU=fe([_]),z.DEVICE=fe([f,h,m,v,y,x,b,S,C]),z.ENGINE=z.OS=fe([p,g]),typeof e===c?typeof define===s&&define.amd?define(function(){return z}):typeof n!==c&&(n.UAParser=z):(typeof t!==c&&t.exports&&(e=t.exports=z),e.UAParser=z);var B=typeof n!==c&&(n.jQuery||n.Zepto);if(B&&!B.ua){var V=new z;B.ua=V.getResult(),B.ua.get=function(){return V.getUA()},B.ua.set=function(e){V.setUA(e);var t=V.getResult();for(var n in t)B.ua[n]=t[n]}}})(typeof window==`object`?window:e)}))()),ie;(function(e){e[e.OBJECT_URL=0]=`OBJECT_URL`,e[e.SRC_OBJECT=1]=`SRC_OBJECT`})(ie||={});let M={deviceMotionMutliplier:-1,blacklisted:!1,showGyroPermissionsWarningIfNecessary:!1,showSafariPermissionsResetIfNecessary:!1,requestHighFrameRate:!1,videoWidth:1280,videoHeight:720,getDataSize:e=>e===A.HIGH?[640,360]:[320,180],videoElementInDOM:!1,preferMediaStreamTrackProcessorCamera:!1,preferImageBitmapCamera:!1,ios164CameraSelection:!1,relyOnConstraintsForCameraSelection:!1,forceWindowOrientation:!1,intervalMultiplier:1,trustSensorIntervals:!1,offscreenCanvasSupported:globalThis.OffscreenCanvas!==void 0};typeof window<`u`&&(window.zeeProfile=M,window.location.href.indexOf(`_mstppipeline`)>=0&&(console.log(`Configuring for MSTP camera pipeline (if supported)`),M.preferMediaStreamTrackProcessorCamera=!0),window.location.href.indexOf(`_imagebitmappipeline`)>=0&&(console.log(`Configuring for ImageBitmap camera pipeline (if supported)`),M.preferImageBitmapCamera=!0));let ae=new re.UAParser,oe=(ae.getOS().name||`unknown`).toLowerCase(),se=(ae.getEngine().name||`unknown`).toLowerCase();se===`webkit`&&oe!==`ios`&&(M.deviceMotionMutliplier=1,typeof window<`u`&&window.orientation!==void 0&&N(`15.0`)),se===`webkit`&&oe===`ios`&&(M.deviceMotionMutliplier=1,N(ae.getOS().version||`15.0`));function N(e){M.forceWindowOrientation=!0,M.preferMediaStreamTrackProcessorCamera=!1,M.intervalMultiplier=1e3,M.trustSensorIntervals=!0;let t=e.split(`.`);if(t.length>=2){let e=parseInt(t[0]),n=parseInt(t[1]);(e<11||e===11&&n<3)&&(M.blacklisted=!0),(e<12||e===12&&n<2)&&(M.videoElementInDOM=!0),(e===12&&n>=2||e>=13)&&(M.showGyroPermissionsWarningIfNecessary=!0),e>=13&&(M.showSafariPermissionsResetIfNecessary=!0),(e>=12&&n>1||e>=13)&&navigator.mediaDevices&&navigator.mediaDevices.getSupportedConstraints&&navigator.mediaDevices.getSupportedConstraints().frameRate&&(M.requestHighFrameRate=!0,e<14&&(M.videoHeight=360,M.getDataSize=e=>e===A.HIGH?[640,360]:[320,180])),e===16&&n>=4&&(M.ios164CameraSelection=!0),e>=17&&(M.relyOnConstraintsForCameraSelection=!0)}}function ce(e,t,n){let r=e.createShader(t);if(!r)throw Error(`Unable to create shader`);e.shaderSource(r,n),e.compileShader(r);let i=e.getShaderInfoLog(r);if(i&&i.trim().length>0)throw Error(`Shader compile error: `+i);return r}function le(e,t){e.linkProgram(t);let n=e.getProgramInfoLog(t);if(n&&n.trim().length>0)throw Error(`Unable to link: `+n)}var ue=class{constructor(e){this._gl=e,this._isPaused=!0,this._hadFrames=!1,this._isUserFacing=!1,this._cameraToScreenRotation=0,this._isUploadFrame=!0,this._computedTransformRotation=-1,this._computedFrontCameraRotation=!1,this._cameraUvTransform=v(),this._framebufferWidth=0,this._framebufferHeight=0,this._framebufferId=null,this._renderTexture=null,this._isWebGL2=!1,this._isWebGL2=e.getParameter(e.VERSION).indexOf(`WebGL 2`)>=0,this._isWebGL2||(this._instancedArraysExtension=this._gl.getExtension(`ANGLE_instanced_arrays`))}resetGLContext(){this._framebufferId=null,this._renderTexture=null,this._vertexBuffer=void 0,this._indexBuffer=void 0,this._greyscaleShader=void 0}destroy(){this.resetGLContext()}uploadFrame(e,t,n,r,i){let[a,o]=M.getDataSize(i);this.uploadFrameForSize(e,t,n,r,a,o)}uploadFrameForSize(e,t,n,r,i,a){let o=this._gl,s=ne.get(o);s.push();let c=o.isEnabled(o.SCISSOR_TEST),l=o.isEnabled(o.DEPTH_TEST),u=o.isEnabled(o.BLEND),d=o.isEnabled(o.CULL_FACE),f=o.isEnabled(o.STENCIL_TEST),p=o.getParameter(o.ACTIVE_TEXTURE),m=o.getParameter(o.UNPACK_FLIP_Y_WEBGL),h=o.getParameter(o.CURRENT_PROGRAM);o.activeTexture(o.TEXTURE0);let g=o.getParameter(o.TEXTURE_BINDING_2D),_=o.getParameter(o.FRAMEBUFFER_BINDING),v=o.getParameter(o.ARRAY_BUFFER_BINDING),y=o.getParameter(o.ELEMENT_ARRAY_BUFFER_BINDING);o.disable(o.SCISSOR_TEST),o.disable(o.DEPTH_TEST),o.disable(o.BLEND),o.disable(o.CULL_FACE),o.disable(o.STENCIL_TEST),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,!1),o.bindTexture(o.TEXTURE_2D,e);let b=o.RGBA,x=o.RGBA,S=o.UNSIGNED_BYTE;o.texImage2D(o.TEXTURE_2D,0,b,x,S,t);let C=0,w=0;typeof HTMLVideoElement<`u`&&t instanceof HTMLVideoElement?(C=t.videoWidth,w=t.videoHeight):(C=t.width,w=t.height),w>C&&(w=[C,C=w][0]),this._updateTransforms(n,r);let T=this._getFramebuffer(o,i/4,a),E=this._getVertexBuffer(o),D=this._getIndexBuffer(o),O=this._getGreyscaleShader(o),k=o.getVertexAttrib(O.aVertexPositionLoc,o.VERTEX_ATTRIB_ARRAY_SIZE),ee=o.getVertexAttrib(O.aVertexPositionLoc,o.VERTEX_ATTRIB_ARRAY_TYPE),A=o.getVertexAttrib(O.aVertexPositionLoc,o.VERTEX_ATTRIB_ARRAY_NORMALIZED),te=o.getVertexAttrib(O.aVertexPositionLoc,o.VERTEX_ATTRIB_ARRAY_STRIDE),j=o.getVertexAttribOffset(O.aVertexPositionLoc,o.VERTEX_ATTRIB_ARRAY_POINTER),re=o.getVertexAttrib(O.aVertexPositionLoc,o.VERTEX_ATTRIB_ARRAY_ENABLED),ie=o.getVertexAttrib(O.aVertexPositionLoc,o.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING),M=o.getVertexAttrib(O.aTextureCoordLoc,o.VERTEX_ATTRIB_ARRAY_SIZE),ae=o.getVertexAttrib(O.aTextureCoordLoc,o.VERTEX_ATTRIB_ARRAY_TYPE),oe=o.getVertexAttrib(O.aTextureCoordLoc,o.VERTEX_ATTRIB_ARRAY_NORMALIZED),se=o.getVertexAttrib(O.aTextureCoordLoc,o.VERTEX_ATTRIB_ARRAY_STRIDE),N=o.getVertexAttribOffset(O.aTextureCoordLoc,o.VERTEX_ATTRIB_ARRAY_POINTER),ce=o.getVertexAttrib(O.aTextureCoordLoc,o.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING),le=o.getVertexAttrib(O.aTextureCoordLoc,o.VERTEX_ATTRIB_ARRAY_ENABLED),ue=0,de=0;this._isWebGL2?(ue=o.getVertexAttrib(O.aVertexPositionLoc,o.VERTEX_ATTRIB_ARRAY_DIVISOR),de=o.getVertexAttrib(O.aTextureCoordLoc,o.VERTEX_ATTRIB_ARRAY_DIVISOR),o.vertexAttribDivisor(O.aVertexPositionLoc,0),o.vertexAttribDivisor(O.aTextureCoordLoc,0)):this._instancedArraysExtension&&(ue=o.getVertexAttrib(O.aVertexPositionLoc,this._instancedArraysExtension.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE),de=o.getVertexAttrib(O.aTextureCoordLoc,this._instancedArraysExtension.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE),this._instancedArraysExtension.vertexAttribDivisorANGLE(O.aVertexPositionLoc,0),this._instancedArraysExtension.vertexAttribDivisorANGLE(O.aTextureCoordLoc,0)),o.bindFramebuffer(o.FRAMEBUFFER,T),o.viewport(0,0,this._framebufferWidth,this._framebufferHeight),o.clear(o.COLOR_BUFFER_BIT),o.bindBuffer(o.ARRAY_BUFFER,E),o.vertexAttribPointer(O.aVertexPositionLoc,2,o.FLOAT,!1,16,0),o.enableVertexAttribArray(O.aVertexPositionLoc),o.vertexAttribPointer(O.aTextureCoordLoc,2,o.FLOAT,!1,16,8),o.enableVertexAttribArray(O.aTextureCoordLoc),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,D),o.useProgram(O.program),o.uniform1f(O.uTexWidthLoc,i),o.uniformMatrix4fv(O.uUvTransformLoc,!1,this._cameraUvTransform),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,e),o.uniform1i(O.uSamplerLoc,0),o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0),o.bindBuffer(o.ARRAY_BUFFER,ie),o.vertexAttribPointer(O.aVertexPositionLoc,k,ee,A,te,j),o.bindBuffer(o.ARRAY_BUFFER,ce),o.vertexAttribPointer(O.aTextureCoordLoc,M,ae,oe,se,N),o.bindBuffer(o.ARRAY_BUFFER,v),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,y),re||o.disableVertexAttribArray(O.aVertexPositionLoc),le||o.disableVertexAttribArray(O.aTextureCoordLoc),this._isWebGL2?(o.vertexAttribDivisor(O.aVertexPositionLoc,ue),o.vertexAttribDivisor(O.aTextureCoordLoc,de)):this._instancedArraysExtension&&(this._instancedArraysExtension.vertexAttribDivisorANGLE(O.aVertexPositionLoc,ue),this._instancedArraysExtension.vertexAttribDivisorANGLE(O.aTextureCoordLoc,de)),o.bindFramebuffer(o.FRAMEBUFFER,_),o.useProgram(h),o.bindTexture(o.TEXTURE_2D,g),o.activeTexture(p),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,m),s.pop(),u&&o.enable(o.BLEND),d&&o.enable(o.CULL_FACE),l&&o.enable(o.DEPTH_TEST),c&&o.enable(o.SCISSOR_TEST),f&&o.enable(o.STENCIL_TEST)}readFrame(e,t,n){let[r,i]=M.getDataSize(n);return this.readFrameForSize(e,t,r,i)}readFrameForSize(e,t,n,r){let i=this._gl,a=new Uint8Array(t),o=i.getParameter(i.FRAMEBUFFER_BINDING),s=this._getFramebuffer(i,n/4,r);return i.bindFramebuffer(i.FRAMEBUFFER,s),i.readPixels(0,0,this._framebufferWidth,this._framebufferHeight,i.RGBA,i.UNSIGNED_BYTE,a),i.bindFramebuffer(i.FRAMEBUFFER,o),{uvTransform:this._cameraUvTransform,data:t,texture:e,dataWidth:n,dataHeight:r,userFacing:this._computedFrontCameraRotation}}_updateTransforms(e,t){e==this._computedTransformRotation&&t==this._computedFrontCameraRotation||(this._computedTransformRotation=e,this._computedFrontCameraRotation=t,this._cameraUvTransform=this._getCameraUvTransform())}_getCameraUvTransform(){switch(this._computedTransformRotation){case 270:return new Float32Array([0,1,0,0,-1,0,0,0,0,0,1,0,1,0,0,1]);case 180:return new Float32Array([-1,0,0,0,0,-1,0,0,0,0,1,0,1,1,0,1]);case 90:return new Float32Array([0,-1,0,0,1,0,0,0,0,0,1,0,0,1,0,1])}return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}_getFramebuffer(e,t,n){if(this._framebufferWidth===t&&this._framebufferHeight===n&&this._framebufferId)return this._framebufferId;if(this._framebufferId&&=(e.deleteFramebuffer(this._framebufferId),null),this._renderTexture&&=(e.deleteTexture(this._renderTexture),null),this._framebufferId=e.createFramebuffer(),!this._framebufferId)throw Error(`Unable to create framebuffer`);if(e.bindFramebuffer(e.FRAMEBUFFER,this._framebufferId),this._renderTexture=e.createTexture(),!this._renderTexture)throw Error(`Unable to create render texture`);e.activeTexture(e.TEXTURE0);let r=e.getParameter(e.TEXTURE_BINDING_2D);e.bindTexture(e.TEXTURE_2D,this._renderTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,n,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._renderTexture,0);let i=e.checkFramebufferStatus(e.FRAMEBUFFER);if(i!==e.FRAMEBUFFER_COMPLETE)throw Error(`Framebuffer not complete: `+i.toString());return this._framebufferWidth=t,this._framebufferHeight=n,e.bindTexture(e.TEXTURE_2D,r),e.bindFramebuffer(e.FRAMEBUFFER,null),this._framebufferId}_getVertexBuffer(e){if(this._vertexBuffer)return this._vertexBuffer;if(this._vertexBuffer=e.createBuffer(),!this._vertexBuffer)throw Error(`Unable to create vertex buffer`);e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer);let t=new Float32Array([-1,-1,0,0,-1,1,0,1,1,1,1,1,1,-1,1,0]);return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),this._vertexBuffer}_getIndexBuffer(e){if(this._indexBuffer)return this._indexBuffer;if(this._indexBuffer=e.createBuffer(),!this._indexBuffer)throw Error(`Unable to create index buffer`);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer);let t=new Uint16Array([0,1,2,0,2,3]);return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW),this._indexBuffer}_getGreyscaleShader(e){if(this._greyscaleShader)return this._greyscaleShader;let t=e.createProgram();if(!t)throw Error(`Unable to create program`);let n=ce(e,e.VERTEX_SHADER,de),r=ce(e,e.FRAGMENT_SHADER,fe);e.attachShader(t,n),e.attachShader(t,r),le(e,t);let i=e.getUniformLocation(t,`uTexWidth`);if(!i)throw Error(`Unable to get uniform location uTexWidth`);let a=e.getUniformLocation(t,`uUvTransform`);if(!a)throw Error(`Unable to get uniform location uUvTransform`);let o=e.getUniformLocation(t,`uSampler`);if(!o)throw Error(`Unable to get uniform location uSampler`);return this._greyscaleShader={program:t,aVertexPositionLoc:e.getAttribLocation(t,`aVertexPosition`),aTextureCoordLoc:e.getAttribLocation(t,`aTextureCoord`),uTexWidthLoc:i,uUvTransformLoc:a,uSamplerLoc:o},this._greyscaleShader}};let de=`
    attribute vec4 aVertexPosition;
    attribute vec2 aTextureCoord;

    varying highp vec2 vTextureCoord1;
    varying highp vec2 vTextureCoord2;
    varying highp vec2 vTextureCoord3;
    varying highp vec2 vTextureCoord4;

    uniform float uTexWidth;
	uniform mat4 uUvTransform;

    void main(void) {
      highp vec2 offset1 = vec2(1.5 / uTexWidth, 0);
      highp vec2 offset2 = vec2(0.5 / uTexWidth, 0);

      gl_Position = aVertexPosition;
      vTextureCoord1 = (uUvTransform * vec4(aTextureCoord - offset1, 0, 1)).xy;
      vTextureCoord2 = (uUvTransform * vec4(aTextureCoord - offset2, 0, 1)).xy;
      vTextureCoord3 = (uUvTransform * vec4(aTextureCoord + offset2, 0, 1)).xy;
      vTextureCoord4 = (uUvTransform * vec4(aTextureCoord + offset1, 0, 1)).xy;
    }
`,fe=`
  varying highp vec2 vTextureCoord1;
  varying highp vec2 vTextureCoord2;
  varying highp vec2 vTextureCoord3;
  varying highp vec2 vTextureCoord4;

  uniform sampler2D uSampler;

  const lowp vec3 colorWeights = vec3(77.0 / 256.0, 150.0 / 256.0, 29.0 / 256.0);

  void main(void) {
    lowp vec4 outpx;

    outpx.r = dot(colorWeights, texture2D(uSampler, vTextureCoord1).xyz);
    outpx.g = dot(colorWeights, texture2D(uSampler, vTextureCoord2).xyz);
    outpx.b = dot(colorWeights, texture2D(uSampler, vTextureCoord3).xyz);
    outpx.a = dot(colorWeights, texture2D(uSampler, vTextureCoord4).xyz);

    gl_FragColor = outpx;
  }
`,P,F,pe,I;function me(){if(!pe||!I){if(I=new OffscreenCanvas(1,1).getContext(`webgl`),!I)throw Error(`Unable to get offscreen GL context`);pe=new ue(I)}return[pe,I]}function he(e,t,n,r){let[i,a]=me();if(F||(F=a.createTexture(),a.bindTexture(a.TEXTURE_2D,F),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR)),!F)return;let[o,s]=M.getDataSize(e.cp),c=e.r==90||e.r==270,l=c?e.i.height:e.i.width,u=c?e.i.width:e.i.height,d=Math.round(o*u/l);d<s?s=d:o=Math.round(s*l/u),(!P||P.byteLength<o*s)&&(P=new ArrayBuffer(o*s)),i.uploadFrameForSize(F,e.i,e.r,e.userFacing,o,s);let f=i.readFrameForSize(F,P,o,s),p={t:`imageBitmapS2C`,dataWidth:f.dataWidth,dataHeight:f.dataHeight,frame:e.i,userFacing:f.userFacing,uvTransform:f.uvTransform||v(),tokenId:e.tokenId,p:e.p,data:e.requestData?f.data:void 0};r.postOutgoingMessage(p,[e.i]);let m=n._pipeline_by_instance.get(e.p);m&&(t.pipeline_camera_frame_submit(m,P,f.dataWidth,f.dataHeight,e.tokenId,e.cameraToDevice,e.cameraModel,f.userFacing,performance.now()),t.pipeline_frame_update(m),n.exploreState())}function ge(e){return{worker_message_send_count:e.cwrap(`worker_message_send_count`,`number`,[]),worker_message_send_clear:e.cwrap(`worker_message_send_clear`,null,[]),worker_message_send_data_size:e.cwrap(`worker_message_send_data_size`,`number`,[`number`]),worker_message_send_data:e.cwrap(`worker_message_send_data`,`number`,[`number`]),worker_message_send_reference:e.cwrap(`worker_message_send_reference`,`number`,[`number`]),worker_message_send_instance:e.cwrap(`worker_message_send_instance`,`number`,[`number`]),worker_message_receive:e.cwrap(`worker_message_receive`,null,[`number`,`number`,`number`,`number`])}}function L(e){return{data_download_clear:e.cwrap(`data_download_clear`,null,[]),data_download_size:e.cwrap(`data_download_size`,`number`,[]),data_download:e.cwrap(`data_download`,`number`,[]),data_should_record_set:e.cwrap(`data_should_record_set`,null,[`number`])}}var R=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};let z=new g,B,V,_e=0,ve=!1,ye=new Map,be=new Map;function xe(e,t,n){return R(this,void 0,void 0,function*(){let r=l({locateFile:(t,n)=>t.endsWith(`zappar-cv.wasm`)?e:n+t,instantiateWasm:(e,n)=>{let r=new WebAssembly.Instance(t,e);return n(r),r.exports},onRuntimeInitialized:()=>{let e=u(r),t=ge(r),i=n>0?L(r):void 0;i?.data_should_record_set(n);let a=new p(e,(e,t)=>{z.postOutgoingMessage({p:e,t:`zappar`,d:t},[t])});z.postOutgoingMessage(`loaded`,[]),z.onIncomingMessage.bind(n=>{var o;switch(n.t){case`zappar`:a.processBuffer(n.d),z.postOutgoingMessage({t:`buf`,d:n.d},[n.d]);break;case`buf`:(o=a.serializersByPipelineId.get(n.p))==null||o.bufferReturn(n.d);break;case`cameraFrameC2S`:{let o=n,s=a._pipeline_by_instance.get(o.p),c;s&&(e.pipeline_camera_frame_submit(s,o.d,o.width,o.height,o.token,o.c2d,o.cm,o.userFacing,o.captureTime),e.pipeline_frame_update(s),c=e.pipeline_camera_frame_device_attitude(s),a.exploreState(),je(r,t),i&&Me(r,i));let l={token:o.token,d:o.d,p:o.p,t:`cameraFrameRecycleS2C`,att:c};z.postOutgoingMessage(l,[o.d]);break}case`rawenabled`:ve=n.v;break;case`rawrequest`:{let e=n,t=ye.get(e.p),r={t:`raw`,token:e.token,p:e.p,data:t?t.ready.find(t=>t.token===e.token)?.data??null:null};z.postOutgoingMessage(r,[]);break}case`cameraProfileC2S`:{let e=n;be.set(e.source,e.p);break}case`streamC2S`:{let o=n;H(r,e,o.s,o.p,o.userFacing,a,o.source,t,i).then(()=>{let e={t:`streamEndedS2C`,p:o.p,source:o.source};z.postOutgoingMessage(e,[])}).catch(e=>{});break}case`cameraToScreenC2S`:_e=n.r;break;case`imageBitmapC2S`:he(n,e,a,z);break;case`sensorDataC2S`:{let t=n,r=a._pipeline_by_instance.get(t.p);if(!r)break;switch(t.sensor){case`accel`:e.pipeline_motion_accelerometer_submit(r,t.timestamp,t.x,t.y,t.z);break;case`accel_w_gravity_int`:e.pipeline_motion_accelerometer_with_gravity_submit_int(r,t.timestamp,t.interval,t.x,t.y,t.z);break;case`accel_wo_gravity_int`:e.pipeline_motion_accelerometer_without_gravity_submit_int(r,t.timestamp,t.interval,t.x,t.y,t.z);break;case`attitude_int`:e.pipeline_motion_attitude_submit_int(r,t.timestamp,t.interval,t.x,t.y,t.z);break;case`attitude`:e.pipeline_motion_attitude_submit(r,t.timestamp,t.x,t.y,t.z);break;case`rotation_rate_int`:e.pipeline_motion_rotation_rate_submit_int(r,t.timestamp,t.interval,t.x,t.y,t.z);break;case`rotation_rate`:e.pipeline_motion_rotation_rate_submit(r,t.timestamp,t.x,t.y,t.z);break;case`relative_orientation`:e.pipeline_motion_relative_orientation_submit_int(r,t.timestamp,t.interval,t.x,t.y,t.z,t.w);break}break}case`attitudeMatrixC2S`:{let t=n,r=a._pipeline_by_instance.get(t.p);if(!r)break;e.pipeline_motion_attitude_matrix_submit(r,t.m);break}}})}})})}function H(e,t,n,r,i,a,o,s,c){return R(this,void 0,void 0,function*(){for(;;){let l;try{l=yield n.getReader()}catch{yield ke(1e3);continue}try{yield Oe(e,t,l,r,i,a,o,s,c);return}catch{}yield ke(1e3);return}})}let Se=0,Ce=0,we=1;function Te(e){return new Promise((t,n)=>{let r=setTimeout(()=>{n(`Frame timeout`)},2e3);e.read().then(e=>{clearTimeout(r),t(e)})})}let Ee=v(),De=new Float32Array([300,300,160,120,0,0]);function Oe(e,t,n,r,i,a,o,s,c){var l;return R(this,void 0,void 0,function*(){for(;;){let u=yield Te(n);if(u.done){(l=u.value)==null||l.close();return}let d=u.value,f=d.allocationSize();f>Ce&&(Se>0&&e._free(Se),Se=e._malloc(f),Ce=f),yield d.copyTo(e.HEAPU8.subarray(Se,Se+Ce));let p=we;we++;let m=d.visibleRect.width,h=d.visibleRect.height,g,_=m,v=h;switch(_e){case 270:g=new Float32Array([0,1,0,0,-1,0,0,0,0,0,1,0,1,0,0,1]),_=h,v=m;break;case 180:g=new Float32Array([-1,0,0,0,0,-1,0,0,0,0,1,0,1,1,0,1]);break;case 90:g=new Float32Array([0,-1,0,0,1,0,0,0,0,0,1,0,0,1,0,1]),_=h,v=m;break;default:g=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);break}let x=!1;be.get(o)!==A.HIGH&&(_/=2,v/=2,x=!0);let S=d.clone();i?b(Ee,[-1,1,-1]):y(Ee);let C=(i?300:240)*_/320;De[0]=C,De[1]=C,De[2]=_*.5,De[3]=v*.5;let w={token:p,d:S,p:r,t:`videoFrameS2C`,userFacing:i,uvTransform:g,w:_,h:v,cameraToDevice:Ee,cameraModel:De,source:o};z.postOutgoingMessage(w,[w.d,w.uvTransform.buffer]);let T=a._pipeline_by_instance.get(r);if(T){try{t.pipeline_camera_frame_submit_raw_pointer(T,Se,f,Ae(d.format),m,h,p,Ee,_e,De,i,d.timestamp??-1,x),je(e,s),c&&Me(e,c)}catch(e){console.log(`Exception during camera processing`,e)}if(t.pipeline_frame_update(T),ve){let n=ye.get(r);if(n||(n={available:[],ready:[]},ye.set(r,n)),n.ready.length>4){let e=n.ready.splice(0,1);for(let t of e)n.available.push(new Uint8Array(t.data.data))}let i=t.pipeline_camera_frame_data_raw_size(T),a;for(;!a||a.byteLength<i;)n.available.length<1&&n.available.push(new Uint8Array(i)),a=n.available.pop();let o=t.pipeline_camera_frame_data_raw(T);a.set(e.HEAPU8.subarray(o,o+i)),n.ready.push({token:p,data:{data:a,width:t.pipeline_camera_data_width(r),height:t.pipeline_camera_data_height(r)}})}a.exploreState()}d.close()}})}function ke(e){return new Promise(t=>{setTimeout(t,e)})}function Ae(e){switch(e){case`I420`:return E.FRAME_PIXEL_FORMAT_I420;case`I420A`:return E.FRAME_PIXEL_FORMAT_I420A;case`I422`:return E.FRAME_PIXEL_FORMAT_I422;case`I444`:return E.FRAME_PIXEL_FORMAT_I444;case`NV12`:return E.FRAME_PIXEL_FORMAT_NV12;case`RGBA`:case`RGBX`:return E.FRAME_PIXEL_FORMAT_RGBA;case`BGRA`:case`BGRX`:return E.FRAME_PIXEL_FORMAT_BGRA}return E.FRAME_PIXEL_FORMAT_Y}function je(e,t){let n=t.worker_message_send_count();if(n!==0){(!B||!V)&&(B=new MessageChannel,B.port1.start(),B.port1.addEventListener(`message`,n=>{if(n.data.t!==`msgrec`)return;let r=n.data.data,i=e._malloc(r.byteLength);e.HEAPU8.set(r,i),t.worker_message_receive(n.data.reference,r.byteLength,i,0),e._free(i)}),V=new MessageChannel,V.port1.start(),V.port1.addEventListener(`message`,n=>{if(n.data.t!==`msgrec`)return;let r=n.data.data,i=e._malloc(r.byteLength);e.HEAPU8.set(r,i),t.worker_message_receive(n.data.reference,r.byteLength,i,1),e._free(i)}),z.postOutgoingMessage({t:`setupCeresWorker`,port0:B.port2,port1:V.port2},[B.port2,V.port2]));for(let r=0;r<n;r++){let n=t.worker_message_send_reference(r),i=t.worker_message_send_data_size(r),a=t.worker_message_send_instance(r),o=t.worker_message_send_data(r),s=e.HEAPU8.slice(o,o+i);(a===0?B:V).port1.postMessage({t:`msgsend`,data:s,reference:n,instance:a},[s.buffer])}t.worker_message_send_clear()}}function Me(e,t){let n=t.data_download_size();if(n===0)return;let r=t.data_download(),i=e.HEAPU8.slice(r,r+n);z.postOutgoingMessage({t:`_z_datadownload`,data:i},[i.buffer]),t.data_download_clear()}let Ne=self;z.onOutgoingMessage.bind(()=>{let e=z.getOutgoingMessages();for(let t of e)Ne.postMessage(t.msg,t.transferables)});let U=e=>{e&&e.data&&e.data.t===`wasm`&&(xe(location.href.startsWith(`blob`)?e.data.url:new URL(`/assets/zappar-cv-Ca4h5Ys_.wasm`,``+self.location.href).toString(),e.data.module,e.data.shouldRecordData??0),Ne.removeEventListener(`message`,U))};Ne.addEventListener(`message`,U),Ne.addEventListener(`message`,e=>{z.postIncomingMessage(e.data)})})();